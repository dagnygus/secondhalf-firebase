"use strict";(self.webpackChunksecondhalf_spa=self.webpackChunksecondhalf_spa||[]).push([[441],{441:(fi,lt,l)=>{l.r(lt),l.d(lt,{AccountModule:()=>K});var ct=l(5107),A=l(6806),c=l(8884),a=l(7340),b=l(4004),x=l(9300),Z=l(3099),pt=l(6451),Ut=l(9646),M=l(6502),t=l(4650),w=l(7392),W=l(3848),f=l(6895);class k extends M.I{constructor(e,i){super(),this.animationState=null;const n=(0,pt.T)((0,Ut.of)(e).pipe((0,b.U)(o=>o.firstChild.snapshot.url[0].path)),i.events.pipe((0,x.h)(o=>o instanceof A.m2),(0,b.U)(()=>e.firstChild.snapshot.url[0].path),(0,Z.B)()));this.detailsActivePath$=n.pipe((0,b.U)(o=>"details"===o)),this.newPasswordActivePath$=n.pipe((0,b.U)(o=>"newpassword"===o)),this.photosActivePath$=n.pipe((0,b.U)(o=>"photos"===o))}static#t=this.\u0275fac=function(i){return new(i||k)(t.Y36(A.gz),t.Y36(A.F0))};static#e=this.\u0275cmp=t.Xpm({type:k,selectors:[["app-auth-user"]],hostVars:1,hostBindings:function(i,n){2&i&&t.d8E("@authUserPage",n.animationState)},features:[t.qOj],decls:27,vars:11,consts:[["mat-tab-nav-bar","","backgroundColor","primary","mat-align-tabs","center",1,"w-[100vw]","min-w-[100%]","mat-elevation-z4",3,"tabPanel"],["mat-tab-link","","routerLink","./details",1,"max-w-[185px]",3,"active"],[1,"flex","flex-col","items-center"],[1,"auth-user__tab-subtitle","text-[.8em]"],["mat-tab-link","","routerLink","./newpassword",1,"max-w-[185px]",3,"active"],["mat-tab-link","","routerLink","./photos",1,"max-w-[185px]",3,"active"],["tabPanel",""],[1,"grid","items-start"],["outlet","outlet"]],template:function(i,n){if(1&i&&(t.TgZ(0,"nav",0)(1,"a",1),t.ALo(2,"async"),t.TgZ(3,"div",2)(4,"mat-icon"),t._uU(5,"account_circle"),t.qZA(),t.TgZ(6,"span",3),t._uU(7,"Details"),t.qZA()()(),t.TgZ(8,"a",4),t.ALo(9,"async"),t.TgZ(10,"div",2)(11,"mat-icon"),t._uU(12,"password"),t.qZA(),t.TgZ(13,"span",3),t._uU(14,"New password"),t.qZA()()(),t.TgZ(15,"a",5),t.ALo(16,"async"),t.TgZ(17,"div",2)(18,"mat-icon"),t._uU(19,"collections"),t.qZA(),t.TgZ(20,"span",3),t._uU(21,"Photos"),t.qZA()()()(),t._UZ(22,"mat-tab-nav-panel",null,6),t.TgZ(24,"div",7),t._UZ(25,"router-outlet",null,8),t.qZA()),2&i){const o=t.MAs(23),r=t.MAs(26);t.Q6J("tabPanel",o),t.xp6(1),t.Q6J("active",t.lcZ(2,5,n.detailsActivePath$)),t.xp6(7),t.Q6J("active",t.lcZ(9,7,n.newPasswordActivePath$)),t.xp6(7),t.Q6J("active",t.lcZ(16,9,n.photosActivePath$)),t.xp6(9),t.Q6J("@outlet",r.isActivated?r.activatedRoute:"")}},dependencies:[A.lC,A.rH,w.Hw,W.BU,W.sW,W.Nj,f.Ov],data:{animation:[(0,a.X$)("outlet",[(0,a.eR)("* <=> *",[(0,a.ru)([(0,a.IO)("@*",(0,a.pV)(),{optional:!0})])])]),(0,a.X$)("authUserPage",[(0,a.eR)(":leave",[(0,a.IO)("nav",(0,c.Frz)("400ms","0ms"))]),(0,a.eR)(":enter",[(0,a.IO)("nav",(0,c.Fi6)("400ms","200ms"))])])]},changeDetection:0})}var m=l(6441),u=l(4006),R=l(2722),S=l(841),g=l(7579),_=l(1417),tt=l(9393),O=l(9653),mt=l(3715),et=l(8941),v=l(4859),y=l(9549),it=l(284);function At(s,e){if(1&s&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&s){const i=e.$implicit;t.xp6(1),t.Oqu(i)}}function Ot(s,e){if(1&s&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&s){const i=e.$implicit;t.xp6(1),t.Oqu(i.message)}}function It(s,e){1&s&&t._UZ(0,"mat-error")}function Tt(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onSubmit())}),t.TgZ(1,"div",3)(2,"mat-form-field",4)(3,"mat-label"),t._uU(4,"Old Password"),t.qZA(),t._UZ(5,"input",5),t.YNc(6,At,2,1,"mat-error",6),t.qZA(),t.TgZ(7,"mat-form-field",4)(8,"mat-label"),t._uU(9,"New password"),t.qZA(),t._UZ(10,"input",7),t.YNc(11,Ot,2,1,"mat-error",6),t.qZA(),t.TgZ(12,"mat-form-field",4)(13,"mat-label"),t._uU(14,"Confirm new password"),t.qZA(),t._UZ(15,"input",8),t.YNc(16,It,1,0,"mat-error",6),t.qZA()(),t.TgZ(17,"div",9)(18,"button",10),t._uU(19,"Update"),t.qZA(),t.TgZ(20,"button",11),t._uU(21,"Cancel"),t.qZA()()()}if(2&s){const i=t.oxw();t.Q6J("formGroup",i.formGroup)("@form",void 0),t.xp6(6),t.Q6J("appFirstKeyOf",i.formGroup.controls.oldPassword),t.xp6(5),t.Q6J("appFirstKeyOf",i.formGroup.controls.newPassword),t.xp6(5),t.Q6J("appFirstKeyOf",i.formGroup.controls.confirmNewPassword),t.xp6(1),t.Q6J("@btnGroup",void 0),t.xp6(1),t.Q6J("disabled",i.submitBtnDisabled)}}function Dt(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"div",12)(1,"div")(2,"h2",13),t._uU(3,"Succeded to update password."),t.qZA()(),t.TgZ(4,"div",14)(5,"button",15),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onUpdateAgainButtonClick())}),t._uU(6,"Update again"),t.qZA()()()}}const Zt=(0,a.X$)("form",[(0,a.eR)(":enter",[(0,a.ru)([(0,a.IO)("@*",(0,a.pV)()),(0,a.IO)("mat-form-field:nth-of-type(odd)",[c.MeT.startState,(0,a.EY)(200,[(0,c.MeT)("500ms","200ms")])],{optional:!0}),(0,a.IO)("mat-form-field:nth-of-type(even)",[c.PYX.startState,(0,a.EY)(200,[(0,c.PYX)("500ms","400ms")])],{optional:!0})])]),(0,a.eR)(":leave",[(0,a.ru)([(0,a.IO)("@*",(0,a.pV)()),(0,a.IO)("mat-form-field:nth-of-type(odd)",[(0,c.qUF)("500ms","0ms")],{optional:!0}),(0,a.IO)("mat-form-field:nth-of-type(even)",[(0,c.Gzh)("500ms","0ms")],{optional:!0})])])]),St=(0,a.X$)("btnGroup",[(0,a.eR)(":enter",[c.l6O.startState,(0,c.l6O)("800ms","300ms")]),(0,a.eR)(":leave",[(0,c.dGT)("500ms","0ms")])]);class E extends M.I{constructor(e,i,n,o,r){super(),this._store=n,this.passwordUpdated=!1,this._destroy$=new g.x,this._onceSubmited=!1;const p=this.formGroup=e.group({oldPassword:e.control("",(0,m.mr)(u.kI.required,"Old password is required!")),newPassword:e.control("",[(0,m.mr)(u.kI.required,"New password is required!"),(0,m.mr)(u.kI.minLength(5),"New password must contain minimum 5 characters!"),(0,m.$Y)("oldPassword","New password and old password can not be the same!")]),confirmNewPassword:e.control("",[(0,m.mr)(u.kI.required,"Password confirmation is required!"),(0,m.mr)(u.kI.minLength(5),"Password confirmation must contain minimum 5 characters!"),(0,m.LJ)("newPassword","Password confirmation must match with newly provided password!")])});(0,m.j1)(p.controls.oldPassword),(0,m.j1)(p.controls.newPassword),(0,m.j1)(p.controls.confirmNewPassword),i.changingPassword$.pipe((0,R.R)(this._destroy$)).subscribe(h=>{switch(h){case _.XS.awaiting:r.attach();break;case _.XS.resolved:this.passwordUpdated=!0,p.reset(),p.markAsUntouched(),o.markForCheck(),r.detach();break;case _.XS.rejected:r.detach()}})}get submitBtnDisabled(){return this._onceSubmited&&(this.formGroup.invalid||this.formGroup.pending)}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}onSubmit(){this._onceSubmited||((0,m.Gf)(this.formGroup),this._onceSubmited=!0),!this.formGroup.invalid&&this._store.dispatch((0,S.Wl)({newPasswordModel:this.formGroup.getRawValue()}))}onUpdateAgainButtonClick(){this.passwordUpdated=!1}static#t=this.\u0275fac=function(i){return new(i||E)(t.Y36(u.j3),t.Y36(tt.f),t.Y36(O.yh),t.Y36(t.sBO),t.Y36(mt.j))};static#e=this.\u0275cmp=t.Xpm({type:E,selectors:[["app-new-password"]],features:[t.qOj],decls:3,vars:2,consts:[["class","grid w-full max-w-[400px] row-[2/3] col-[1/-1]",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["succededUpdateTemplate",""],[1,"grid","w-full","max-w-[400px]","row-[2/3]","col-[1/-1]",3,"formGroup","ngSubmit"],[1,"grid"],["appearance","fill"],["matInput","","type","text","name","oldPassword","formControlName","oldPassword"],[4,"appFirstKeyOf"],["matInput","","type","text","name","newPassword","formControlName","newPassword"],["matInput","","type","text","name","confirmNewPassword","formControlName","confirmNewPassword"],[1,"grid","grid-flow-col","gap-[8px]","mt-[8px]"],["type","submit","mat-raised-button","","color","primary",1,"py-[8px_!important]",3,"disabled"],["type","button","mat-raised-button","","color","warn",1,"py-[8px_!important]"],[1,"new-password__container","grid","self-center","w-full","max-w-[400px]","row-[2/3]","col-[1/-1]"],[1,"text-center"],[1,"justify-self-center","mt-[32px]"],["mat-raised-button","","color","accent",3,"click"]],template:function(i,n){if(1&i&&(t.YNc(0,Tt,22,7,"form",0),t.YNc(1,Dt,7,0,"ng-template",null,1,t.W1O)),2&i){const o=t.MAs(2);t.Q6J("ngIf",!n.passwordUpdated)("ngIfElse",o)}},dependencies:[et.E,f.O5,v.lW,y.KE,y.hX,y.TO,it.Nt,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u],styles:["[_nghost-%COMP%]{display:grid;height:80vh;grid-template-rows:1fr auto 1fr;justify-items:center}"],data:{animation:[Zt,St]},changeDetection:0})}var Y=l(5469),nt=l(6173),Ft=l(3003),C=l(8505),Pt=l(8660),ut=l(4986),Nt=l(7272),dt=l(5698),Mt=l(8502),kt=l(9718),Rt=l(5577);function ht(s,e){return e?i=>(0,Nt.z)(e.pipe((0,dt.q)(1),(0,Mt.l)()),i.pipe(ht(s))):(0,Rt.z)((i,n)=>s(i,n).pipe((0,dt.q)(1),(0,kt.h)(i)))}var Et=l(5963);function ft(s,e=ut.z){const i=(0,Et.H)(s,e);return ht(()=>i)}var Yt=l(590),_t=l(4080),Bt=l(9751),Jt=l(9468),gt=l(6635);const $t=["image"];function Gt(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onSelect.next(o.url))}),t._uU(1,"Set as main image"),t.qZA()}}const jt=(0,a.X$)("closeBtn",[(0,a.eR)(":enter",(0,c.BkL)("300ms","200ms")),(0,a.eR)("true => false",(0,c.dGT)("300ms","0ms"))]),qt=(0,a.X$)("btnGroup",[(0,a.eR)(":enter",[(0,a.ru)([(0,a.IO)("button.main-btn",(0,c.MeT)("300ms","200ms"),{optional:!0}),(0,a.IO)("button.delete-btn",(0,c.PYX)("300ms","200ms"),{optional:!0})])]),(0,a.eR)("true => false",[(0,a.ru)([(0,a.IO)("button.main-btn",(0,c.Gzh)("400ms","0ms"),{optional:!0}),(0,a.IO)("button.delete-btn",(0,c.qUF)("400ms","0ms"),{optional:!0})])])]);class B{constructor(e,i){this._sourceEl=e,this._cdRef=i,this.animationState=!0,this.imageElRef=null,this.onSelect=new g.x,this.onDelete=new g.x,this.onClose=new g.x}ngAfterViewInit(){requestAnimationFrame(()=>{const e=this.imageElRef.nativeElement,i=e.getBoundingClientRect(),n=this._sourceEl.getBoundingClientRect();this._sourceEl.style.visibility="hidden",e.style.visibility="visible",this._applyStyles(e,n);const o=this._getKeyframe(i);(0,gt.s)(e,o,{fill:"both",duration:400,easing:"cubic-bezier(0.33, 1, 0.68, 1)"},()=>this._resetStyles(e))})}close(){return this.animationState=!1,this._cdRef.markForCheck(),requestAnimationFrame(()=>{const e=this.imageElRef.nativeElement,i=e.getBoundingClientRect(),n=this._sourceEl.getBoundingClientRect();this._sourceEl.style.visibility="hidden",this._applyStyles(e,i);const o=this._getKeyframe(n);(0,gt.s)(e,o,{fill:"both",duration:400,easing:"cubic-bezier(0.33, 1, 0.68, 1)"},()=>{this._sourceEl.style.visibility="",e.style.visibility="",this.onClose.next()})}),this.onClose}ngOnDestroy(){this.onClose.complete(),this.onSelect.complete(),this.onDelete.complete()}_getKeyframe({left:e,top:i,width:n,height:o}){return{left:`${e}px`,top:`${i}px`,width:`${n}px`,height:`${o}px`}}_applyStyles(e,{left:i,top:n,width:o,height:r}){e.style.left=`${i}px`,e.style.top=`${n}px`,e.style.width=`${o}px`,e.style.height=`${r}px`,e.style.position="fixed"}_resetStyles(e){e.style.left="",e.style.top="",e.style.width="",e.style.height="",e.style.position=""}static#t=this.\u0275fac=function(i){return new(i||B)(t.Y36("sourceEl"),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:B,selectors:[["app-photo-modal"]],viewQuery:function(i,n){if(1&i&&t.Gf($t,5),2&i){let o;t.iGM(o=t.CRH())&&(n.imageElRef=o.first)}},inputs:{url:"url",index:"index",isMain:"isMain"},decls:14,vars:4,consts:[[1,"row-[1/2]","col-[1/2]","w-full","relative","before:content-['']","before:block","before:pb-[calc(1/(3/4)_*_100%)]"],["imageContainer",""],["alt","member_image",1,"object-cover","absolute","top-0","left-0","w-full","h-full","invisible","mat-elevation-z3",3,"src"],["image",""],[1,"row-[1/2]","col-[1/2]","self-start","justify-self-end","m-[16px]","origin-center"],["mat-icon-button","","color","primary",1,"scale-125",3,"click"],[1,"grid","grid-cols-[2fr_1fr]","gap-[6px]","col-[1/2]"],["mat-raised-button","","color","accent","class","cursor-pointer main-btn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",1,"col-[2/3]","cursor-pointer","delete-btn",3,"click"],["mat-raised-button","","color","accent",1,"cursor-pointer","main-btn",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0,1),t._UZ(2,"img",2,3),t.qZA(),t.TgZ(4,"div",4)(5,"button",5),t.NdJ("click",function(){return n.close()}),t.TgZ(6,"mat-icon"),t._uU(7,"cancel"),t.qZA()()(),t.TgZ(8,"div",6),t.YNc(9,Gt,2,0,"button",7),t.TgZ(10,"button",8),t.NdJ("click",function(){return n.onDelete.next(n.index)}),t.TgZ(11,"mat-icon"),t._uU(12,"delete"),t.qZA(),t._uU(13," Deleteee "),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("src",n.url,t.LSH),t.xp6(3),t.Q6J("@closeBtn",n.animationState),t.xp6(3),t.Q6J("@btnGroup",n.animationState),t.xp6(1),t.Q6J("ngIf",!n.isMain))},dependencies:[f.O5,v.lW,v.RK,w.Hw],styles:["[_nghost-%COMP%]{width:min(95vw,60vh);display:grid;gap:4px;grid-template-rows:1fr auto}"],data:{animation:[jt,qt]},changeDetection:0})}var J=l(8184);class U{constructor(e,i,n){this._overlay=e,this._overlayPositionBuilder=i,this._ngZone=n,this._overlayRef=null,this._componentRef=null}openPhotoModal(e,i,n,o,r){if(this._componentRef)return this._componentRef.instance;const p=t.zs3.create({providers:[{provide:"sourceEl",useValue:o}],parent:r}),h=this._overlayRef=this._overlay.create({hasBackdrop:!0,positionStrategy:this._overlayPositionBuilder.global().centerHorizontally().centerVertically()}),d=this._componentRef=this._overlayRef.attach(new _t.C5(B,null,p));d.setInput("url",e),d.setInput("index",i),d.setInput("isMain",n);const rt=h.backdropElement;return rt.style.touchAction="none",this._ngZone.runOutsideAngular(()=>{new Bt.y(()=>{const xt=hi=>{hi.preventDefault()};return rt.addEventListener("wheel",xt),()=>{rt.removeEventListener("wheel",xt)}}).pipe((0,R.R)(d.instance.onClose)).subscribe()}),h.backdropClick().pipe((0,R.R)(d.instance.onClose)).subscribe(()=>d.instance.close()),d.instance.onClose.pipe((0,Jt.R)(ut.z)).subscribe(()=>{h.detach(),h.dispose(),this._overlayRef=null,this._componentRef=null}),d.instance}closePhotoModal(){this._componentRef&&this._componentRef.instance.close()}static#t=this.\u0275fac=function(i){return new(i||U)(t.LFG(J.aV),t.LFG(J.wJ),t.LFG(t.R0b))};static#e=this.\u0275prov=t.Yz7({token:U,factory:U.\u0275fac})}var vt=l(9305),Qt=l(3757),at=l(1800),bt=l(3529);const Lt=["imagesUrls",""];function Ht(s,e){1&s&&(t.TgZ(0,"div",8)(1,"span")(2,"mat-icon",9),t._uU(3,"star"),t.qZA(),t._uU(4," Main"),t.qZA()())}function Xt(s,e){1&s&&t._UZ(0,"div",10)}function Vt(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"div",3)(1,"img",4,5),t.NdJ("click",function(){const o=t.CHM(i),r=o.index,p=o.$implicit,h=t.MAs(2),d=t.oxw();return t.KtG(d.onPhotoClick(r,p,h))}),t.qZA(),t.YNc(3,Ht,5,0,"div",6),t.YNc(4,Xt,1,0,"div",7),t.qZA()}if(2&s){const i=e.$implicit,n=t.oxw(),o=t.MAs(2);t.Q6J("@photo",void 0),t.xp6(1),t.Q6J("appLazyImage",i)("loadingView",o),t.xp6(2),t.Q6J("ngIf",n.compareUrls(i,n.mainImageUrl)),t.xp6(1),t.Q6J("ngIf",n.compareUrls(i,n.mainImageUrl))}}function zt(s,e){1&s&&t._UZ(0,"app-loading-spinner",11)}const Kt=(0,a.X$)("photoContainer",[(0,a.eR)(":enter",[(0,a.IO)("div.photo",[(0,a.oB)({opacity:0,transform:"scale(0)"}),(0,a.EY)(150,(0,a.jt)("300ms 300ms",(0,a.oB)({opacity:1,transform:"scale(1)"})))],{optional:!0})])]),Wt=(0,a.X$)("photo",[(0,a.eR)(":leave",[(0,a.jt)("300ms",(0,a.oB)({opacity:0,transform:"scale(0)"}))])]);class ${constructor(e,i,n){this._cdRef=e,this._photoModalService=i,this._injector=n,this.imagesUrls=null,this.deleteImage=new t.vpe,this.mainImageSelected=new t.vpe}ngOnChanges(e){this._cdRef.reattach()}ngAfterViewChecked(){this._cdRef.detach()}onPhotoClick(e,i,n){const o=this._photoModalService.openPhotoModal(i,e,this.compareUrls(i,this.mainImageUrl),n,this._injector),r=n.parentElement;r.childElementCount>1&&(r.children.item(1).style.visibility="hidden",r.children.item(2).style.visibility="hidden"),o.onSelect.subscribe(p=>this.mainImageSelected.emit(p)),o.onDelete.subscribe(p=>this.deleteImage.emit(p)),o.onClose.subscribe(()=>{r.childElementCount>1&&(r.children.item(1).style.visibility="",r.children.item(2).style.visibility="")})}trackBy(e,i){return i}compareUrls(e,i){return null!=e&&null!=i&&(e===i||wt(e)===wt(i))}static#t=this.\u0275fac=function(i){return new(i||$)(t.Y36(t.sBO),t.Y36(U),t.Y36(t.zs3))};static#e=this.\u0275cmp=t.Xpm({type:$,selectors:[["app-current-photos","imagesUrls",""]],hostVars:1,hostBindings:function(i,n){2&i&&t.d8E("@photoContainer",n.photoContainerAnimState)},inputs:{mainImageUrl:"mainImageUrl",imagesUrls:"imagesUrls"},outputs:{deleteImage:"deleteImage",mainImageSelected:"mainImageSelected"},features:[t._Bn([{provide:(0,t.Gpc)(()=>Ct),useClass:(0,t.Gpc)(()=>Ct)}]),t.TTD],attrs:Lt,decls:3,vars:2,consts:[["class","photo relative w-full before:content-[''] before:block before:pb-[calc((4/3)_*_100%)]",4,"ngFor","ngForOf","ngForTrackBy"],["appLazyImageLoadingView",""],["loadingView","appLazyImageLoadingView"],[1,"photo","relative","w-full","before:content-['']","before:block","before:pb-[calc((4/3)_*_100%)]"],["alt","image",1,"object-cover","top-0","left-0","w-full","h-full","absolute",3,"appLazyImage","loadingView","click"],["image",""],["class","absolute top-0 right-0 text-[22px] rounded-[0_0_0_12px] p-[6px] bg-primary",4,"ngIf"],["class","frame top-0 left-0 w-full h-full absolute pointer-events-none",4,"ngIf"],[1,"absolute","top-0","right-0","text-[22px]","rounded-[0_0_0_12px]","p-[6px]","bg-primary"],[1,"color-accent"],[1,"frame","top-0","left-0","w-full","h-full","absolute","pointer-events-none"],[1,"absolute","top-[25%]","left-[25%]","w-[50%]"]],template:function(i,n){1&i&&(t.YNc(0,Vt,5,5,"div",0),t.YNc(1,zt,1,0,"ng-template",1,2,t.W1O)),2&i&&t.Q6J("ngForOf",n.imagesUrls)("ngForTrackBy",n.trackBy)},dependencies:[at.g,bt.$,bt.B,f.sg,f.O5,w.Hw],styles:['[_nghost-%COMP%]{display:grid;grid-template-columns:1fr 1fr;justify-items:center}@media (min-width: 610px){[_nghost-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}}.frame[_ngcontent-%COMP%]{border:6px solid #6200ea}.photo__photo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:start;width:100%;max-width:335px}app-photo[_ngcontent-%COMP%]{width:100%;max-width:280px}.photo__photo-container[_ngcontent-%COMP%]:before{content:"";display:block;padding-bottom:133.3333333333%}'],data:{animation:[Kt,Wt]},changeDetection:0})}class Ct{constructor(){this.selectedImg$=new g.x,this.updateRect$=new g.x,this.unselect$=new g.x}}function wt(s){let e=s.lastIndexOf("%2F")+3,i=s.substring(e);return i.includes("?")&&(e=i.indexOf("?"),i=i.substring(0,e)),i}var ot=l(6137);const te=["fileInput"],ee=["*"];class F{constructor(e,i,n){this.changeDetectorRef=e,this.renderer=i,this.ngZone=n,this._fileInput=null,this._loading=!1,this._readDataUrl=!1,this._fileDataUrls=null,this._value=null,this.fileDeleted=new t.vpe,this.filesDeleted=new t.vpe,this.loadFileDataUrlsFailed=new t.vpe,this.fileDataUrls=new t.vpe,this.valueChange=new t.vpe}get lenght(){return this._value?this._value.length:0}get loading(){return this._loading}set value(e){this._value!==e&&(e?(this._value=null,this._setNullOrConcat(e)):e||!this.fileDataUrls.observed&&!this.filesDeleted.observed?this._setNullOrConcat(null):Promise.resolve().then(()=>{this._setNullOrConcat(null)}))}get value(){return this._value}set readDataUrl(e){e=(0,ot.ll)(e),this._readDataUrl!==e&&(this._readDataUrl=(0,ot.ll)(e),!e&&this._fileDataUrls&&(this._fileDataUrls=null,this.fileDataUrls.observed&&Promise.resolve().then(()=>{this.fileDataUrls.emit(),this.changeDetectorRef.markForCheck()})))}ngAfterViewInit(){this.renderer.listen(this._fileInput.nativeElement,"input",()=>{const e=this._fileInput.nativeElement.files;!e||0===e.length||(this._setNullOrConcat(Array.from(e)),this._fileInput.nativeElement.files=null,this._fileInput.nativeElement.value="")})}writeValue(e){this._value=null,this._fileDataUrls=null,this._setNullOrConcat(e,!1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}pickFiles(){if(!this._fileInput)throw new Error("<app-file-picker-input>: Attempting to pick up file before view initialized! ");this._fileInput.nativeElement.click(),this._onTouched&&this._onTouched()}removeFile(e){if(e<0)throw new Error("MultiFilePickerInput::deleteFile: Index below 0!!");if(!this._value)throw new Error("MultiFilePickerInput::deleteFile: Cannot delete file when value is equel to null!!");if(e>this.lenght-1)throw new Error("MultiFilePickerInput::deleteFile: Index out of the range!!");let i=!1,n=!1;1===this.lenght?this._setNullOrConcat(null):(this._value=this._value.slice(),this._value.splice(e,1),i=!0,this._readDataUrl&&(this._fileDataUrls=this._fileDataUrls.slice(),this._fileDataUrls.splice(e,1),n=!0)),i&&(this.valueChange.emit(this._value),this._onChange&&this._onChange(this._value),this.changeDetectorRef.markForCheck()),n&&this.fileDataUrls.emit(this._fileDataUrls),this.fileDeleted.emit(e),0===this.lenght&&this.filesDeleted.emit()}removeAllFiles(){this._setNullOrConcat(null)}_setNullOrConcat(e,i=!0){if(this._value===e)return;let n=!1;e?(this._value=this._value?this._value.concat(e):e,this._readDataUrl&&this._readAllDataUrlsOfFiles(e)):(this._value=null,n=this._readDataUrl&&null!=this._fileDataUrls,this._fileDataUrls=null),this._value||Object.freeze(this._value),this.valueChange.emit(this._value),i&&this._onChange&&this._onChange(this._value),n&&this.fileDataUrls.emit(this._fileDataUrls),this._value||this.filesDeleted.emit(),this.changeDetectorRef.markForCheck()}_readAllDataUrlsOfFiles(e){const i=new Array(e.length);this._loading=!0;let n=!1;this.ngZone.runOutsideAngular(()=>{for(let o=0;o<e.length;o++)i[o]=this._getBase64(e[o],()=>n=!0);Promise.all(i).then(o=>{this.ngZone.run(()=>{this._fileDataUrls?(n&&(o=o.filter(r=>null!==r)),this._fileDataUrls=this._fileDataUrls.concat(o)):this._fileDataUrls=o.filter(r=>null!==r),Object.freeze(this._fileDataUrls),this._loading=!1,this.ngZone.run(()=>{this.fileDataUrls.emit(this._fileDataUrls),this.changeDetectorRef.markForCheck()})})}).catch(()=>{this.ngZone.run(()=>{this._loading=!1,this.loadFileDataUrlsFailed.emit(),this.changeDetectorRef.markForCheck()})})})}_getBase64(e,i){const n=new FileReader;return new Promise((o,r)=>{n.onload=()=>{if(!n.result)return void r();let p;p=n.result instanceof ArrayBuffer?btoa(new Uint8Array(n.result).reduce((h,d)=>h+String.fromCharCode(d),"")):n.result,i&&null===p&&i(),o(p)},n.onerror=()=>{r()},n.onabort=()=>{r()},n.readAsDataURL(e)})}static#t=this.\u0275fac=function(i){return new(i||F)(t.Y36(t.sBO),t.Y36(t.Qsj),t.Y36(t.R0b))};static#e=this.\u0275cmp=t.Xpm({type:F,selectors:[["app-multi-file-picker-input"]],viewQuery:function(i,n){if(1&i&&t.Gf(te,5),2&i){let o;t.iGM(o=t.CRH())&&(n._fileInput=o.first)}},inputs:{value:"value",name:"name",accept:"accept",readDataUrl:"readDataUrl"},outputs:{fileDeleted:"fileDeleted",filesDeleted:"filesDeleted",loadFileDataUrlsFailed:"loadFileDataUrlsFailed",fileDataUrls:"fileDataUrls",valueChange:"valueChange"},features:[t._Bn([{provide:u.JU,useExisting:F,multi:!0}])],ngContentSelectors:ee,decls:3,vars:2,consts:[["type","file","multiple","",2,"display","none",3,"name","accept"],["fileInput",""]],template:function(i,n){1&i&&(t.F$t(),t._UZ(0,"input",0,1),t.Hsn(2)),2&i&&t.Q6J("name",n.name)("accept",n.accept)},changeDetection:0})}var ie=l(5861);const ne=["canvasTemplate"];function ae(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(3);return t.KtG(o._makePicture())}),t.TgZ(1,"mat-icon"),t._uU(2,"photo_camera"),t.qZA()()}}function oe(s,e){if(1&s&&t.YNc(0,ae,3,0,"button",12),2&s){t.oxw();const i=t.MAs(12),n=t.oxw();t.Q6J("ngIf",!n.pictureCatched)("ngIfElse",i)}}function se(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2);return t.KtG(o.onCancelButtonClick())}),t.TgZ(1,"mat-icon"),t._uU(2,"cancel"),t.qZA(),t._uU(3," Cancel "),t.qZA(),t.TgZ(4,"button",15),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2);return t.KtG(o.onAcceptButtonClick())}),t.TgZ(5,"mat-icon"),t._uU(6,"add_a_photo"),t.qZA(),t._uU(7," Accept "),t.qZA()}}function re(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"div",1,2),t._UZ(2,"canvas",3,4),t.TgZ(4,"div",5)(5,"div",6)(6,"button",7),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onExitButtonClick())}),t.TgZ(7,"mat-icon"),t._uU(8,"cancel"),t.qZA()()(),t.TgZ(9,"div",8),t.YNc(10,oe,1,2,"ng-template",9),t.YNc(11,se,8,0,"ng-template",null,10,t.W1O),t.qZA()(),t._UZ(13,"div",11),t.qZA()}if(2&s){const i=t.MAs(12),n=t.oxw();t.Q6J("@container",void 0),t.xp6(10),t.Q6J("ngIf",!n.pictureCatched)("ngIfElse",i),t.xp6(3),t.Q6J("@ripple",n.rippleAnimationState)}}const le=["*"],ce=(0,a.X$)("container",[(0,a.eR)(":enter",[(0,a.oB)({opacity:0,transform:"scale(0) rotateY(0)"}),(0,a.jt)("800ms ease-out",(0,a.oB)({opacity:1,transform:"scale(1) rotateY(720deg)"}))]),(0,a.eR)(":leave",[(0,a.oB)({opacity:1,transform:"scale(1) rotateY(720deg)"}),(0,a.jt)("800ms ease-out",(0,a.oB)({opacity:0,transform:"scale(0) rotateY(0)"}))])]),pe=(0,a.X$)("ripple",[(0,a.eR)("* <=> *",[(0,a.oB)({transform:"scale(0)"}),(0,a.jt)("500ms",(0,a.oB)({transform:"scale(2)"}))])]);class P{constructor(e,i,n,o,r,p,h){this.changeDetectorRef=e,this.ngZone=i,this._platformId=n,this._renderer=o,this._overlay=r,this._viewContainerRef=p,this._positionStrategy=h,this._destroy$=new g.x,this._play=!1,this._streamWidth=0,this._streamHeight=0,this._destinationWidth=0,this._destinationHeight=0,this._destinationLeft=0,this._destinationTop=0,this._ovrlayRef=null,this._canvasElement=null,this._open=!1,this.rippleAnimationState=!1,this.fileDataUrl=null,this.pictureCatched=!1,this.videoElement=null,this._value=null,this.accept=new t.vpe,this.turnOnCameraFailed=new t.vpe,this.valueChange=new t.vpe,this.openChange=new t.vpe,this.context2D=null,this._updateCanvas=()=>{!this.context2D||!this.videoElement||(this.context2D.drawImage(this.videoElement,this._destinationLeft,this._destinationTop,this._destinationWidth,this._destinationHeight),this._play&&requestAnimationFrame(this._updateCanvas))}}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.valueChange.emit(e),this._onChange&&this._onChange(e))}get open(){return this._open}set open(e){this._open!==e&&(this._open=e,this.openChange.emit(e),e||this._clear())}writeValue(e){this._value=e,this.valueChange.emit(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}ngOnInit(){(0,f.NF)(this._platformId)&&this.ngZone.runOutsideAngular(()=>{this._renderer.listen(window,"resize",this._calculateResolution.bind(this))}),this._initialAudioElement()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}turnOnCamera(){var e=this;return(0,ie.Z)(function*(){e._onTouched&&e._onTouched();try{e._mediaStream=yield window.navigator.mediaDevices.getUserMedia({video:!0}),e._ovrlayRef=e._overlay.create({hasBackdrop:!0,positionStrategy:e._positionStrategy.global().centerHorizontally().centerVertically()});const i=e._ovrlayRef.attach(new _t.UE(e.template,e._viewContainerRef));e._canvasElement=i.rootNodes[0].children.item(0),e.context2D=e._canvasElement.getContext("2d"),e._streamWidth=e._mediaStream.getVideoTracks()[0].getSettings().width,e._streamHeight=e._mediaStream.getVideoTracks()[0].getSettings().height,e.videoElement||(e.videoElement=e._renderer.createElement("video")),e.videoElement.srcObject=e._mediaStream,e._calculateResolution(),e.videoElement.play(),e._play=!0,e.ngZone.runOutsideAngular(()=>{e._renderer.listen(e.videoElement,"loadeddata",e._updateCanvas)}),e.open=!0,e.changeDetectorRef.markForCheck()}catch{e.turnOnCameraFailed.next(),e.changeDetectorRef.markForCheck()}})()}onCancelButtonClick(){!this.pictureCatched||(this._play=!0,this.pictureCatched=!1,this.ngZone.runOutsideAngular(this._updateCanvas))}onAcceptButtonClick(){if(!this.pictureCatched||!this._canvasElement)return;this.fileDataUrl=this._canvasElement.toDataURL("image/jpg");const i=atob(this.fileDataUrl.split(",")[1]).split("").map(o=>o.charCodeAt(0)),n=new Uint8Array(i);this._play=!1,this.pictureCatched=!1,this._value=new Blob([n],{type:"image/jpg"}),this.valueChange.emit(this._value),this.accept.emit(this._value),this._clear()}onExitButtonClick(){this._clear()}_makePicture(){!this._canvasElement||(this._play=!1,this._audioSoundEffect&&this._audioSoundEffect.play(),this.pictureCatched=!0,this.rippleAnimationState=!this.rippleAnimationState,this.changeDetectorRef.markForCheck())}_initialAudioElement(){null!=this.shutterSoundEffectUrl&&(this._audioSoundEffect=this._renderer.createElement("audio"),this._renderer.setProperty(this._audioSoundEffect,"src",this.shutterSoundEffectUrl))}_clear(){this._play=!1,this.pictureCatched=!1,this.videoElement&&(this.videoElement.pause(),this.videoElement.srcObject=null),this._mediaStream&&this._mediaStream.getTracks().forEach(e=>{e.stop()}),this._ovrlayRef&&(this._ovrlayRef.detach(),this._ovrlayRef=null),this.changeDetectorRef.markForCheck()}_calculateResolution(){if(!this._canvasElement||!this.context2D||!this.videoElement)return;const e=this._streamWidth/this._streamHeight;let i,n;window.innerHeight>window.innerWidth?(i=.95*window.innerWidth,n=i*(4/3),n>.95*window.innerHeight&&(n=.95*window.innerHeight,i=n*(3/4))):(n=.95*window.innerHeight,i=n*(3/4),i>.95*window.innerWidth&&(i=.95*window.innerWidth,n=i*(4/3))),this._canvasElement.width=i,this._canvasElement.height=n,this._destinationWidth=i,this._destinationHeight=this._destinationWidth/e,this._destinationHeight<n&&(this._destinationHeight=n,this._destinationWidth=this._destinationHeight*e),this._destinationLeft=this._destinationWidth>i?(i-this._destinationWidth)/2:0,this._destinationTop=this._destinationHeight>n?(n-this._destinationHeight)/2:0}static#t=this.\u0275fac=function(i){return new(i||P)(t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(t.Lbi),t.Y36(t.Qsj),t.Y36(J.aV),t.Y36(t.s_b),t.Y36(J.wJ))};static#e=this.\u0275cmp=t.Xpm({type:P,selectors:[["app-camera-picture-input"]],viewQuery:function(i,n){if(1&i&&t.Gf(ne,5),2&i){let o;t.iGM(o=t.CRH())&&(n.template=o.first)}},inputs:{value:"value",open:"open",name:"name",shutterSoundEffectUrl:"shutterSoundEffectUrl"},outputs:{accept:"accept",turnOnCameraFailed:"turnOnCameraFailed",valueChange:"valueChange",openChange:"openChange"},features:[t._Bn([{provide:u.JU,useExisting:P,multi:!0}])],ngContentSelectors:le,decls:3,vars:0,consts:[["canvasTemplate",""],[1,"camera-picture-input__canvas-container","mat-elevation-z14"],["canvasContainer",""],[1,"camera-picture-input__canvas"],["canvas",""],[1,"camera-picture-input__buttons-container"],[1,"camera-picture-input__cancel-button-container","row-end-center","margin-8"],["mat-mini-fab","","color","warn",3,"click"],[1,"camera-picture-input__bottom-buttons-container"],[3,"ngIf","ngIfElse"],["catchedPictureTemplate",""],[1,"position-absolute","camera-picture-input__ripple"],["mat-fab","","color","primary",3,"click",4,"ngIf","ngIfElse"],["mat-fab","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,n){1&i&&(t.F$t(),t.YNc(0,re,14,4,"ng-template",null,0,t.W1O),t.Hsn(2))},dependencies:[f.O5,v.lW,v.nh,v.cs,w.Hw],styles:[".camera-picture-input__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1000000;left:0;top:0;width:100%;height:100%;background-color:#00000052}.camera-picture-input__canvas-container[_ngcontent-%COMP%]{display:flex;border:2px solid #ff4081;border-radius:16px;overflow:hidden;position:relative}.camera-picture-input__buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;width:100%;height:100%;align-items:stretch;justify-content:center}.camera-picture-input__cancel-button-container[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:center;margin:8px}.camera-picture-input__bottom-buttons-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:16px;width:100%;margin-top:auto;margin-bottom:16px}.camera-picture-input__ripple[_ngcontent-%COMP%]{transform-origin:center;transform:scale(0);width:100%;height:100%;background-image:radial-gradient(transparent,transparent,white 70%);z-index:100;border-radius:50%}"],data:{animation:[ce,pe]},changeDetection:0})}const me=["filesData",""];function ue(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"div",1),t._UZ(1,"img",2),t.TgZ(2,"div",3)(3,"button",4),t.NdJ("click",function(){const r=t.CHM(i).index,p=t.oxw();return t.KtG(p.cancel.emit(r))}),t.TgZ(4,"mat-icon"),t._uU(5,"cancel"),t.qZA()()()()}if(2&s){const i=e.$implicit;t.Q6J("@newPhoto",void 0),t.xp6(1),t.Q6J("src",i,t.LSH)}}const de=(0,a.X$)("newPhoto",[(0,a.eR)(":enter",[(0,a.oB)({transform:"rotateY(720deg) scale(0)"}),(0,a.jt)("800ms ease-in-out",(0,a.oB)({transform:"rotateY(0deg) scale(1)"}))]),(0,a.eR)(":leave",[(0,a.jt)("800ms ease-in-out",(0,a.oB)({transform:"rotateY(720deg) scale(0)"}))])]);class G{constructor(e){this._cdRef=e,this.cancel=new t.vpe}ngOnChanges(e){this._cdRef.reattach()}ngAfterViewChecked(){this._cdRef.detach()}static#t=this.\u0275fac=function(i){return new(i||G)(t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:G,selectors:[["app-new-photo-list","filesData",""]],inputs:{filesData:"filesData"},outputs:{cancel:"cancel"},features:[t.TTD],attrs:me,decls:1,vars:1,consts:[["class","photo-container w-full rounded-[8px] overflow-hidden relative\n            before:content-[''] before:block before:pb-[calc(100%_*_1/(5/7))]",4,"ngFor","ngForOf"],[1,"photo-container","w-full","rounded-[8px]","overflow-hidden","relative","before:content-['']","before:block","before:pb-[calc(100%_*_1/(5/7))]"],["alt","user_image",1,"object-cover","absolute","top-0","left-0","w-full","h-full",3,"src"],[1,"right-[16px]","top-[16px]","absolute"],["mat-mini-fab","","color","warn",3,"click"]],template:function(i,n){1&i&&t.YNc(0,ue,6,2,"div",0),2&i&&t.Q6J("ngForOf",n.filesData)},dependencies:[f.sg,v.nh,w.Hw],styles:["[_nghost-%COMP%], app-new-photo-list[_nghost-%COMP%]{display:grid;grid-template-columns:1fr 1fr;border-radius:8px;overflow:hidden;gap:8px}@media (min-width: 500px){[_nghost-%COMP%], app-new-photo-list[_nghost-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}}@media (min-width: 800px){[_nghost-%COMP%], app-new-photo-list[_nghost-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}}.photo-container[_ngcontent-%COMP%]{border:2px solid #6200ea}"],data:{animation:[de]},changeDetection:0})}const he=function(s){return{itsHeight:s}},fe=function(s,e){return{value:s,params:e}};function _e(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"div",7,8)(2,"button",9),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(),r=t.MAs(8);return t.KtG(o.imagesAccepted.emit(r.value))}),t.TgZ(3,"mat-icon"),t._uU(4,"image"),t.qZA(),t._uU(5," Upload "),t.qZA(),t.TgZ(6,"app-new-photo-list",10),t.NdJ("cancel",function(o){t.CHM(i),t.oxw();const r=t.MAs(8);return t.KtG(r.removeFile(o))}),t.qZA()()}if(2&s){const i=t.MAs(1),n=t.oxw();t.Q6J("@itemsContainer",t.WLB(4,fe,n.itemsContainerAnimationState,t.VKq(2,he,i.clientHeight))),t.xp6(6),t.Q6J("filesData",n.filesData)}}const ge=(0,a.X$)("itemsContainer",[(0,a.eR)(":enter",[(0,a.ru)([(0,a.oB)({height:0,borderWidth:0}),(0,a.jt)("300ms ease-out",(0,a.oB)({height:"*",borderWidth:"*"})),(0,a.IO)("@*",(0,a.pV)(),{optional:!0})])]),(0,a.eR)(":leave",[(0,a.ru)([(0,a.IO)("@*",(0,a.pV)(),{optional:!0}),(0,a.jt)("300ms ease-out",(0,a.oB)({height:0,borderWidth:0}))])]),(0,a.eR)("* <=> *",[(0,a.ru)([(0,a.oB)({height:"{{itsHeight}}px"}),(0,a.jt)("300ms ease-out",(0,a.oB)({height:"*"})),(0,a.IO)("@*",(0,a.pV)(),{optional:!0})])])]);class j{constructor(){this._files=null,this._cameraOpen=!1,this.itemsContainerAnimationState=!1,this.filesData=null,this.pictureAccepted=new t.vpe,this.imagesAccepted=new t.vpe,this.filesChange=new t.vpe,this.cameraOpenChange=new t.vpe}set files(e){this._files!==e&&(this._files=e,this.filesChange.emit(e))}get files(){return this._files}get cameraOpen(){return this._cameraOpen}set cameraOpen(e){this._cameraOpen!==e&&(this._cameraOpen=e,this.cameraOpenChange.emit(e))}static#t=this.\u0275fac=function(i){return new(i||j)};static#e=this.\u0275cmp=t.Xpm({type:j,selectors:[["app-new-photos"]],inputs:{files:"files",cameraOpen:"cameraOpen"},outputs:{pictureAccepted:"pictureAccepted",imagesAccepted:"imagesAccepted",filesChange:"filesChange",cameraOpenChange:"cameraOpenChange"},decls:14,vars:2,consts:[[1,"grid","grid-flow-col","auto-cols-fr","mx-auto","my-[16px]","gap-[8px]","w-full","max-w-[620px]"],["shutterSoundEffectUrl","assets/camera_picture_sound_effect.mp3",3,"accept"],["camera",""],["mat-raised-button","","color","primary",1,"w-full",3,"click"],["accept","image/*","readDataUrl","",3,"value","valueChange","fileDataUrls"],["filePicker",""],["class","flex flex-col items-center accent-border",4,"ngIf"],[1,"flex","flex-col","items-center","accent-border"],["itemsContainer",""],["mat-raised-button","","color","accent",1,"w-full","max-w-[340px]","mb-[32px]",3,"click"],[1,"w-full",3,"filesData","cancel"]],template:function(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",0)(1,"app-camera-picture-input",1,2),t.NdJ("accept",function(p){return n.pictureAccepted.emit(p)}),t.TgZ(3,"button",3),t.NdJ("click",function(){t.CHM(o);const p=t.MAs(2);return t.KtG(p.turnOnCamera())}),t.TgZ(4,"mat-icon"),t._uU(5,"add_a_photo"),t.qZA(),t._uU(6," Make Picture "),t.qZA()(),t.TgZ(7,"app-multi-file-picker-input",4,5),t.NdJ("valueChange",function(p){return n.files=p})("fileDataUrls",function(p){return n.filesData=p}),t.TgZ(9,"button",3),t.NdJ("click",function(){t.CHM(o);const p=t.MAs(8);return t.KtG(p.pickFiles())}),t.TgZ(10,"mat-icon"),t._uU(11,"image"),t.qZA(),t._uU(12," Add new picture "),t.qZA()()(),t.YNc(13,_e,7,7,"div",6)}2&i&&(t.xp6(7),t.Q6J("value",n.files),t.xp6(6),t.Q6J("ngIf",n.filesData))},dependencies:[f.O5,v.lW,w.Hw,F,P,G],styles:['[_nghost-%COMP%]{display:block}.new-photos__container[_ngcontent-%COMP%]{display:grid}.accent-border[_ngcontent-%COMP%]{padding:16px 8px;margin-bottom:16px;perspective:800px;border:2px solid #ff4081;border-radius:8px}.new-photos__items-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;border:2px solid #ff4081;justify-items:center;border-radius:8px;overflow:hidden;gap:8px;padding:16px 8px;margin-bottom:16px;perspective:800px}@media (min-width: 500px){.new-photos__items-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}}@media (min-width: 800px){.new-photos__items-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}}.new-photos__item[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;align-items:start;max-width:310px}.new-photos__item[_ngcontent-%COMP%]:before{content:"";display:block;padding-bottom:140%}app-new-photo[_ngcontent-%COMP%]{width:100%;max-width:280px}.new-photos__upload-btn[_ngcontent-%COMP%]{grid-column:1/-1;justify-self:center;width:100%;max-width:340px}.new-photos__upload-btn-container[_ngcontent-%COMP%]{grid-column:1/-1}.new-photos__upload-btn-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%}'],data:{animation:[ge]},changeDetection:0})}function ve(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"app-current-photos",4),t.NdJ("deleteImage",function(o){t.CHM(i);const r=t.oxw();return t.KtG(r.deleteImage(o))})("mainImageSelected",function(o){t.CHM(i);const r=t.oxw();return t.KtG(r.selectNewMainImage(o))}),t.ALo(1,"async"),t.ALo(2,"async"),t.qZA()}if(2&s){const i=t.oxw();t.Q6J("imagesUrls",t.lcZ(1,2,i.images$))("mainImageUrl",t.lcZ(2,4,i.mainImageUrl$))}}function be(s,e){1&s&&(t.TgZ(0,"div",5)(1,"p",6),t._uU(2,"LOADING"),t.qZA(),t._UZ(3,"app-loading-spinner",7),t.qZA())}function Ce(s,e){1&s&&(t.TgZ(0,"div",5)(1,"div",8)(2,"span"),t._uU(3,"Failed to dawnload photos. Please refresh the page or try again later"),t.qZA()()())}function we(s,e){1&s&&(t.TgZ(0,"div",5)(1,"div",9)(2,"span"),t._uU(3,"You don't have any photos right now. Please add some pictures to your account."),t.qZA()()())}class q extends M.I{constructor(e,i,n,o,r,p){super(),this._store=e,this._photoModalService=i,this.cameraOpen=!1,this.StateStatus=_.ue,this.animationState=null,this.files=null,(0,Y.y)(n.state.userData),this._currentUserId=n.state.userData.userId;const h=d=>{d!==_.XS.awaiting?p.detach():p.attach()};this.deleteImageSuccess$=o.deleting$.pipe((0,C.b)(h),(0,x.h)(d=>d===_.XS.resolved),(0,Z.B)()),this.imageUploaded$=o.uploadingOne$.pipe((0,C.b)(h),(0,x.h)(d=>d===_.XS.resolved),(0,Z.B)()),this.imagesUploaded$=o.uploadingMany$.pipe((0,C.b)(h),(0,x.h)(d=>d===_.XS.resolved),(0,Z.B)()),this.imagesStateStatus$=o.status$,this.patchingMainImageUrl$=r.updateAvatar$.pipe((0,x.h)(d=>d===_.XS.awaiting||d===_.XS.resolved),(0,C.b)(h),(0,b.U)(d=>d===_.XS.awaiting)),this.images$=this._store.pipe((0,O.Ys)(d=>d.image.URLs),(0,Pt.U)((0,pt.T)(this.imageUploaded$.pipe((0,C.b)(()=>this.cameraOpen=!1)),this.imagesUploaded$.pipe((0,C.b)(()=>this.files=null)),this.deleteImageSuccess$.pipe((0,C.b)(()=>this._photoModalService.closePhotoModal()),ft(400)),this.patchingMainImageUrl$.pipe((0,C.b)(()=>this._photoModalService.closePhotoModal()),ft(400)),o.status$.pipe((0,x.h)(d=>d===_.ue.complete),(0,Yt.P)()))),(0,Z.B)()),this.mainImageUrl$=this._store.pipe((0,O.Ys)(({auth:d})=>d.userData?.mainPhotoUrl))}deleteImage(e){this._store.dispatch((0,nt.ao)({index:e,info:""}))}selectNewMainImage(e){this._store.dispatch((0,S.Nq)({data:{userId:this._currentUserId,fieldName:Ft.o.mainPhotoUrl,newValue:e},info:"Updating user main image from app-photos component."}))}uploadPhotos(e){this._store.dispatch((0,nt.eg)({data:e,info:"Uploading images from app-photos component."}))}uplaodPhoto(e){this._store.dispatch((0,nt.Ix)({data:e,info:"Uploadfing image from app-photos component."}))}static#t=this.\u0275fac=function(i){return new(i||q)(t.Y36(O.yh),t.Y36(U),t.Y36(vt.Z8),t.Y36(Qt.S),t.Y36(tt.f),t.Y36(mt.j))};static#e=this.\u0275cmp=t.Xpm({type:q,selectors:[["app-photos"]],hostVars:1,hostBindings:function(i,n){2&i&&t.d8E("@hostElAnimationState",n.animationState)},features:[t.qOj],decls:7,vars:9,consts:[[3,"cameraOpen","files","pictureAccepted","imagesAccepted","cameraOpenChange","filesChange"],[3,"ngSwitch"],[3,"imagesUrls","mainImageUrl","deleteImage","mainImageSelected",4,"ngSwitchCase"],["class","w-full h-[65vh] bg-inherit flex flex-col items-center justify-center",4,"ngSwitchCase"],[3,"imagesUrls","mainImageUrl","deleteImage","mainImageSelected"],[1,"w-full","h-[65vh]","bg-inherit","flex","flex-col","items-center","justify-center"],[1,"photos__loading-text"],[1,"photos__loading-spinner-container","w-1/3","max-w-[200px]"],[1,"rounded-[8px]","p-[16px_8px]","mx-[16px]","text-center","border-[1px_solid_red]","mat-elevation-z6"],[1,"rounded-[8px]","bg-white","flex","p-[16px]","justify-center","items-center","text-center","mat-elevation-z6"]],template:function(i,n){1&i&&(t.TgZ(0,"app-new-photos",0),t.NdJ("pictureAccepted",function(r){return n.uplaodPhoto(r)})("imagesAccepted",function(r){return n.uploadPhotos(r)})("cameraOpenChange",function(r){return n.cameraOpen=r})("filesChange",function(r){return n.files=r}),t.qZA(),t.ynx(1,1),t.ALo(2,"async"),t.YNc(3,ve,3,6,"app-current-photos",2),t.YNc(4,be,4,0,"div",3),t.YNc(5,Ce,4,0,"div",3),t.YNc(6,we,4,0,"div",3),t.BQk()),2&i&&(t.Q6J("cameraOpen",n.cameraOpen)("files",n.files),t.xp6(1),t.Q6J("ngSwitch",t.lcZ(2,7,n.imagesStateStatus$)),t.xp6(2),t.Q6J("ngSwitchCase","complete"),t.xp6(1),t.Q6J("ngSwitchCase",n.StateStatus.pending),t.xp6(1),t.Q6J("ngSwitchCase",n.StateStatus.error),t.xp6(1),t.Q6J("ngSwitchCase",n.StateStatus.empty))},dependencies:[at.g,f.RF,f.n9,$,j,f.Ov],styles:["[_nghost-%COMP%]{display:block;grid-row:1/span 1;grid-column:1/span 1;width:100%;margin:0 auto;max-width:1200px}.photos__loading-text[_ngcontent-%COMP%]{font-weight:600;text-align:center;margin:16px;animation:_ngcontent-%COMP%_loading-text-animation .4s alternate infinite}@keyframes _ngcontent-%COMP%_loading-text-animation{0%{opacity:0}to{opacity:100%}}"],data:{animation:[(0,a.X$)("hostElAnimationState",[(0,a.eR)(":leave",[(0,a.ru)([(0,a.IO)("app-photo",(0,a.jt)("300ms ease-out",(0,a.oB)({transform:"scale(0)",opacity:0})),{optional:!0}),(0,a.IO)("app-new-photo",[(0,a.jt)("400ms ease-in-out",(0,a.oB)({transform:"rotateY(320deg) scale(0)"}))],{optional:!0}),(0,a.IO)(".new-photos__upload-btn",[(0,c.SEG)("300ms","0ms")],{optional:!0}),(0,a.IO)("app-camera-picture-input",[(0,c.qUF)("300ms","0ms")],{optional:!0}),(0,a.IO)("app-multi-file-picker-input",[(0,c.Gzh)("300ms","0ms")],{optional:!0})])]),(0,a.eR)(":enter",[(0,a.ru)([(0,a.IO)("app-camera-picture-input",[c.PYX.startState,(0,c.PYX)("400ms","400ms")],{optional:!0}),(0,a.IO)("app-multi-file-picker-input",[c.MeT.startState,(0,c.MeT)("400ms","400ms")],{optional:!0})])])])]},changeDetection:0})}var Q=l(727),yt=l(1135);class I{constructor(e){this._formBuilder=e}getControls(e,i){const n={firstName:this._formBuilder.control(e.firstName,[(0,m.mr)(u.kI.required,"First Name is required!"),(0,m.mr)(u.kI.minLength(3),"First Name must contain minimum 3 characters!"),(0,m.aq)("First name must contain alphabetic charactrs!")]),lastName:this._formBuilder.control(e.lastName,[(0,m.mr)(u.kI.required,"Last Name is required!"),(0,m.mr)(u.kI.minLength(3),"Last Name must contain minimum 3 characters!"),(0,m.aq)("Last name must contain alphabetic charactrs!")]),nickName:this._formBuilder.control(e.nickName,[(0,m.mr)(u.kI.required,"Your nick name is required!"),(0,m.mr)(u.kI.minLength(3),"Your nick name is to short. Minimum count of characters is 3!"),(0,m.aq)("Your nick name must contain alphabetic charactrs!")]),email:this._formBuilder.control(e.email,[(0,m.mr)(u.kI.required,"E-mail address is required!"),(0,m.mr)(u.kI.email,"Incorect format of address e-mail!")]),dateOfBirth:this._formBuilder.control(e.dateOfBirth,[(0,m.mr)(u.kI.required,"Your date of birth is required!"),(0,m.zD)("yyyy-MM-dd","Invalid format of data!"),(0,m.KU)(18,"yyyy-MM-dd","You must be at least 18 years old to hava an accout on this webside!")]),aboutMySelf:this._formBuilder.control(e.aboutMySelf??""),city:this._formBuilder.control(e.city??"",[(0,m.mr)(u.kI.required,"City is required!"),(0,m.aq)("City must contain alphabetick characters!",!0)]),street:this._formBuilder.control(e.street??"",[(0,m.mr)(u.kI.required,"Street is required!"),(0,m.u$)("Street can contain only alphanumeric or numeric characters, incuding white spaces. No dots allowed!",!0)]),state:this._formBuilder.control(e.state??"",[(0,m.mr)(u.kI.required,"State is required!"),(0,m.aq)("State must contain alphabetick characters!",!0)]),country:this._formBuilder.control(e.country??"")},o=new Q.w0;return o.add((0,m.y1)(n.firstName)),o.add((0,m.y1)(n.lastName)),o.add((0,m.y1)(n.nickName)),o.add((0,m.j1)(n.email)),o.add((0,m.j1)(n.city,i)),o.add((0,m.j1)(n.street,i)),o.add((0,m.j1)(n.state,i)),o.add((0,m.j1)(n.country,i)),{controls:n,dispose:()=>o.unsubscribe()}}getBasicFiledNames(){return["firstName","lastName","nickName","email","dateOfBirth","aboutMySelf"]}getBasicLabels(){return["First name","Last name","Nick name","Address e-mail","Date of birth","About my self"]}getAddressInfoFiledNames(){return["city","street","state","country"]}getAddressInfoLabels(){return["City","Street","State","Country"]}update(e,i){e.firstName.value!==i.firstName&&e.firstName.setValue(i.firstName),e.lastName.value!==i.lastName&&e.firstName.setValue(i.lastName),e.nickName.value!==i.nickName&&e.nickName.setValue(i.nickName),e.email.value!==i.email&&e.email.setValue(i.email),e.dateOfBirth.value!==i.dateOfBirth&&e.dateOfBirth.setValue(i.dateOfBirth),e.aboutMySelf.value!==i.aboutMySelf&&e.aboutMySelf.setValue(i.aboutMySelf??""),e.city.value!==i.city&&e.city.setValue(i.city??""),e.street.value!==i.street&&e.street.setValue(i.street??""),e.state.value!==i.state&&e.state.setValue(i.state??""),e.country.value!==i.country&&e.country.setValue(i.country??"")}static#t=this.\u0275fac=function(i){return new(i||I)(t.LFG(u.j3))};static#e=this.\u0275prov=t.Yz7({token:I,factory:I.\u0275fac})}var ye=l(1822),xe=l(6709);class T{constructor(e){this._formBuilder=e}getFormGroup(e){const i=this._formBuilder.group({city:this._formBuilder.control("",[(0,m.mr)(u.kI.required,"City is required!"),(0,m.aq)("City must contain alphabetick characters!",!0)]),street:this._formBuilder.control("",[(0,m.mr)(u.kI.required,"Street is required!"),(0,m.u$)("Street can contain only alphanumeric or numeric characters, incuding white spaces. No dots allowed!",!0)]),state:this._formBuilder.control("",[(0,m.mr)(u.kI.required,"State is required!"),(0,m.aq)("State must contain alphabetick characters!",!0)]),country:this._formBuilder.control("",[(0,m.mr)(u.kI.required,"Conutry is required!"),(0,m.aq)("Country must contain alphabetick characters!",!0)])}),n=new Q.w0;return n.add((0,m.j1)(i.controls.city,e)),n.add((0,m.j1)(i.controls.street,e)),n.add((0,m.j1)(i.controls.state,e)),n.add((0,m.j1)(i.controls.country,e)),{formGroup:i,dispose:()=>n.unsubscribe()}}static#t=this.\u0275fac=function(i){return new(i||T)(t.LFG(u.j3))};static#e=this.\u0275prov=t.Yz7({token:T,factory:T.\u0275fac})}function Ue(s,e){if(1&s&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&s){const i=e.$implicit;t.xp6(1),t.Oqu(i.message)}}function Ae(s,e){if(1&s&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&s){const i=e.$implicit;t.xp6(1),t.Oqu(i.message)}}function Oe(s,e){if(1&s&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&s){const i=e.$implicit;t.xp6(1),t.Oqu(i.message)}}function Ie(s,e){if(1&s&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&s){const i=e.$implicit;t.xp6(1),t.Oqu(i.message)}}const Te=(0,a.X$)("form",[(0,a.eR)(":enter",[(0,a.ru)([(0,a.IO)("@*",[(0,a.pV)()]),(0,a.IO)("mat-form-field:nth-of-type(odd)",[c.MeT.startState,(0,a.EY)(150,(0,c.MeT)("300ms","0ms"))],{optional:!0}),(0,a.IO)("mat-form-field:nth-of-type(even)",[c.PYX.startState,(0,a.EY)(150,(0,c.PYX)("300ms","150ms"))],{optional:!0})])]),(0,a.eR)(":leave",[(0,a.ru)([(0,a.IO)("@*",[(0,a.pV)()]),(0,a.IO)("mat-form-field:nth-of-type(odd)",[c.Gzh.startState,(0,a.EY)(150,(0,c.Gzh)("300ms","0ms"))],{optional:!0}),(0,a.IO)("mat-form-field:nth-of-type(even)",[c.qUF.startState,(0,a.EY)(150,(0,c.qUF)("300ms","150ms"))],{optional:!0})])])]),De=(0,a.X$)("btnGroup",[(0,a.eR)(":enter",(0,c.AT5)("800ms","150ms")),(0,a.eR)(":leave",(0,c.dGT)("800ms","150ms"))]);class L{constructor(e){this._subscrition=new Q.w0,this.addressFormSubmited=new t.vpe;const i=new g.x,{formGroup:n,dispose:o}=e.getFormGroup(i);this.formGroup=n,this._subscrition.add(o),this.formSubmitter=new m.dT(this.formGroup),this.formSubmitter.submitSuccess.subscribe(()=>{i.next(),this.addressFormSubmited.emit(this.formGroup.getRawValue())})}ngOnDestroy(){this._subscrition.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||L)(t.Y36(T))};static#e=this.\u0275cmp=t.Xpm({type:L,selectors:[["app-address-info-form"]],outputs:{addressFormSubmited:"addressFormSubmited"},decls:27,vars:10,consts:[[1,"grid","justify-self-center","w-full",3,"formGroup","ngSubmit"],["appearance","fill","color","accent"],["type","text","matInput","","formControlName","city","name","city"],[4,"appFirstKeyOf"],["type","text","matInput","","formControlName","street","name","street"],["type","text","matInput","","formControlName","state","name","state"],["type","text","matInput","","formControlName","country","name","country"],[1,"grid","grid-flow-col","mb-[16px]","gap-[8px]"],["mat-raised-button","","color","primary","type","submit",1,"padding-4",3,"disabled"],["mat-raised-button","","color","warn","type","button",1,"padding-4"]],template:function(i,n){1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.formSubmitter.trySubmit()}),t.TgZ(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"City"),t.qZA(),t._UZ(4,"input",2),t.YNc(5,Ue,2,1,"mat-error",3),t.qZA(),t.TgZ(6,"mat-form-field",1)(7,"mat-label"),t._uU(8,"Street"),t.qZA(),t._UZ(9,"input",4),t.YNc(10,Ae,2,1,"mat-error",3),t.qZA(),t.TgZ(11,"mat-form-field",1)(12,"mat-label"),t._uU(13,"State"),t.qZA(),t._UZ(14,"input",5),t.YNc(15,Oe,2,1,"mat-error",3),t.qZA(),t.TgZ(16,"mat-form-field",1)(17,"mat-label"),t._uU(18,"Country"),t.qZA(),t._UZ(19,"input",6),t.YNc(20,Ie,2,1,"mat-error",3),t.qZA(),t.TgZ(21,"div",7)(22,"button",8),t.ALo(23,"async"),t._uU(24,"Save"),t.qZA(),t.TgZ(25,"button",9),t._uU(26,"Cancel"),t.qZA()()()),2&i&&(t.Q6J("formGroup",n.formGroup)("@form",void 0),t.xp6(5),t.Q6J("appFirstKeyOf",n.formGroup.controls.city.errors),t.xp6(5),t.Q6J("appFirstKeyOf",n.formGroup.controls.street.errors),t.xp6(5),t.Q6J("appFirstKeyOf",n.formGroup.controls.state.errors),t.xp6(5),t.Q6J("appFirstKeyOf",n.formGroup.controls.country.errors),t.xp6(1),t.Q6J("@btnGroup",void 0),t.xp6(1),t.Q6J("disabled",t.lcZ(23,8,n.formSubmitter.submitDisabled$)))},dependencies:[et.E,v.lW,y.KE,y.hX,y.TO,it.Nt,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,f.Ov],data:{animation:[Te,De]},changeDetection:0})}var Ze=l(1604),Se=l(9349);class H{constructor(e,i){this.hostRef=e,this.platformId=i}set focus(e){!(0,f.NF)(this.platformId)||!e||this.hostRef.nativeElement.focus()}static#t=this.\u0275fac=function(i){return new(i||H)(t.Y36(t.SBq),t.Y36(t.Lbi))};static#e=this.\u0275dir=t.lG2({type:H,selectors:[["","appFocus",""]],inputs:{focus:["appFocus","focus"]}})}const Fe=["name","","isDate","","multiline","","label","","control",""];function Pe(s,e){1&s&&t._UZ(0,"div",16)}function Ne(s,e){1&s&&t._UZ(0,"div",17)}function Me(s,e){1&s&&(t.TgZ(0,"div",18)(1,"div",19)(2,"mat-icon",20),t._uU(3,"refresh"),t.qZA(),t._uU(4," Checking availability "),t.qZA()())}function ke(s,e){if(1&s&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&s){const i=e.$implicit;t.xp6(1),t.Oqu(i)}}function Re(s,e){if(1&s&&(t.TgZ(0,"mat-form-field",21),t._UZ(1,"input",22),t.YNc(2,ke,2,1,"mat-error",23),t.qZA()),2&s){const i=t.oxw();t.xp6(1),t.Q6J("name",i.name)("formControlName",i.name)("appFocus",i.focus),t.xp6(1),t.Q6J("appFirstKeyOf",i.form.controls[i.name].errors)}}function Ee(s,e){if(1&s&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&s){const i=e.$implicit;t.xp6(1),t.Oqu(i)}}function Ye(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"mat-form-field",21)(1,"input",24),t.NdJ("dateSelected",function(o){t.CHM(i);const r=t.oxw();return t.KtG(r.form.controls[r.name].setValue(o))}),t.qZA(),t.YNc(2,Ee,2,1,"mat-error",23),t.qZA()}if(2&s){const i=t.oxw();t.xp6(1),t.Q6J("name",i.name)("formControlName",i.name)("appFocus",i.focus),t.xp6(1),t.Q6J("appFirstKeyOf",i.form.controls[i.name].errors)}}function Be(s,e){if(1&s&&(t.TgZ(0,"mat-form-field",21),t._UZ(1,"textarea",25),t.qZA()),2&s){const i=t.oxw();t.xp6(1),t.Q6J("name",i.name)("formControlName",i.name)("appFocus",i.focus)("cdkAutosizeMinRows",10)}}function Je(s,e){1&s&&t._UZ(0,"div",26)}const $e=function(s,e){return{onEditOffHeight:s,onEditOnHeight:e}},Ge=function(s,e){return{value:s,params:e}},je=(0,a.X$)("calendarContainer",[(0,a.eR)(":enter",[(0,a.ru)([(0,a.IO)(".calendar-backdrop",[(0,a.oB)({opacity:0}),(0,a.jt)("300ms ease-out",(0,a.oB)({opacity:1}))]),(0,a.IO)(".calendar-card",[(0,a.oB)({opacity:0,transform:"scale(0.9)"}),(0,a.jt)("300ms ease-out",(0,a.oB)({opacity:1,transform:"scale(1)"}))])])]),(0,a.eR)(":leave",[(0,a.ru)([(0,a.IO)(".calendar-backdrop",[(0,a.oB)({opacity:1}),(0,a.jt)("300ms ease-out",(0,a.oB)({opacity:0}))]),(0,a.IO)(".calendar-card",[(0,a.oB)({opacity:1,transform:"scale(1)"}),(0,a.jt)("300ms ease-out",(0,a.oB)({opacity:0,transform:"scale(0.9)"}))])])])]),qe=(0,a.X$)("userDetail",[(0,a.eR)("false => true",[(0,a.ru)([(0,a.IO)("@*",(0,a.pV)()),(0,a.oB)({height:"{{onEditOffHeight}}px"}),(0,a.jt)("300ms ease-out",(0,a.oB)({height:"{{onEditOnHeight}}px"}))])]),(0,a.eR)("true => false",[(0,a.ru)([(0,a.oB)({height:"{{onEditOnHeight}}px"}),(0,a.jt)("300ms ease-out",(0,a.oB)({height:"{{onEditOffHeight}}px"})),(0,a.IO)("@*",(0,a.pV)())])])]),Qe=(0,a.X$)("label",[(0,a.SB)("false",(0,a.oB)({opacity:1,visibility:"visible"})),(0,a.SB)("true",(0,a.oB)({opacity:0,visibility:"hidden"})),(0,a.eR)("false <=> true",(0,a.jt)("300ms ease-out"))]),Le=(0,a.X$)("editForm",[(0,a.SB)("false",(0,a.oB)({opacity:0,visibility:"hidden"})),(0,a.SB)("true",(0,a.oB)({opacity:1,visibility:"visible"})),(0,a.eR)("false <=> true",(0,a.jt)("300ms ease-out"))]);class D{constructor(e,i){this._destroy$=new g.x,this.edit=!1,this.focus=!1,this.calendarOpened=!1,this.avatarPending=!1,this._pending=!1,this.name=null,this.label=null,this.multiline=null,this.isDate=null,this.control=null,this.detailSubmit=new t.vpe,this.detailCancel=new t.vpe,this.form=e.group({}),D._onEdit.pipe((0,R.R)(this._destroy$)).subscribe(n=>{this.name!=n&&this.edit&&(this.edit=!1,i.markForCheck())}),this.formSubmitter=new m.dT(this.form),this.formSubmitter.submitSuccess.subscribe(()=>{this.detailSubmit.emit(this.name)})}static#t=this._onEdit=new g.x;get pending(){return this._pending}set pending(e){this._pending=e,!e&&this.edit&&(this.edit=!1)}ngOnChanges(e){e.control&&(this.control&&this.form.removeControl(this.name),this.form.addControl(this.name,this.control))}ngOnDestroy(){this.formSubmitter.dispose(),this._destroy$.next(),this._destroy$.complete()}onAnimationDone(){this.focus=this.edit}onEditButtonClick(){D._onEdit.next(this.name),this.edit=!0}onCancel(){this.edit=!1,this.detailCancel.emit(this.name),this.control?.markAsUntouched(),this.control?.markAsPristine()}static#e=this.\u0275fac=function(i){return new(i||D)(t.Y36(u.j3),t.Y36(t.sBO))};static#i=this.\u0275cmp=t.Xpm({type:D,selectors:[["app-user-detail","name","","isDate","","multiline","","label","","control",""]],inputs:{pending:"pending",name:"name",label:"label",multiline:"multiline",isDate:"isDate",control:"control"},outputs:{detailSubmit:"detailSubmit",detailCancel:"detailCancel"},features:[t.TTD],attrs:Fe,decls:28,vars:33,consts:[[1,"user-detalis__container","relative","overflow-hidden","mat-elevation-z4"],["container",""],[1,"absolute","grid","w-[90%]","mx-auto","grid-cols-[1fr_auto]","grid-rows-[auto_1fr]","grid-flow-col","top-[16px]","left-[5%]"],["detailLabel",""],[1,"self-center","text-[16px]","row-[1/2]"],["mat-raised-button","","color","primary",1,"min-w-[0_!important]","p-[0_!importat]","w-[50px_!important]","row-[1/2]",3,"click"],["class","absolute bg-[rgba(0,0,0,.15)] z-10 w-full h-full",4,"ngIf"],["class","state-pending-indicator absolute w-[50%] h-full z-10",4,"ngIf"],["class","control-pending-presenter absolute w-full h-full text-green-300 bg-[rgba(0,0,0,0.15)] z-10 ",4,"ngIf"],[1,"grid","absolute","w-[90%]","m-[0_auto_8px_auto]","top-[16px]","left-[5%]",3,"formGroup","ngSubmit"],["editForm",""],["appearance","outline",4,"ngIf"],[1,"grid","grid-flow-col","justify-end","gap-[8px]"],["mat-raised-button","","color","primary","type","submit",1,"min-w-[0_!important]","p-[0_!importat]","w-[50px_!important]",3,"disabled"],["mat-raised-button","","type","button","color","warn","type","button",1,"min-w-[0_!important]","p-[0_!importat]","w-[50px_!important]",3,"disabled","click"],["class","mask absolute bottom-0 left-0 w-full h-[40%]",4,"ngIf"],[1,"absolute","bg-[rgba(0,0,0,.15)]","z-10","w-full","h-full"],[1,"state-pending-indicator","absolute","w-[50%]","h-full","z-10"],[1,"control-pending-presenter","absolute","w-full","h-full","text-green-300","bg-[rgba(0,0,0,0.15)]","z-10"],[1,"row-center"],[1,"control-pending-indicator"],["appearance","outline"],["type","text","matInput","",3,"name","formControlName","appFocus"],[4,"appFirstKeyOf"],["type","text","matInput","","datepicker","yyyy-MM-dd","readonly","",3,"name","formControlName","appFocus","dateSelected"],["matInput","","cdkTextareaAutosize","",3,"name","formControlName","appFocus","cdkAutosizeMinRows"],[1,"mask","absolute","bottom-0","left-0","w-full","h-[40%]"]],template:function(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",0,1),t.NdJ("@userDetail.done",function(){t.CHM(o);const p=t.MAs(1),h=t.MAs(15),d=t.MAs(3);return t.KtG(p.style.height=n.edit?h.clientHeight+32+"px":d.clientHeight+32+"px")}),t.TgZ(2,"div",2,3)(4,"span",4),t._uU(5),t.TgZ(6,"span"),t._uU(7),t.qZA()(),t.TgZ(8,"button",5),t.NdJ("click",function(){return n.onEditButtonClick()}),t.TgZ(9,"mat-icon"),t._uU(10,"upgrade"),t.qZA()()(),t.YNc(11,Pe,1,0,"div",6),t.YNc(12,Ne,1,0,"div",7),t.YNc(13,Me,5,0,"div",8),t.TgZ(14,"form",9,10),t.NdJ("@editForm.done",function(){return n.onAnimationDone()})("ngSubmit",function(){return n.formSubmitter.trySubmit()}),t.YNc(16,Re,3,4,"mat-form-field",11),t.YNc(17,Ye,3,4,"mat-form-field",11),t.YNc(18,Be,2,4,"mat-form-field",11),t.TgZ(19,"div",12)(20,"button",13),t.ALo(21,"async"),t.TgZ(22,"mat-icon"),t._uU(23,"upgrade"),t.qZA()(),t.TgZ(24,"button",14),t.NdJ("click",function(){return n.onCancel()}),t.TgZ(25,"mat-icon"),t._uU(26,"cancel"),t.qZA()()()(),t.YNc(27,Je,1,0,"div",15),t.qZA()}if(2&i){const o=t.MAs(3),r=t.MAs(15);t.Udp("max-height","aboutMySelf"===n.name?"268px":""),t.ekj("border-2",n.form.controls[n.name].pending&&n.edit)("border-green-300",n.form.controls[n.name].pending&&n.edit),t.Q6J("@userDetail",t.WLB(30,Ge,n.edit,t.WLB(27,$e,o.clientHeight+32,r.clientHeight+32))),t.xp6(2),t.Udp("visibility",n.edit?"hidden":""),t.Q6J("@label",n.edit),t.xp6(3),t.hij("",n.label,": "),t.xp6(2),t.Oqu(n.control.value),t.xp6(4),t.Q6J("ngIf",n.pending),t.xp6(1),t.Q6J("ngIf",n.pending),t.xp6(1),t.Q6J("ngIf",n.form.controls[n.name].pending&&n.edit),t.xp6(1),t.Udp("visibility",n.edit?"":"hidden"),t.Q6J("formGroup",n.form)("@editForm",n.edit),t.xp6(2),t.Q6J("ngIf",!n.multiline&&!n.isDate),t.xp6(1),t.Q6J("ngIf",n.isDate),t.xp6(1),t.Q6J("ngIf",n.multiline&&!n.isDate),t.xp6(2),t.Q6J("disabled",t.lcZ(21,25,n.formSubmitter.submitDisabled$)||n.pending),t.xp6(4),t.Q6J("disabled",n.pending),t.xp6(3),t.Q6J("ngIf","aboutMySelf"===n.name)}},dependencies:[et.E,Ze.a,f.O5,v.lW,w.Hw,y.KE,y.TO,it.Nt,Se.IC,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,H,f.Ov],styles:["[_nghost-%COMP%]{display:block;overflow:hidden}.state-pending-indicator[_ngcontent-%COMP%]{background-image:linear-gradient(to right,transparent,#6200ea,transparent);animation:_ngcontent-%COMP%_pending-indicator-animation 1s alternate infinite}.user-detalis__container[_ngcontent-%COMP%]{background-color:#ffa6c4}mat-icon[_ngcontent-%COMP%]{margin:0!important}.control-pending-presenter[_ngcontent-%COMP%]{text-shadow:2px 2px rgba(0,0,0,.15)}.control-pending-indicator[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_access-availability-animation 1s linear infinite}.mask[_ngcontent-%COMP%]{background-image:linear-gradient(to bottom,transparent,#ffa6c4 80%)}@keyframes _ngcontent-%COMP%_access-availability-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pending-indicator-animation{0%{left:-50%}to{left:100%}}"],data:{animation:[je,qe,Qe,Le]},changeDetection:0})}const He=["fieldNames","","controls","","labels","","pendingFieldName",""];function Xe(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"app-user-detail",1),t.NdJ("detailSubmit",function(){const r=t.CHM(i).$implicit,p=t.oxw();return t.KtG(p.detailSubmit.emit(r))})("detailCancel",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.detailCancel.emit())}),t.qZA()}if(2&s){const i=e.$implicit,n=e.index,o=t.oxw();t.Q6J("name",i)("label",o.labels[n])("control",o.controls[i])("multiline","aboutMySelf"===i)("isDate","dateOfBirth"===i)("pending",o.pendingFieldName===i)}}class X{constructor(){this.pendingFieldName=null,this.detailSubmit=new t.vpe,this.detailCancel=new t.vpe}static#t=this.\u0275fac=function(i){return new(i||X)};static#e=this.\u0275cmp=t.Xpm({type:X,selectors:[["app-auth-user-field-list","fieldNames","","controls","","labels","","pendingFieldName",""]],inputs:{fieldNames:"fieldNames",controls:"controls",labels:"labels",pendingFieldName:"pendingFieldName"},outputs:{detailSubmit:"detailSubmit",detailCancel:"detailCancel"},attrs:He,decls:1,vars:1,consts:[["class","justify-self-center my-[16px] w-full max-w-[430px] mat-elevation-z3",3,"name","label","control","multiline","isDate","pending","detailSubmit","detailCancel",4,"ngFor","ngForOf"],[1,"justify-self-center","my-[16px]","w-full","max-w-[430px]","mat-elevation-z3",3,"name","label","control","multiline","isDate","pending","detailSubmit","detailCancel"]],template:function(i,n){1&i&&t.YNc(0,Xe,1,6,"app-user-detail",0),2&i&&t.Q6J("ngForOf",n.fieldNames)},dependencies:[f.sg,D],styles:["[_nghost-%COMP%]{display:grid}app-auth-user-field-list[_nghost-%COMP%]{display:grid}"],changeDetection:0})}const Ve=["fileInput"],ze=["*"];class N{constructor(e,i){this.changeDetectorRef=e,this.renderer=i,this._readDataUrl=!1,this._fileDataUrl=null,this._loading=!1,this._value=null,this._fileInput=null,this.fileDataUrl=new t.vpe,this.fileDeleted=new t.vpe,this.loadFileDataUrlFailed=new t.vpe,this.valueChange=new t.vpe}set readDataUrl(e){this._fileDataUrl!==e&&(this._readDataUrl=(0,ot.ll)(e),!e&&this._fileDataUrl&&(this._fileDataUrl=null,this.fileDataUrl.observed&&Promise.resolve().then(()=>{this.fileDataUrl.emit(null),this.changeDetectorRef.markForCheck()})))}get readDataUrl(){return this._readDataUrl}set value(e){this._value!==e&&(e?this._setValue(this.value):e||!this.fileDataUrl.observed&&!this.fileDeleted.observed?this._setValue(null):Promise.resolve().then(()=>{this._setValue(null),this.changeDetectorRef.markForCheck()}))}get value(){return this._value}get loading(){return this._loading}ngAfterViewInit(){this.renderer.listen(this._fileInput.nativeElement,"input",()=>{const e=this._fileInput.nativeElement.files;null!=e&&e.length>0&&(this._setValue(e.item(0)),this._fileInput.nativeElement.value="")})}writeValue(e){this._setValue(e,!1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}removeFile(){this._setValue(null)}pickFile(){if(!this._fileInput)throw new Error("<app-file-picker-input>: Attempting to pick up file before view initialized! ");this._fileInput.nativeElement.click(),this._onTouched&&this._onTouched()}_setValue(e,i=!0){if(this._value===e)return;let n=!1;this._value=e,this._value?this._readDataUrl&&this._readFileAsDataUrl(this._value):(n=this._readDataUrl&&null!=this._fileDataUrl,this._fileDataUrl=null),this.valueChange.emit(this._value),i&&this._onChange&&this._onChange(this._value),n&&this.fileDataUrl.emit(this._fileDataUrl),null===this._value&&this.fileDeleted.emit(),this.changeDetectorRef.markForCheck()}_readFileAsDataUrl(e){const i=new FileReader;this._loading=!0,i.onload=n=>{this._loading=!1;const o=n.target&&n.target.result;this._fileDataUrl=o instanceof ArrayBuffer?btoa(new Uint8Array(o).reduce((r,p)=>r+String.fromCharCode(p),"")):o,this.fileDataUrl.emit(this._fileDataUrl),this.changeDetectorRef.markForCheck()},i.onabort=()=>{this._loading=!1,this.changeDetectorRef.markForCheck()},i.onerror=()=>{this._loading=!1,this.loadFileDataUrlFailed.emit(),this.changeDetectorRef.markForCheck()},i.readAsDataURL(e)}static#t=this.\u0275fac=function(i){return new(i||N)(t.Y36(t.sBO),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:N,selectors:[["app-file-picker-input"]],viewQuery:function(i,n){if(1&i&&t.Gf(Ve,5),2&i){let o;t.iGM(o=t.CRH())&&(n._fileInput=o.first)}},inputs:{name:"name",accept:"accept",readDataUrl:"readDataUrl",value:"value"},outputs:{fileDataUrl:"fileDataUrl",fileDeleted:"fileDeleted",loadFileDataUrlFailed:"loadFileDataUrlFailed",valueChange:"valueChange"},features:[t._Bn([{provide:u.JU,useExisting:(0,t.Gpc)(()=>N),multi:!0}])],ngContentSelectors:ze,decls:3,vars:2,consts:[["type","file",2,"display","none",3,"name","accept"],["fileInput",""]],template:function(i,n){1&i&&(t.F$t(),t._UZ(0,"input",0,1),t.Hsn(2)),2&i&&t.Q6J("name",n.name)("accept",n.accept)},changeDetection:0})}var Ke=l(3917);function We(s,e){1&s&&(t.TgZ(0,"div",10),t._UZ(1,"app-loading-spinner",11),t.qZA())}function ti(s,e){1&s&&(t.TgZ(0,"div",12)(1,"span",13)(2,"mat-icon"),t._uU(3,"warning"),t.qZA(),t._uU(4," Failed to upload image!"),t.qZA()())}class V{constructor(){this._file=null,this.fileData=null,this.fileData$=new g.x,this.imageUrl=null,this.avatarPending=null,this.uploadAvatarFailed=null,this.fileChange=new t.vpe,this.avatarSubmit=new t.vpe}get file(){return this._file}set file(e){this._file!==e&&(this._file=e,this.fileChange.emit(e))}static#t=this.\u0275fac=function(i){return new(i||V)};static#e=this.\u0275cmp=t.Xpm({type:V,selectors:[["app-avatar-field"]],inputs:{file:"file",imageUrl:"imageUrl",avatarPending:"avatarPending",uploadAvatarFailed:"uploadAvatarFailed"},outputs:{fileChange:"fileChange",avatarSubmit:"avatarSubmit"},decls:14,vars:11,consts:[[1,"overflow-hidden","relative","rounded-[12px]","shadow-[3px_3px_6px_2px_rgba(0,_0,_0,_1)]","before:content-['']","before:block","before:float-left","before:pb-[100%]"],["alt","avatar_picture",1,"absolute","w-full","h-full","top-0","left-0","object-cover",3,"src"],["ngFrom","",3,"ngSubmit"],["name","avatar","readDataUrl","","accept","image/jpg, image/png, image/gif, image/bmp, image/jpeg",1,"grid","grid-flow-col","gap-[8px]","mt-[16px]",3,"value","valueChange","fileDataUrl"],["filePicker",""],["mat-raised-button","","color","accent","type","button",1,"avatar-btn",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"avatar-btn"],["mat-raised-button","","color","accent","type","button",1,"avatar-btn",3,"disabled","click"],["class","flex absolute items-center justify-center w-full h-full top-0 left-0 bg-[rgba(0,0,0,.32)]",4,"ngIf"],["class","flex absolute items-center justify-center w-full h-full top-0 left-0 color-warn bg-[rgba(0,0,0,.32)]",4,"ngIf"],[1,"flex","absolute","items-center","justify-center","w-full","h-full","top-0","left-0","bg-[rgba(0,0,0,.32)]"],[1,"w-[100px]","h-[100px]"],[1,"flex","absolute","items-center","justify-center","w-full","h-full","top-0","left-0","color-warn","bg-[rgba(0,0,0,.32)]"],[1,"text-[20px]","font-semibold"]],template:function(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",0),t._UZ(1,"img",1),t.ALo(2,"mainImageUrl"),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){t.CHM(o);const p=t.MAs(5);return t.KtG(p.value&&n.avatarSubmit.emit(p.value))}),t.TgZ(4,"app-file-picker-input",3,4),t.NdJ("valueChange",function(p){return n.file=p})("fileDataUrl",function(p){return n.fileData=p}),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(o);const p=t.MAs(5);return t.KtG(p.pickFile())}),t._uU(7,"Add picture"),t.qZA(),t.TgZ(8,"button",6),t._uU(9,"Save"),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){t.CHM(o);const p=t.MAs(5);return t.KtG(p.removeFile())}),t._uU(11,"Remove"),t.qZA()()(),t.YNc(12,We,2,0,"div",8),t.YNc(13,ti,5,0,"div",9)}if(2&i){const o=t.MAs(5);let r;t.xp6(1),t.Q6J("src",t.lcZ(2,9,null!==(r=n.fileData)&&void 0!==r?r:n.imageUrl),t.LSH),t.xp6(3),t.Q6J("value",n.file),t.xp6(2),t.Udp("display",n.fileData?"none":""),t.xp6(2),t.Udp("display",n.fileData?"":"none"),t.xp6(2),t.Q6J("disabled",!n.fileData),t.xp6(2),t.Q6J("ngIf",n.avatarPending||o.loading),t.xp6(1),t.Q6J("ngIf",n.uploadAvatarFailed)}},dependencies:[at.g,f.O5,v.lW,w.Hw,u._Y,u.JL,u.F,N,Ke.C],styles:["[_nghost-%COMP%]{position:relative;padding:16px;box-shadow:3px 3px 6px 2px #000;border-radius:16px;overflow:hidden;background-image:linear-gradient(to bottom right,#9a51ff,#370084)}app-avatar-field[_nghost-%COMP%]{position:relative;padding:16px;box-shadow:3px 3px 6px 2px #000;border-radius:16px;overflow:hidden}button[mat-raised-button].avatar-btn[_ngcontent-%COMP%]{box-shadow:3px 3px 6px 2px #000!important}"],changeDetection:0})}var ei=l(7819),ii=l(2419),ni=l(1237),ai=l(5470);function oi(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"app-address-info-form",7),t.NdJ("addressFormSubmited",function(o){t.CHM(i);const r=t.oxw(2);return t.KtG(r.onAddressFormSubmited(o))}),t.qZA()}}function si(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"div",4)(1,"mat-checkbox",5),t.NdJ("change",function(o){t.CHM(i);const r=t.oxw();return t.KtG(r.addAddressInfomation$.next(o.checked))}),t.ALo(2,"toString"),t.ALo(3,"async"),t._uU(4,"Add address information"),t.qZA()(),t.YNc(5,oi,1,0,"app-address-info-form",6),t.ALo(6,"async")}if(2&s){const i=t.oxw();t.xp6(1),t.Q6J("@checkbox",void 0)("value",t.lcZ(2,3,t.lcZ(3,5,i.addAddressInfomation$))),t.xp6(4),t.Q6J("ngIf",t.lcZ(6,7,i.addAddressInfomation$))}}const st=function(){return{800:"enter_to_big_view"}};function ri(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"app-auth-user-field-list",8),t.NdJ("detailSubmit",function(o){t.CHM(i);const r=t.oxw();return t.KtG(r.onDetailSubmit(o))})("detailCancel",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onDetailCancel())}),t.ALo(1,"async"),t.ALo(2,"media"),t.qZA()}if(2&s){const i=t.oxw();t.Q6J("fieldNames",i.addressFieldNames)("labels",i.labels)("controls",i.controls)("pendingFieldName",t.lcZ(1,5,i.pendingFieldName$))("@authAddressInfo",t.xi3(2,7,"enter_to_small_view",t.DdM(10,st)))}}const li=(0,a.X$)("authUser",[(0,a.eR)("void => enter_to_small_view",[(0,a.ru)([(0,a.IO)("@*",[(0,a.pV)()]),(0,a.IO)("app-user-detail:nth-of-type(even)",[c.PYX.startState,(0,a.EY)(300,[(0,c.PYX)("300ms","300ms")])],{optional:!0}),(0,a.IO)("app-user-detail:nth-of-type(odd)",[c.MeT.startState,(0,a.EY)(300,[(0,c.MeT)("300ms","150ms")])],{optional:!0})])]),(0,a.eR)("enter_to_small_view => void",[(0,a.ru)([(0,a.IO)("@*",[(0,a.pV)()]),(0,a.IO)("app-user-detail:nth-of-type(even)",[(0,a.EY)(300,[(0,c.Gzh)("300ms","300ms")])],{optional:!0}),(0,a.IO)("app-user-detail:nth-of-type(odd)",[(0,a.EY)(300,[(0,c.qUF)("300ms","150ms")])],{optional:!0})])]),(0,a.eR)("void => enter_to_big_view",[(0,a.IO)("app-user-detail",[c.MeT.startState,(0,a.EY)(150,[(0,c.MeT)("300ms","600ms")])])]),(0,a.eR)("enter_to_big_view => void",[(0,a.IO)("app-user-detail",[(0,c.Gzh)("600ms","0ms")])])]),ci=(0,a.X$)("authAddressInfo",[(0,a.eR)("void => enter_to_small_view",[(0,a.ru)([(0,a.IO)("@*",[(0,a.pV)()]),(0,a.IO)("app-user-detail:nth-of-type(even)",[c.PYX.startState,(0,a.EY)(300,[(0,c.PYX)("300ms","1200ms")])],{optional:!0}),(0,a.IO)("app-user-detail:nth-of-type(odd)",[c.MeT.startState,(0,a.EY)(300,[(0,c.MeT)("300ms","1050ms")])],{optional:!0})])]),(0,a.eR)("enter_to_small_view => void",[(0,a.ru)([(0,a.IO)("@*",[(0,a.pV)()]),(0,a.IO)("app-user-detail:nth-of-type(even)",[(0,a.EY)(300,[(0,c.Gzh)("300ms","1200ms")])],{optional:!0}),(0,a.IO)("app-user-detail:nth-of-type(odd)",[(0,a.EY)(300,[(0,c.qUF)("300ms","1050ms")])],{optional:!0})])]),(0,a.eR)("void => enter_to_big_view",[(0,a.IO)("app-user-detail",[c.MeT.startState,(0,a.EY)(150,[(0,c.PYX)("300ms","1350ms")])])]),(0,a.eR)("enter_to_big_view => void",[(0,a.IO)("app-user-detail",[(0,c.Gzh)("600ms","0ms")])])]),pi=(0,a.X$)("avatar",[(0,a.eR)(":enter",[c.g97.startState,(0,c.g97)("600ms","500ms")]),(0,a.eR)("enter_to_small_view => void",[(0,c.nAS)("600ms","0ms")]),(0,a.eR)("enter_to_big_view => void",[(0,c.qUF)("600ms","0ms")])]),mi=(0,a.X$)("checkbox",[(0,a.eR)(":enter",[c.BX9.startState,(0,c.BX9)("300ms","150ms")]),(0,a.eR)(":leave",[(0,c.SEG)("300ms","0ms")])]);class z extends M.I{constructor(e,i,n,o,r){super(),this._store=e,this._authStateRef=i,this._detailsService=n,this._sanitizationSampler=new g.x,this._subscription=new Q.w0,this._destroy$=new g.x,this.file=null,this.fileData=null,this.pendingFieldName$=new yt.X(null),this.addAddressInfomation$=new yt.X(!1),(0,Y.y)(this._authStateRef.state.userData),this.addressFieldNames=this._detailsService.getAddressInfoFiledNames(),this.fieldNames=this._detailsService.getBasicFiledNames(),this.labels=this._detailsService.getBasicLabels(),this.addressLabels=this._detailsService.getAddressInfoLabels(),this.avatarPending$=r.postingAvatar$.pipe((0,C.b)(d=>{d===_.XS.resolved&&(this.file=null)}),(0,b.U)(d=>d===_.XS.awaiting)),this.uploadAvatarFailed$=r.postingAvatar$.pipe((0,b.U)(d=>d===_.XS.rejected)),this.hasAddressInfo$=e.pipe((0,O.Ys)(({auth:d})=>d.userData?.hasAddressInfo??!1)),this._subscription.add(r.updatingUser$.pipe((0,x.h)(d=>d===_.XS.resolved),(0,b.U)(()=>null)).subscribe(this.pendingFieldName$)),this._subscription.add(r.addingAddressInfo$.pipe((0,b.U)(d=>d===_.XS.resolved)).subscribe(this.addAddressInfomation$));const{controls:p,dispose:h}=this._detailsService.getControls(this._authStateRef.state.userData,this._sanitizationSampler);this.controls=p,this._subscription.add(h),this.controls.email.addAsyncValidators(o.hasEmail()),this._currentUserId=this._authStateRef.state.userData.userId,this._subscription.add(()=>{this._destroy$.next(),this._destroy$.complete(),this._sanitizationSampler.complete()})}get imageUrl(){return this._authStateRef.state.userData?.mainPhotoUrl}ngOnDestroy(){this._subscription.unsubscribe()}onAvatarFormSubmit(e){null!=e&&this._store.dispatch((0,S.fU)({file:e,info:"Posting avatar from auth-user-details component."}))}onAddressFormSubmited(e){this._store.dispatch((0,S.nk)({data:e,info:"Adding address info from auth-user-details component."}))}onDetailCancel(){(0,Y.y)(this._authStateRef.state.userData),this._detailsService.update(this.controls,this._authStateRef.state.userData)}onDetailSubmit(e){this._sanitizationSampler.next();const i=this.controls[e].value;(0,Y.y)(this._authStateRef.state.userData),i!==this._authStateRef.state.userData[e]&&(this.pendingFieldName$.next(e),this._store.dispatch((0,S.Nq)({data:{userId:this._currentUserId,fieldName:e,newValue:i},info:"Updating user from auth-user-details component."})))}static#t=this.\u0275fac=function(i){return new(i||z)(t.Y36(O.yh),t.Y36(vt.Z8),t.Y36(I),t.Y36(ye.D),t.Y36(tt.f))};static#e=this.\u0275cmp=t.Xpm({type:z,selectors:[["app-auth-user-details"]],features:[t.qOj],decls:13,vars:33,consts:[[1,"w-[85%]","max-w-[320px]","min800:col-[1/2]","min800:self-start","min800:justify-self-center","min800:m-[0_16px_0_0]",3,"file","imageUrl","avatarPending","uploadAvatarFailed","fileChange","avatarSubmit"],[1,"justify-self-stretch","min800:col-[2/3]","max-[799px]:mt-[24px]","min800:row-[1/4]","min800:self-start","min800:mr-[16px]",3,"fieldNames","labels","controls","pendingFieldName","detailSubmit","detailCancel"],[3,"ngIf","ngIfElse"],["addressInfoTemplate",""],[1,"m-[16px]","min800:col-[1/2]","min800:self-start","min800:m-[16px_16px_16px_16px]","min800:translate-x-[-16px]"],[3,"value","change"],["class","w-full max-w-[400px] min800:col-[1/2] min800:self-start min800:justify-self-center px-[16px]",3,"addressFormSubmited",4,"ngIf"],[1,"w-full","max-w-[400px]","min800:col-[1/2]","min800:self-start","min800:justify-self-center","px-[16px]",3,"addressFormSubmited"],[1,"justify-self-stretch","min800:m-[28px_12px_0_0]","min800:col-[1/2]","min800:self-start",3,"fieldNames","labels","controls","pendingFieldName","detailSubmit","detailCancel"]],template:function(i,n){if(1&i&&(t.TgZ(0,"app-avatar-field",0),t.NdJ("fileChange",function(r){return n.file=r})("avatarSubmit",function(r){return n.onAvatarFormSubmit(r)}),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"media"),t.qZA(),t.TgZ(4,"app-auth-user-field-list",1),t.NdJ("detailSubmit",function(r){return n.onDetailSubmit(r)})("detailCancel",function(){return n.onDetailCancel()}),t.ALo(5,"async"),t.ALo(6,"media"),t.qZA(),t.YNc(7,si,7,9,"ng-template",2),t.ALo(8,"equels"),t.ALo(9,"assert"),t.ALo(10,"async"),t.YNc(11,ri,3,11,"ng-template",null,3,t.W1O)),2&i){const o=t.MAs(12);t.Q6J("file",n.file)("imageUrl",n.imageUrl)("avatarPending",t.lcZ(1,12,n.avatarPending$))("uploadAvatarFailed",t.lcZ(2,14,n.uploadAvatarFailed$))("@avatar",t.xi3(3,16,"enter_to_small_view",t.DdM(31,st))),t.xp6(4),t.Q6J("fieldNames",n.fieldNames)("labels",n.labels)("controls",n.controls)("pendingFieldName",t.lcZ(5,19,n.pendingFieldName$))("@authUser",t.xi3(6,21,"enter_to_small_view",t.DdM(32,st))),t.xp6(3),t.Q6J("ngIf",t.xi3(8,24,t.lcZ(9,27,t.lcZ(10,29,n.hasAddressInfo$)),!1))("ngIfElse",o)}},dependencies:[f.O5,xe.oG,L,X,V,ei.o,ii.K,ni.E,ai.z,f.Ov],styles:["[_nghost-%COMP%]{display:grid;padding:16px 0;justify-items:center;align-items:center;grid-auto-flow:row dense;width:100%;max-width:1100px;margin-left:auto;margin-right:auto}@media (min-width: 800px){[_nghost-%COMP%]{grid-template-columns:1fr 1fr;grid-template-rows:auto auto 1fr}}"],data:{animation:[li,pi,mi,ci]},changeDetection:0})}var ui=l(5032);const di=[{path:"",component:k,canActivate:[ct.a],canActivateChild:[ct.a],children:[{path:"details",component:z},{path:"newpassword",component:E},{path:"photos",component:q}]}];class K{static#t=this.\u0275fac=function(i){return new(i||K)};static#e=this.\u0275mod=t.oAB({type:K});static#i=this.\u0275inj=t.cJS({providers:[T,I,U],imports:[A.Bz.forChild(di),ui.m]})}}}]);