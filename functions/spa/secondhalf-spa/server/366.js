"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=366,exports.ids=[366],exports.modules={88366:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AccountModule:()=>AccountModule});var auth_guard=__webpack_require__(96273),fesm2020_router=__webpack_require__(14195),ng_animations=__webpack_require__(33324),animations=__webpack_require__(21097),operators=__webpack_require__(51138),cjs=__webpack_require__(25095),page_component=__webpack_require__(44125),core=__webpack_require__(40305),icon=__webpack_require__(6373),tabs=__webpack_require__(11254),common=__webpack_require__(89318);class AuthUserComponent extends page_component.I{constructor(acivatedRoute,router){super(),this.animationState=null;const activatedChildPath=(0,cjs.merge)((0,cjs.of)(acivatedRoute).pipe((0,operators.UI)(acRt=>acRt.firstChild.snapshot.url[0].path)),router.events.pipe((0,operators.hX)(ev=>ev instanceof fesm2020_router.m2),(0,operators.UI)(()=>acivatedRoute.firstChild.snapshot.url[0].path),(0,operators.BN)()));this.detailsActivePath$=activatedChildPath.pipe((0,operators.UI)(value=>"details"===value)),this.newPasswordActivePath$=activatedChildPath.pipe((0,operators.UI)(value=>"newpassword"===value)),this.photosActivePath$=activatedChildPath.pipe((0,operators.UI)(value=>"photos"===value))}static#_=this.\u0275fac=__name(function(t){return new(t||AuthUserComponent)(core.Y36(fesm2020_router.gz),core.Y36(fesm2020_router.F0))},"AuthUserComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:AuthUserComponent,selectors:[["app-auth-user"]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&core.d8E("@authUserPage",ctx.animationState)},"AuthUserComponent_HostBindings"),features:[core.qOj],decls:27,vars:11,consts:[["mat-tab-nav-bar","","backgroundColor","primary","mat-align-tabs","center",1,"w-[100vw]","min-w-[100%]","mat-elevation-z4",3,"tabPanel"],["mat-tab-link","","routerLink","./details",1,"max-w-[185px]",3,"active"],[1,"flex","flex-col","items-center"],[1,"auth-user__tab-subtitle","text-[.8em]"],["mat-tab-link","","routerLink","./newpassword",1,"max-w-[185px]",3,"active"],["mat-tab-link","","routerLink","./photos",1,"max-w-[185px]",3,"active"],["tabPanel",""],[1,"grid","items-start"],["outlet","outlet"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"nav",0)(1,"a",1),core.ALo(2,"async"),core.TgZ(3,"div",2)(4,"mat-icon"),core._uU(5,"account_circle"),core.qZA(),core.TgZ(6,"span",3),core._uU(7,"Details"),core.qZA()()(),core.TgZ(8,"a",4),core.ALo(9,"async"),core.TgZ(10,"div",2)(11,"mat-icon"),core._uU(12,"password"),core.qZA(),core.TgZ(13,"span",3),core._uU(14,"New password"),core.qZA()()(),core.TgZ(15,"a",5),core.ALo(16,"async"),core.TgZ(17,"div",2)(18,"mat-icon"),core._uU(19,"collections"),core.qZA(),core.TgZ(20,"span",3),core._uU(21,"Photos"),core.qZA()()()(),core._UZ(22,"mat-tab-nav-panel",null,6),core.TgZ(24,"div",7),core._UZ(25,"router-outlet",null,8),core.qZA()),2&rf){const _r0=core.MAs(23),_r1=core.MAs(26);core.Q6J("tabPanel",_r0),core.xp6(1),core.Q6J("active",core.lcZ(2,5,ctx.detailsActivePath$)),core.xp6(7),core.Q6J("active",core.lcZ(9,7,ctx.newPasswordActivePath$)),core.xp6(7),core.Q6J("active",core.lcZ(16,9,ctx.photosActivePath$)),core.xp6(9),core.Q6J("@outlet",_r1.isActivated?_r1.activatedRoute:"")}},"AuthUserComponent_Template"),dependencies:[fesm2020_router.lC,fesm2020_router.rH,icon.Hw,tabs.BU,tabs.sW,tabs.Nj,common.Ov],data:{animation:[(0,animations.X$)("outlet",[(0,animations.eR)("* <=> *",[(0,animations.ru)([(0,animations.IO)("@*",(0,animations.pV)(),{optional:!0})])])]),(0,animations.X$)("authUserPage",[(0,animations.eR)(":leave",[(0,animations.IO)("nav",(0,ng_animations.Frz)("400ms","0ms"))]),(0,animations.eR)(":enter",[(0,animations.IO)("nav",(0,ng_animations.Fi6)("400ms","200ms"))])])]},changeDetection:0})}__name(AuthUserComponent,"AuthUserComponent");var form_helper=__webpack_require__(37513),fesm2020_forms=__webpack_require__(43070),auth_actions=__webpack_require__(57928),utils=__webpack_require__(52849),auth_effects=__webpack_require__(5082),ngrx_store=__webpack_require__(7776),global_loading_spinner_service=__webpack_require__(80316),first_key_of_directive=__webpack_require__(54222),fesm2020_button=__webpack_require__(12161),form_field=__webpack_require__(69041),input=__webpack_require__(41764);function NewPasswordComponent_form_0_mat_error_6_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-error"),core._uU(1),core.qZA()),2&rf){const error_r6=ctx.$implicit;core.xp6(1),core.Oqu(error_r6)}}function NewPasswordComponent_form_0_mat_error_11_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-error"),core._uU(1),core.qZA()),2&rf){const error_r7=ctx.$implicit;core.xp6(1),core.Oqu(error_r7.message)}}function NewPasswordComponent_form_0_mat_error_16_Template(rf,ctx){1&rf&&core._UZ(0,"mat-error")}function NewPasswordComponent_form_0_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.TgZ(0,"form",2),core.NdJ("ngSubmit",__name(function(){core.CHM(_r9);const ctx_r8=core.oxw();return core.KtG(ctx_r8.onSubmit())},"NewPasswordComponent_form_0_Template_form_ngSubmit_0_listener")),core.TgZ(1,"div",3)(2,"mat-form-field",4)(3,"mat-label"),core._uU(4,"Old Password"),core.qZA(),core._UZ(5,"input",5),core.YNc(6,NewPasswordComponent_form_0_mat_error_6_Template,2,1,"mat-error",6),core.qZA(),core.TgZ(7,"mat-form-field",4)(8,"mat-label"),core._uU(9,"New password"),core.qZA(),core._UZ(10,"input",7),core.YNc(11,NewPasswordComponent_form_0_mat_error_11_Template,2,1,"mat-error",6),core.qZA(),core.TgZ(12,"mat-form-field",4)(13,"mat-label"),core._uU(14,"Confirm new password"),core.qZA(),core._UZ(15,"input",8),core.YNc(16,NewPasswordComponent_form_0_mat_error_16_Template,1,0,"mat-error",6),core.qZA()(),core.TgZ(17,"div",9)(18,"button",10),core._uU(19,"Update"),core.qZA(),core.TgZ(20,"button",11),core._uU(21,"Cancel"),core.qZA()()()}if(2&rf){const ctx_r0=core.oxw();core.Q6J("formGroup",ctx_r0.formGroup)("@form",void 0),core.xp6(6),core.Q6J("appFirstKeyOf",ctx_r0.formGroup.controls.oldPassword),core.xp6(5),core.Q6J("appFirstKeyOf",ctx_r0.formGroup.controls.newPassword),core.xp6(5),core.Q6J("appFirstKeyOf",ctx_r0.formGroup.controls.confirmNewPassword),core.xp6(1),core.Q6J("@btnGroup",void 0),core.xp6(1),core.Q6J("disabled",ctx_r0.submitBtnDisabled)}}function NewPasswordComponent_ng_template_1_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"div",12)(1,"div")(2,"h2",13),core._uU(3,"Succeded to update password."),core.qZA()(),core.TgZ(4,"div",14)(5,"button",15),core.NdJ("click",__name(function(){core.CHM(_r11);const ctx_r10=core.oxw();return core.KtG(ctx_r10.onUpdateAgainButtonClick())},"NewPasswordComponent_ng_template_1_Template_button_click_5_listener")),core._uU(6,"Update again"),core.qZA()()()}}__name(NewPasswordComponent_form_0_mat_error_6_Template,"NewPasswordComponent_form_0_mat_error_6_Template"),__name(NewPasswordComponent_form_0_mat_error_11_Template,"NewPasswordComponent_form_0_mat_error_11_Template"),__name(NewPasswordComponent_form_0_mat_error_16_Template,"NewPasswordComponent_form_0_mat_error_16_Template"),__name(NewPasswordComponent_form_0_Template,"NewPasswordComponent_form_0_Template"),__name(NewPasswordComponent_ng_template_1_Template,"NewPasswordComponent_ng_template_1_Template");const formAnimationMetadata=(0,animations.X$)("form",[(0,animations.eR)(":enter",[(0,animations.ru)([(0,animations.IO)("@*",(0,animations.pV)()),(0,animations.IO)("mat-form-field:nth-of-type(odd)",[ng_animations.MeT.startState,(0,animations.EY)(200,[(0,ng_animations.MeT)("500ms","200ms")])],{optional:!0}),(0,animations.IO)("mat-form-field:nth-of-type(even)",[ng_animations.PYX.startState,(0,animations.EY)(200,[(0,ng_animations.PYX)("500ms","400ms")])],{optional:!0})])]),(0,animations.eR)(":leave",[(0,animations.ru)([(0,animations.IO)("@*",(0,animations.pV)()),(0,animations.IO)("mat-form-field:nth-of-type(odd)",[(0,ng_animations.qUF)("500ms","0ms")],{optional:!0}),(0,animations.IO)("mat-form-field:nth-of-type(even)",[(0,ng_animations.Gzh)("500ms","0ms")],{optional:!0})])])]),btnGroupAnimationMetadata=(0,animations.X$)("btnGroup",[(0,animations.eR)(":enter",[ng_animations.l6O.startState,(0,ng_animations.l6O)("800ms","300ms")]),(0,animations.eR)(":leave",[(0,ng_animations.dGT)("500ms","0ms")])]);class NewPasswordComponent extends page_component.I{constructor(formBuilder,authEvents,_store,changeDetectorRef,spinnerService){super(),this._store=_store,this.passwordUpdated=!1,this._destroy$=new cjs.Subject,this._onceSubmited=!1;const formGroup=this.formGroup=formBuilder.group({oldPassword:formBuilder.control("",(0,form_helper.mr)(fesm2020_forms.kI.required,"Old password is required!")),newPassword:formBuilder.control("",[(0,form_helper.mr)(fesm2020_forms.kI.required,"New password is required!"),(0,form_helper.mr)(fesm2020_forms.kI.minLength(5),"New password must contain minimum 5 characters!"),(0,form_helper.$Y)("oldPassword","New password and old password can not be the same!")]),confirmNewPassword:formBuilder.control("",[(0,form_helper.mr)(fesm2020_forms.kI.required,"Password confirmation is required!"),(0,form_helper.mr)(fesm2020_forms.kI.minLength(5),"Password confirmation must contain minimum 5 characters!"),(0,form_helper.LJ)("newPassword","Password confirmation must match with newly provided password!")])});(0,form_helper.j1)(formGroup.controls.oldPassword),(0,form_helper.j1)(formGroup.controls.newPassword),(0,form_helper.j1)(formGroup.controls.confirmNewPassword),authEvents.changingPassword$.pipe((0,operators.Rs)(this._destroy$)).subscribe(status=>{switch(status){case utils.XS.awaiting:spinnerService.attach();break;case utils.XS.resolved:this.passwordUpdated=!0,formGroup.reset(),formGroup.markAsUntouched(),changeDetectorRef.markForCheck(),spinnerService.detach();break;case utils.XS.rejected:spinnerService.detach()}})}get submitBtnDisabled(){return this._onceSubmited&&(this.formGroup.invalid||this.formGroup.pending)}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}onSubmit(){this._onceSubmited||((0,form_helper.Gf)(this.formGroup),this._onceSubmited=!0),!this.formGroup.invalid&&this._store.dispatch((0,auth_actions.Wl)({newPasswordModel:this.formGroup.getRawValue()}))}onUpdateAgainButtonClick(){this.passwordUpdated=!1}static#_=this.\u0275fac=__name(function(t){return new(t||NewPasswordComponent)(core.Y36(fesm2020_forms.j3),core.Y36(auth_effects.f),core.Y36(ngrx_store.yh),core.Y36(core.sBO),core.Y36(global_loading_spinner_service.j))},"NewPasswordComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:NewPasswordComponent,selectors:[["app-new-password"]],features:[core.qOj],decls:3,vars:2,consts:[["class","grid w-full max-w-[400px] row-[2/3] col-[1/-1]",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["succededUpdateTemplate",""],[1,"grid","w-full","max-w-[400px]","row-[2/3]","col-[1/-1]",3,"formGroup","ngSubmit"],[1,"grid"],["appearance","fill"],["matInput","","type","text","name","oldPassword","formControlName","oldPassword"],[4,"appFirstKeyOf"],["matInput","","type","text","name","newPassword","formControlName","newPassword"],["matInput","","type","text","name","confirmNewPassword","formControlName","confirmNewPassword"],[1,"grid","grid-flow-col","gap-[8px]","mt-[8px]"],["type","submit","mat-raised-button","","color","primary",1,"py-[8px_!important]",3,"disabled"],["type","button","mat-raised-button","","color","warn",1,"py-[8px_!important]"],[1,"new-password__container","grid","self-center","w-full","max-w-[400px]","row-[2/3]","col-[1/-1]"],[1,"text-center"],[1,"justify-self-center","mt-[32px]"],["mat-raised-button","","color","accent",3,"click"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,NewPasswordComponent_form_0_Template,22,7,"form",0),core.YNc(1,NewPasswordComponent_ng_template_1_Template,7,0,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(2);core.Q6J("ngIf",!ctx.passwordUpdated)("ngIfElse",_r1)}},"NewPasswordComponent_Template"),dependencies:[first_key_of_directive.E,common.O5,fesm2020_button.lW,form_field.KE,form_field.hX,form_field.TO,input.Nt,fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.sg,fesm2020_forms.u],styles:["[_nghost-%COMP%]{display:grid;height:80vh;grid-template-rows:1fr auto 1fr;justify-items:center}"],data:{animation:[formAnimationMetadata,btnGroupAnimationMetadata]},changeDetection:0})}__name(NewPasswordComponent,"NewPasswordComponent");var others=__webpack_require__(25758),image_actions=__webpack_require__(38156),db_models=__webpack_require__(41289),portal=__webpack_require__(81887),animation_helper=__webpack_require__(17827);const _c0=["image"];function PhotoModalComponent_button_9_Template(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"button",9),core.NdJ("click",__name(function(){core.CHM(_r4);const ctx_r3=core.oxw();return core.KtG(ctx_r3.onSelect.next(ctx_r3.url))},"PhotoModalComponent_button_9_Template_button_click_0_listener")),core._uU(1,"Set as main image"),core.qZA()}}__name(PhotoModalComponent_button_9_Template,"PhotoModalComponent_button_9_Template");const closeBtnAnimationMetadata=(0,animations.X$)("closeBtn",[(0,animations.eR)(":enter",(0,ng_animations.BkL)("300ms","200ms")),(0,animations.eR)("true => false",(0,ng_animations.dGT)("300ms","0ms"))]),photo_modal_component_btnGroupAnimationMetadata=(0,animations.X$)("btnGroup",[(0,animations.eR)(":enter",[(0,animations.ru)([(0,animations.IO)("button.main-btn",(0,ng_animations.MeT)("300ms","200ms"),{optional:!0}),(0,animations.IO)("button.delete-btn",(0,ng_animations.PYX)("300ms","200ms"),{optional:!0})])]),(0,animations.eR)("true => false",[(0,animations.ru)([(0,animations.IO)("button.main-btn",(0,ng_animations.Gzh)("400ms","0ms"),{optional:!0}),(0,animations.IO)("button.delete-btn",(0,ng_animations.qUF)("400ms","0ms"),{optional:!0})])])]);class PhotoModalComponent{constructor(_sourceEl,_cdRef){this._sourceEl=_sourceEl,this._cdRef=_cdRef,this.animationState=!0,this.imageElRef=null,this.onSelect=new cjs.Subject,this.onDelete=new cjs.Subject,this.onClose=new cjs.Subject}ngAfterViewInit(){requestAnimationFrame(()=>{const targetEl=this.imageElRef.nativeElement,targetRect=targetEl.getBoundingClientRect(),sourceRect=this._sourceEl.getBoundingClientRect();this._sourceEl.style.visibility="hidden",targetEl.style.visibility="visible",this._applyStyles(targetEl,sourceRect);const keyframe=this._getKeyframe(targetRect);(0,animation_helper.s)(targetEl,keyframe,{fill:"both",duration:400,easing:"cubic-bezier(0.33, 1, 0.68, 1)"},()=>this._resetStyles(targetEl))})}close(){return this.animationState=!1,this._cdRef.markForCheck(),requestAnimationFrame(()=>{const targetEl=this.imageElRef.nativeElement,targetRect=targetEl.getBoundingClientRect(),sourceRect=this._sourceEl.getBoundingClientRect();this._sourceEl.style.visibility="hidden",this._applyStyles(targetEl,targetRect);const keyframe=this._getKeyframe(sourceRect);(0,animation_helper.s)(targetEl,keyframe,{fill:"both",duration:400,easing:"cubic-bezier(0.33, 1, 0.68, 1)"},()=>{this._sourceEl.style.visibility="",targetEl.style.visibility="",this.onClose.next()})}),this.onClose}ngOnDestroy(){this.onClose.complete(),this.onSelect.complete(),this.onDelete.complete()}_getKeyframe({left,top,width,height}){return{left:`${left}px`,top:`${top}px`,width:`${width}px`,height:`${height}px`}}_applyStyles(el,{left,top,width,height}){el.style.left=`${left}px`,el.style.top=`${top}px`,el.style.width=`${width}px`,el.style.height=`${height}px`,el.style.position="fixed"}_resetStyles(el){el.style.left="",el.style.top="",el.style.width="",el.style.height="",el.style.position=""}static#_=this.\u0275fac=__name(function(t){return new(t||PhotoModalComponent)(core.Y36("sourceEl"),core.Y36(core.sBO))},"PhotoModalComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:PhotoModalComponent,selectors:[["app-photo-modal"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.imageElRef=_t.first)}},"PhotoModalComponent_Query"),inputs:{url:"url",index:"index",isMain:"isMain"},decls:14,vars:4,consts:[[1,"row-[1/2]","col-[1/2]","w-full","relative","before:content-['']","before:block","before:pb-[calc(1/(3/4)_*_100%)]"],["imageContainer",""],["alt","member_image",1,"object-cover","absolute","top-0","left-0","w-full","h-full","invisible","mat-elevation-z3",3,"src"],["image",""],[1,"row-[1/2]","col-[1/2]","self-start","justify-self-end","m-[16px]","origin-center"],["mat-icon-button","","color","primary",1,"scale-125",3,"click"],[1,"grid","grid-cols-[2fr_1fr]","gap-[6px]","col-[1/2]"],["mat-raised-button","","color","accent","class","cursor-pointer main-btn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",1,"col-[2/3]","cursor-pointer","delete-btn",3,"click"],["mat-raised-button","","color","accent",1,"cursor-pointer","main-btn",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0,1),core._UZ(2,"img",2,3),core.qZA(),core.TgZ(4,"div",4)(5,"button",5),core.NdJ("click",__name(function(){return ctx.close()},"PhotoModalComponent_Template_button_click_5_listener")),core.TgZ(6,"mat-icon"),core._uU(7,"cancel"),core.qZA()()(),core.TgZ(8,"div",6),core.YNc(9,PhotoModalComponent_button_9_Template,2,0,"button",7),core.TgZ(10,"button",8),core.NdJ("click",__name(function(){return ctx.onDelete.next(ctx.index)},"PhotoModalComponent_Template_button_click_10_listener")),core.TgZ(11,"mat-icon"),core._uU(12,"delete"),core.qZA(),core._uU(13," Deleteee "),core.qZA()()),2&rf&&(core.xp6(2),core.Q6J("src",ctx.url,core.LSH),core.xp6(3),core.Q6J("@closeBtn",ctx.animationState),core.xp6(3),core.Q6J("@btnGroup",ctx.animationState),core.xp6(1),core.Q6J("ngIf",!ctx.isMain))},"PhotoModalComponent_Template"),dependencies:[common.O5,fesm2020_button.lW,fesm2020_button.RK,icon.Hw],styles:["[_nghost-%COMP%]{width:min(95vw,60vh);display:grid;gap:4px;grid-template-rows:1fr auto}"],data:{animation:[closeBtnAnimationMetadata,photo_modal_component_btnGroupAnimationMetadata]},changeDetection:0})}__name(PhotoModalComponent,"PhotoModalComponent");var overlay=__webpack_require__(64204);class PhotoModalService{constructor(_overlay,_overlayPositionBuilder,_ngZone){this._overlay=_overlay,this._overlayPositionBuilder=_overlayPositionBuilder,this._ngZone=_ngZone,this._overlayRef=null,this._componentRef=null}openPhotoModal(imageUrl,index,isMain,sourceElement,injector){if(this._componentRef)return this._componentRef.instance;const modalInjector=core.zs3.create({providers:[{provide:"sourceEl",useValue:sourceElement}],parent:injector}),overlayRef=this._overlayRef=this._overlay.create({hasBackdrop:!0,positionStrategy:this._overlayPositionBuilder.global().centerHorizontally().centerVertically()}),componentRef=this._componentRef=this._overlayRef.attach(new portal.C5(PhotoModalComponent,null,modalInjector));componentRef.setInput("url",imageUrl),componentRef.setInput("index",index),componentRef.setInput("isMain",isMain);const backdropElement=overlayRef.backdropElement;return backdropElement.style.touchAction="none",this._ngZone.runOutsideAngular(()=>{new cjs.Observable(()=>{const handler=__name(e=>{e.preventDefault()},"handler");return backdropElement.addEventListener("wheel",handler),()=>{backdropElement.removeEventListener("wheel",handler)}}).pipe((0,cjs.takeUntil)(componentRef.instance.onClose)).subscribe()}),overlayRef.backdropClick().pipe((0,cjs.takeUntil)(componentRef.instance.onClose)).subscribe(()=>componentRef.instance.close()),componentRef.instance.onClose.pipe((0,cjs.subscribeOn)(cjs.asyncScheduler)).subscribe(()=>{overlayRef.detach(),overlayRef.dispose(),this._overlayRef=null,this._componentRef=null}),componentRef.instance}closePhotoModal(){this._componentRef&&this._componentRef.instance.close()}static#_=this.\u0275fac=__name(function(t){return new(t||PhotoModalService)(core.LFG(overlay.aV),core.LFG(overlay.wJ),core.LFG(core.R0b))},"PhotoModalService_Factory");static#_2=this.\u0275prov=core.Yz7({token:PhotoModalService,factory:PhotoModalService.\u0275fac})}__name(PhotoModalService,"PhotoModalService");var auth_state=__webpack_require__(73627),image_effects=__webpack_require__(62024),loading_spinner_component=__webpack_require__(31055),lazy_image_directive=__webpack_require__(61240);const current_photos_component_c0=["imagesUrls",""];function CurrentPhotosComponent_div_0_div_3_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",8)(1,"span")(2,"mat-icon",9),core._uU(3,"star"),core.qZA(),core._uU(4," Main"),core.qZA()())}function CurrentPhotosComponent_div_0_div_4_Template(rf,ctx){1&rf&&core._UZ(0,"div",10)}function CurrentPhotosComponent_div_0_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.TgZ(0,"div",3)(1,"img",4,5),core.NdJ("click",__name(function(){const restoredCtx=core.CHM(_r9),index_r4=restoredCtx.index,url_r3=restoredCtx.$implicit,_r5=core.MAs(2),ctx_r8=core.oxw();return core.KtG(ctx_r8.onPhotoClick(index_r4,url_r3,_r5))},"CurrentPhotosComponent_div_0_Template_img_click_1_listener")),core.qZA(),core.YNc(3,CurrentPhotosComponent_div_0_div_3_Template,5,0,"div",6),core.YNc(4,CurrentPhotosComponent_div_0_div_4_Template,1,0,"div",7),core.qZA()}if(2&rf){const url_r3=ctx.$implicit,ctx_r0=core.oxw(),_r1=core.MAs(2);core.Q6J("@photo",void 0),core.xp6(1),core.Q6J("appLazyImage",url_r3)("loadingView",_r1),core.xp6(2),core.Q6J("ngIf",ctx_r0.compareUrls(url_r3,ctx_r0.mainImageUrl)),core.xp6(1),core.Q6J("ngIf",ctx_r0.compareUrls(url_r3,ctx_r0.mainImageUrl))}}function CurrentPhotosComponent_ng_template_1_Template(rf,ctx){1&rf&&core._UZ(0,"app-loading-spinner",11)}__name(CurrentPhotosComponent_div_0_div_3_Template,"CurrentPhotosComponent_div_0_div_3_Template"),__name(CurrentPhotosComponent_div_0_div_4_Template,"CurrentPhotosComponent_div_0_div_4_Template"),__name(CurrentPhotosComponent_div_0_Template,"CurrentPhotosComponent_div_0_Template"),__name(CurrentPhotosComponent_ng_template_1_Template,"CurrentPhotosComponent_ng_template_1_Template");const photoContainerAnimationMetadata=(0,animations.X$)("photoContainer",[(0,animations.eR)(":enter",[(0,animations.IO)("div.photo",[(0,animations.oB)({opacity:0,transform:"scale(0)"}),(0,animations.EY)(150,(0,animations.jt)("300ms 300ms",(0,animations.oB)({opacity:1,transform:"scale(1)"})))],{optional:!0})])]),photoAnimationMetadata=(0,animations.X$)("photo",[(0,animations.eR)(":leave",[(0,animations.jt)("300ms",(0,animations.oB)({opacity:0,transform:"scale(0)"}))])]);class CurrentPhotosComponent{constructor(_cdRef,_photoModalService,_injector){this._cdRef=_cdRef,this._photoModalService=_photoModalService,this._injector=_injector,this.imagesUrls=null,this.deleteImage=new core.vpe,this.mainImageSelected=new core.vpe}ngOnChanges(_){this._cdRef.reattach()}ngAfterViewChecked(){this._cdRef.detach()}onPhotoClick(index,url,element){const component=this._photoModalService.openPhotoModal(url,index,this.compareUrls(url,this.mainImageUrl),element,this._injector),parent=element.parentElement;parent.childElementCount>1&&(parent.children.item(1).style.visibility="hidden",parent.children.item(2).style.visibility="hidden"),component.onSelect.subscribe(url2=>this.mainImageSelected.emit(url2)),component.onDelete.subscribe(index2=>this.deleteImage.emit(index2)),component.onClose.subscribe(()=>{parent.childElementCount>1&&(parent.children.item(1).style.visibility="",parent.children.item(2).style.visibility="")})}trackBy(_,url){return url}compareUrls(url1,url2){if(null==url1||null==url2)return!1;if(url1===url2)return!0;return _getImageName(url1)===_getImageName(url2)}static#_=this.\u0275fac=__name(function(t){return new(t||CurrentPhotosComponent)(core.Y36(core.sBO),core.Y36(PhotoModalService),core.Y36(core.zs3))},"CurrentPhotosComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:CurrentPhotosComponent,selectors:[["app-current-photos","imagesUrls",""]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&core.d8E("@photoContainer",ctx.photoContainerAnimState)},"CurrentPhotosComponent_HostBindings"),inputs:{mainImageUrl:"mainImageUrl",imagesUrls:"imagesUrls"},outputs:{deleteImage:"deleteImage",mainImageSelected:"mainImageSelected"},features:[core._Bn([{provide:(0,core.Gpc)(()=>CurrentPhotosMediator),useClass:(0,core.Gpc)(()=>CurrentPhotosMediator)}]),core.TTD],attrs:current_photos_component_c0,decls:3,vars:2,consts:[["class","photo relative w-full before:content-[''] before:block before:pb-[calc((4/3)_*_100%)]",4,"ngFor","ngForOf","ngForTrackBy"],["appLazyImageLoadingView",""],["loadingView","appLazyImageLoadingView"],[1,"photo","relative","w-full","before:content-['']","before:block","before:pb-[calc((4/3)_*_100%)]"],["alt","image",1,"object-cover","top-0","left-0","w-full","h-full","absolute",3,"appLazyImage","loadingView","click"],["image",""],["class","absolute top-0 right-0 text-[22px] rounded-[0_0_0_12px] p-[6px] bg-primary",4,"ngIf"],["class","frame top-0 left-0 w-full h-full absolute pointer-events-none",4,"ngIf"],[1,"absolute","top-0","right-0","text-[22px]","rounded-[0_0_0_12px]","p-[6px]","bg-primary"],[1,"color-accent"],[1,"frame","top-0","left-0","w-full","h-full","absolute","pointer-events-none"],[1,"absolute","top-[25%]","left-[25%]","w-[50%]"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,CurrentPhotosComponent_div_0_Template,5,5,"div",0),core.YNc(1,CurrentPhotosComponent_ng_template_1_Template,1,0,"ng-template",1,2,core.W1O)),2&rf&&core.Q6J("ngForOf",ctx.imagesUrls)("ngForTrackBy",ctx.trackBy)},"CurrentPhotosComponent_Template"),dependencies:[loading_spinner_component.g,lazy_image_directive.$,lazy_image_directive.B,common.sg,common.O5,icon.Hw],styles:['[_nghost-%COMP%]{display:grid;grid-template-columns:1fr 1fr;justify-items:center}@media (min-width: 610px){[_nghost-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}}.frame[_ngcontent-%COMP%]{border:6px solid #6200ea}.photo__photo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:start;width:100%;max-width:335px}app-photo[_ngcontent-%COMP%]{width:100%;max-width:280px}.photo__photo-container[_ngcontent-%COMP%]:before{content:"";display:block;padding-bottom:133.3333333333%}'],data:{animation:[photoContainerAnimationMetadata,photoAnimationMetadata]},changeDetection:0})}__name(CurrentPhotosComponent,"CurrentPhotosComponent");class CurrentPhotosMediator{constructor(){this.selectedImg$=new cjs.Subject,this.updateRect$=new cjs.Subject,this.unselect$=new cjs.Subject}}function _getImageName(imageUrl){let index=imageUrl.lastIndexOf("%2F")+3,imageName=imageUrl.substring(index);return imageName.includes("?")&&(index=imageName.indexOf("?"),imageName=imageName.substring(0,index)),imageName}__name(CurrentPhotosMediator,"CurrentPhotosMediator"),__name(_getImageName,"_getImageName");var coerction_and_types=__webpack_require__(99061);const multi_file_picker_input_component_c0=["fileInput"],_c1=["*"];class MultiFilePickerInputComponent{constructor(changeDetectorRef,renderer,ngZone){this.changeDetectorRef=changeDetectorRef,this.renderer=renderer,this.ngZone=ngZone,this._fileInput=null,this._loading=!1,this._readDataUrl=!1,this._fileDataUrls=null,this._value=null,this.fileDeleted=new core.vpe,this.filesDeleted=new core.vpe,this.loadFileDataUrlsFailed=new core.vpe,this.fileDataUrls=new core.vpe,this.valueChange=new core.vpe}get lenght(){return this._value?this._value.length:0}get loading(){return this._loading}set value(files){this._value!==files&&(files?(this._value=null,this._setNullOrConcat(files)):files||!this.fileDataUrls.observed&&!this.filesDeleted.observed?this._setNullOrConcat(null):Promise.resolve().then(()=>{this._setNullOrConcat(null)}))}get value(){return this._value}set readDataUrl(value){value=(0,coerction_and_types.ll)(value),this._readDataUrl!==value&&(this._readDataUrl=(0,coerction_and_types.ll)(value),!value&&this._fileDataUrls&&(this._fileDataUrls=null,this.fileDataUrls.observed&&Promise.resolve().then(()=>{this.fileDataUrls.emit(),this.changeDetectorRef.markForCheck()})))}ngAfterViewInit(){this.renderer.listen(this._fileInput.nativeElement,"input",()=>{const files=this._fileInput.nativeElement.files;!files||0===files.length||(this._setNullOrConcat(Array.from(files)),this._fileInput.nativeElement.files=null,this._fileInput.nativeElement.value="")})}writeValue(value){this._value=null,this._fileDataUrls=null,this._setNullOrConcat(value,!1)}registerOnChange(fn){this._onChange=fn}registerOnTouched(fn){this._onTouched=fn}pickFiles(){if(!this._fileInput)throw new Error("<app-file-picker-input>: Attempting to pick up file before view initialized! ");this._fileInput.nativeElement.click(),this._onTouched&&this._onTouched()}removeFile(index){if(index<0)throw new Error("MultiFilePickerInput::deleteFile: Index below 0!!");if(!this._value)throw new Error("MultiFilePickerInput::deleteFile: Cannot delete file when value is equel to null!!");if(index>this.lenght-1)throw new Error("MultiFilePickerInput::deleteFile: Index out of the range!!");let valueChange=!1,fileDataChange=!1;1===this.lenght?this._setNullOrConcat(null):(this._value=this._value.slice(),this._value.splice(index,1),valueChange=!0,this._readDataUrl&&(this._fileDataUrls=this._fileDataUrls.slice(),this._fileDataUrls.splice(index,1),fileDataChange=!0)),valueChange&&(this.valueChange.emit(this._value),this._onChange&&this._onChange(this._value),this.changeDetectorRef.markForCheck()),fileDataChange&&this.fileDataUrls.emit(this._fileDataUrls),this.fileDeleted.emit(index),0===this.lenght&&this.filesDeleted.emit()}removeAllFiles(){this._setNullOrConcat(null)}_setNullOrConcat(newValue,riseOnChange=!0){if(this._value===newValue)return;let fileDataChange=!1;newValue?(this._value=this._value?this._value.concat(newValue):newValue,this._readDataUrl&&this._readAllDataUrlsOfFiles(newValue)):(this._value=null,fileDataChange=this._readDataUrl&&null!=this._fileDataUrls,this._fileDataUrls=null),this._value||Object.freeze(this._value),this.valueChange.emit(this._value),riseOnChange&&this._onChange&&this._onChange(this._value),fileDataChange&&this.fileDataUrls.emit(this._fileDataUrls),this._value||this.filesDeleted.emit(),this.changeDetectorRef.markForCheck()}_readAllDataUrlsOfFiles(files){const promises=new Array(files.length);this._loading=!0;let hasNullResult=!1;this.ngZone.runOutsideAngular(()=>{for(let i=0;i<files.length;i++)promises[i]=this._getBase64(files[i],()=>hasNullResult=!0);Promise.all(promises).then(data=>{this.ngZone.run(()=>{this._fileDataUrls?(hasNullResult&&(data=data.filter(val=>null!==val)),this._fileDataUrls=this._fileDataUrls.concat(data)):this._fileDataUrls=data.filter(val=>null!==val),Object.freeze(this._fileDataUrls),this._loading=!1,this.ngZone.run(()=>{this.fileDataUrls.emit(this._fileDataUrls),this.changeDetectorRef.markForCheck()})})}).catch(()=>{this.ngZone.run(()=>{this._loading=!1,this.loadFileDataUrlsFailed.emit(),this.changeDetectorRef.markForCheck()})})})}_getBase64(file,isNullCb){const reader=new FileReader;return new Promise((resolve,reject)=>{reader.onload=()=>{if(!reader.result)return void reject();let result;result=reader.result instanceof ArrayBuffer?btoa(new Uint8Array(reader.result).reduce((data,byte)=>data+String.fromCharCode(byte),"")):reader.result,isNullCb&&null===result&&isNullCb(),resolve(result)},reader.onerror=()=>{reject()},reader.onabort=()=>{reject()},reader.readAsDataURL(file)})}static#_=this.\u0275fac=__name(function(t){return new(t||MultiFilePickerInputComponent)(core.Y36(core.sBO),core.Y36(core.Qsj),core.Y36(core.R0b))},"MultiFilePickerInputComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:MultiFilePickerInputComponent,selectors:[["app-multi-file-picker-input"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(multi_file_picker_input_component_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._fileInput=_t.first)}},"MultiFilePickerInputComponent_Query"),inputs:{value:"value",name:"name",accept:"accept",readDataUrl:"readDataUrl"},outputs:{fileDeleted:"fileDeleted",filesDeleted:"filesDeleted",loadFileDataUrlsFailed:"loadFileDataUrlsFailed",fileDataUrls:"fileDataUrls",valueChange:"valueChange"},features:[core._Bn([{provide:fesm2020_forms.JU,useExisting:MultiFilePickerInputComponent,multi:!0}])],ngContentSelectors:_c1,decls:3,vars:2,consts:[["type","file","multiple","",2,"display","none",3,"name","accept"],["fileInput",""]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core._UZ(0,"input",0,1),core.Hsn(2)),2&rf&&core.Q6J("name",ctx.name)("accept",ctx.accept)},"MultiFilePickerInputComponent_Template"),changeDetection:0})}__name(MultiFilePickerInputComponent,"MultiFilePickerInputComponent");var asyncToGenerator=__webpack_require__(15861);const camera_picture_input_component_c0=["canvasTemplate"];function CameraPictureInputComponent_ng_template_0_ng_template_10_button_0_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.TgZ(0,"button",13),core.NdJ("click",__name(function(){core.CHM(_r9);const ctx_r8=core.oxw(3);return core.KtG(ctx_r8._makePicture())},"CameraPictureInputComponent_ng_template_0_ng_template_10_button_0_Template_button_click_0_listener")),core.TgZ(1,"mat-icon"),core._uU(2,"photo_camera"),core.qZA()()}}function CameraPictureInputComponent_ng_template_0_ng_template_10_Template(rf,ctx){if(1&rf&&core.YNc(0,CameraPictureInputComponent_ng_template_0_ng_template_10_button_0_Template,3,0,"button",12),2&rf){core.oxw();const _r5=core.MAs(12),ctx_r4=core.oxw();core.Q6J("ngIf",!ctx_r4.pictureCatched)("ngIfElse",_r5)}}function CameraPictureInputComponent_ng_template_0_ng_template_11_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"button",14),core.NdJ("click",__name(function(){core.CHM(_r11);const ctx_r10=core.oxw(2);return core.KtG(ctx_r10.onCancelButtonClick())},"CameraPictureInputComponent_ng_template_0_ng_template_11_Template_button_click_0_listener")),core.TgZ(1,"mat-icon"),core._uU(2,"cancel"),core.qZA(),core._uU(3," Cancel "),core.qZA(),core.TgZ(4,"button",15),core.NdJ("click",__name(function(){core.CHM(_r11);const ctx_r12=core.oxw(2);return core.KtG(ctx_r12.onAcceptButtonClick())},"CameraPictureInputComponent_ng_template_0_ng_template_11_Template_button_click_4_listener")),core.TgZ(5,"mat-icon"),core._uU(6,"add_a_photo"),core.qZA(),core._uU(7," Accept "),core.qZA()}}function CameraPictureInputComponent_ng_template_0_Template(rf,ctx){if(1&rf){const _r14=core.EpF();core.TgZ(0,"div",1,2),core._UZ(2,"canvas",3,4),core.TgZ(4,"div",5)(5,"div",6)(6,"button",7),core.NdJ("click",__name(function(){core.CHM(_r14);const ctx_r13=core.oxw();return core.KtG(ctx_r13.onExitButtonClick())},"CameraPictureInputComponent_ng_template_0_Template_button_click_6_listener")),core.TgZ(7,"mat-icon"),core._uU(8,"cancel"),core.qZA()()(),core.TgZ(9,"div",8),core.YNc(10,CameraPictureInputComponent_ng_template_0_ng_template_10_Template,1,2,"ng-template",9),core.YNc(11,CameraPictureInputComponent_ng_template_0_ng_template_11_Template,8,0,"ng-template",null,10,core.W1O),core.qZA()(),core._UZ(13,"div",11),core.qZA()}if(2&rf){const _r5=core.MAs(12),ctx_r1=core.oxw();core.Q6J("@container",void 0),core.xp6(10),core.Q6J("ngIf",!ctx_r1.pictureCatched)("ngIfElse",_r5),core.xp6(3),core.Q6J("@ripple",ctx_r1.rippleAnimationState)}}__name(CameraPictureInputComponent_ng_template_0_ng_template_10_button_0_Template,"CameraPictureInputComponent_ng_template_0_ng_template_10_button_0_Template"),__name(CameraPictureInputComponent_ng_template_0_ng_template_10_Template,"CameraPictureInputComponent_ng_template_0_ng_template_10_Template"),__name(CameraPictureInputComponent_ng_template_0_ng_template_11_Template,"CameraPictureInputComponent_ng_template_0_ng_template_11_Template"),__name(CameraPictureInputComponent_ng_template_0_Template,"CameraPictureInputComponent_ng_template_0_Template");const camera_picture_input_component_c1=["*"],containerAnimationMetadata=(0,animations.X$)("container",[(0,animations.eR)(":enter",[(0,animations.oB)({opacity:0,transform:"scale(0) rotateY(0)"}),(0,animations.jt)("800ms ease-out",(0,animations.oB)({opacity:1,transform:"scale(1) rotateY(720deg)"}))]),(0,animations.eR)(":leave",[(0,animations.oB)({opacity:1,transform:"scale(1) rotateY(720deg)"}),(0,animations.jt)("800ms ease-out",(0,animations.oB)({opacity:0,transform:"scale(0) rotateY(0)"}))])]),ripleAnimationMetadata=(0,animations.X$)("ripple",[(0,animations.eR)("* <=> *",[(0,animations.oB)({transform:"scale(0)"}),(0,animations.jt)("500ms",(0,animations.oB)({transform:"scale(2)"}))])]);class CameraPictureInputComponent{constructor(changeDetectorRef,ngZone,_platformId,_renderer,_overlay,_viewContainerRef,_positionStrategy){this.changeDetectorRef=changeDetectorRef,this.ngZone=ngZone,this._platformId=_platformId,this._renderer=_renderer,this._overlay=_overlay,this._viewContainerRef=_viewContainerRef,this._positionStrategy=_positionStrategy,this._destroy$=new cjs.Subject,this._play=!1,this._streamWidth=0,this._streamHeight=0,this._destinationWidth=0,this._destinationHeight=0,this._destinationLeft=0,this._destinationTop=0,this._ovrlayRef=null,this._canvasElement=null,this._open=!1,this.rippleAnimationState=!1,this.fileDataUrl=null,this.pictureCatched=!1,this.videoElement=null,this._value=null,this.accept=new core.vpe,this.turnOnCameraFailed=new core.vpe,this.valueChange=new core.vpe,this.openChange=new core.vpe,this.context2D=null,this._updateCanvas=()=>{!this.context2D||!this.videoElement||(this.context2D.drawImage(this.videoElement,this._destinationLeft,this._destinationTop,this._destinationWidth,this._destinationHeight),this._play&&requestAnimationFrame(this._updateCanvas))}}get value(){return this._value}set value(value){this._value!==value&&(this._value=value,this.valueChange.emit(value),this._onChange&&this._onChange(value))}get open(){return this._open}set open(value){this._open!==value&&(this._open=value,this.openChange.emit(value),value||this._clear())}writeValue(obj){this._value=obj,this.valueChange.emit(obj)}registerOnChange(fn){this._onChange=fn}registerOnTouched(fn){this._onTouched=fn}ngOnInit(){(0,common.NF)(this._platformId)&&this.ngZone.runOutsideAngular(()=>{this._renderer.listen(window,"resize",this._calculateResolution.bind(this))}),this._initialAudioElement()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}turnOnCamera(){var _this=this;return(0,asyncToGenerator.Z)(function*(){_this._onTouched&&_this._onTouched();try{_this._mediaStream=yield window.navigator.mediaDevices.getUserMedia({video:!0}),_this._ovrlayRef=_this._overlay.create({hasBackdrop:!0,positionStrategy:_this._positionStrategy.global().centerHorizontally().centerVertically()});const viewRef=_this._ovrlayRef.attach(new portal.UE(_this.template,_this._viewContainerRef));_this._canvasElement=viewRef.rootNodes[0].children.item(0),_this.context2D=_this._canvasElement.getContext("2d"),_this._streamWidth=_this._mediaStream.getVideoTracks()[0].getSettings().width,_this._streamHeight=_this._mediaStream.getVideoTracks()[0].getSettings().height,_this.videoElement||(_this.videoElement=_this._renderer.createElement("video")),_this.videoElement.srcObject=_this._mediaStream,_this._calculateResolution(),_this.videoElement.play(),_this._play=!0,_this.ngZone.runOutsideAngular(()=>{_this._renderer.listen(_this.videoElement,"loadeddata",_this._updateCanvas)}),_this.open=!0,_this.changeDetectorRef.markForCheck()}catch{_this.turnOnCameraFailed.next(),_this.changeDetectorRef.markForCheck()}})()}onCancelButtonClick(){!this.pictureCatched||(this._play=!0,this.pictureCatched=!1,this.ngZone.runOutsideAngular(this._updateCanvas))}onAcceptButtonClick(){if(!this.pictureCatched||!this._canvasElement)return;this.fileDataUrl=this._canvasElement.toDataURL("image/jpg");const img_buffer=atob(this.fileDataUrl.split(",")[1]).split("").map(char=>char.charCodeAt(0)),u8image=new Uint8Array(img_buffer);this._play=!1,this.pictureCatched=!1,this._value=new Blob([u8image],{type:"image/jpg"}),this.valueChange.emit(this._value),this.accept.emit(this._value),this._clear()}onExitButtonClick(){this._clear()}_makePicture(){!this._canvasElement||(this._play=!1,this._audioSoundEffect&&this._audioSoundEffect.play(),this.pictureCatched=!0,this.rippleAnimationState=!this.rippleAnimationState,this.changeDetectorRef.markForCheck())}_initialAudioElement(){null!=this.shutterSoundEffectUrl&&(this._audioSoundEffect=this._renderer.createElement("audio"),this._renderer.setProperty(this._audioSoundEffect,"src",this.shutterSoundEffectUrl))}_clear(){this._play=!1,this.pictureCatched=!1,this.videoElement&&(this.videoElement.pause(),this.videoElement.srcObject=null),this._mediaStream&&this._mediaStream.getTracks().forEach(track=>{track.stop()}),this._ovrlayRef&&(this._ovrlayRef.detach(),this._ovrlayRef=null),this.changeDetectorRef.markForCheck()}_calculateResolution(){if(!this._canvasElement||!this.context2D||!this.videoElement)return;const ratio=this._streamWidth/this._streamHeight;let canvasDesiredWidth,canvasDesiredHeight;window.innerHeight>window.innerWidth?(canvasDesiredWidth=.95*window.innerWidth,canvasDesiredHeight=canvasDesiredWidth*(4/3),canvasDesiredHeight>.95*window.innerHeight&&(canvasDesiredHeight=.95*window.innerHeight,canvasDesiredWidth=canvasDesiredHeight*(3/4))):(canvasDesiredHeight=.95*window.innerHeight,canvasDesiredWidth=canvasDesiredHeight*(3/4),canvasDesiredWidth>.95*window.innerWidth&&(canvasDesiredWidth=.95*window.innerWidth,canvasDesiredHeight=canvasDesiredWidth*(4/3))),this._canvasElement.width=canvasDesiredWidth,this._canvasElement.height=canvasDesiredHeight,this._destinationWidth=canvasDesiredWidth,this._destinationHeight=this._destinationWidth/ratio,this._destinationHeight<canvasDesiredHeight&&(this._destinationHeight=canvasDesiredHeight,this._destinationWidth=this._destinationHeight*ratio),this._destinationLeft=this._destinationWidth>canvasDesiredWidth?(canvasDesiredWidth-this._destinationWidth)/2:0,this._destinationTop=this._destinationHeight>canvasDesiredHeight?(canvasDesiredHeight-this._destinationHeight)/2:0}static#_=this.\u0275fac=__name(function(t){return new(t||CameraPictureInputComponent)(core.Y36(core.sBO),core.Y36(core.R0b),core.Y36(core.Lbi),core.Y36(core.Qsj),core.Y36(overlay.aV),core.Y36(core.s_b),core.Y36(overlay.wJ))},"CameraPictureInputComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:CameraPictureInputComponent,selectors:[["app-camera-picture-input"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(camera_picture_input_component_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.template=_t.first)}},"CameraPictureInputComponent_Query"),inputs:{value:"value",open:"open",name:"name",shutterSoundEffectUrl:"shutterSoundEffectUrl"},outputs:{accept:"accept",turnOnCameraFailed:"turnOnCameraFailed",valueChange:"valueChange",openChange:"openChange"},features:[core._Bn([{provide:fesm2020_forms.JU,useExisting:CameraPictureInputComponent,multi:!0}])],ngContentSelectors:camera_picture_input_component_c1,decls:3,vars:0,consts:[["canvasTemplate",""],[1,"camera-picture-input__canvas-container","mat-elevation-z14"],["canvasContainer",""],[1,"camera-picture-input__canvas"],["canvas",""],[1,"camera-picture-input__buttons-container"],[1,"camera-picture-input__cancel-button-container","row-end-center","margin-8"],["mat-mini-fab","","color","warn",3,"click"],[1,"camera-picture-input__bottom-buttons-container"],[3,"ngIf","ngIfElse"],["catchedPictureTemplate",""],[1,"position-absolute","camera-picture-input__ripple"],["mat-fab","","color","primary",3,"click",4,"ngIf","ngIfElse"],["mat-fab","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core.YNc(0,CameraPictureInputComponent_ng_template_0_Template,14,4,"ng-template",null,0,core.W1O),core.Hsn(2))},"CameraPictureInputComponent_Template"),dependencies:[common.O5,fesm2020_button.lW,fesm2020_button.nh,fesm2020_button.cs,icon.Hw],styles:[".camera-picture-input__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1000000;left:0;top:0;width:100%;height:100%;background-color:#00000052}.camera-picture-input__canvas-container[_ngcontent-%COMP%]{display:flex;border:2px solid #ff4081;border-radius:16px;overflow:hidden;position:relative}.camera-picture-input__buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;width:100%;height:100%;align-items:stretch;justify-content:center}.camera-picture-input__cancel-button-container[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:center;margin:8px}.camera-picture-input__bottom-buttons-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:16px;width:100%;margin-top:auto;margin-bottom:16px}.camera-picture-input__ripple[_ngcontent-%COMP%]{transform-origin:center;transform:scale(0);width:100%;height:100%;background-image:radial-gradient(transparent,transparent,white 70%);z-index:100;border-radius:50%}"],data:{animation:[containerAnimationMetadata,ripleAnimationMetadata]},changeDetection:0})}__name(CameraPictureInputComponent,"CameraPictureInputComponent");const new_photo_list_component_c0=["filesData",""];function NewPhotoListComponent_div_0_Template(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"div",1),core._UZ(1,"img",2),core.TgZ(2,"div",3)(3,"button",4),core.NdJ("click",__name(function(){const index_r2=core.CHM(_r4).index,ctx_r3=core.oxw();return core.KtG(ctx_r3.cancel.emit(index_r2))},"NewPhotoListComponent_div_0_Template_button_click_3_listener")),core.TgZ(4,"mat-icon"),core._uU(5,"cancel"),core.qZA()()()()}if(2&rf){const url_r1=ctx.$implicit;core.Q6J("@newPhoto",void 0),core.xp6(1),core.Q6J("src",url_r1,core.LSH)}}__name(NewPhotoListComponent_div_0_Template,"NewPhotoListComponent_div_0_Template");const newPhotoAinmationMetadata=(0,animations.X$)("newPhoto",[(0,animations.eR)(":enter",[(0,animations.oB)({transform:"rotateY(720deg) scale(0)"}),(0,animations.jt)("800ms ease-in-out",(0,animations.oB)({transform:"rotateY(0deg) scale(1)"}))]),(0,animations.eR)(":leave",[(0,animations.jt)("800ms ease-in-out",(0,animations.oB)({transform:"rotateY(720deg) scale(0)"}))])]);class NewPhotoListComponent{constructor(_cdRef){this._cdRef=_cdRef,this.cancel=new core.vpe}ngOnChanges(_){this._cdRef.reattach()}ngAfterViewChecked(){this._cdRef.detach()}static#_=this.\u0275fac=__name(function(t){return new(t||NewPhotoListComponent)(core.Y36(core.sBO))},"NewPhotoListComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:NewPhotoListComponent,selectors:[["app-new-photo-list","filesData",""]],inputs:{filesData:"filesData"},outputs:{cancel:"cancel"},features:[core.TTD],attrs:new_photo_list_component_c0,decls:1,vars:1,consts:[["class","photo-container w-full rounded-[8px] overflow-hidden relative\n            before:content-[''] before:block before:pb-[calc(100%_*_1/(5/7))]",4,"ngFor","ngForOf"],[1,"photo-container","w-full","rounded-[8px]","overflow-hidden","relative","before:content-['']","before:block","before:pb-[calc(100%_*_1/(5/7))]"],["alt","user_image",1,"object-cover","absolute","top-0","left-0","w-full","h-full",3,"src"],[1,"right-[16px]","top-[16px]","absolute"],["mat-mini-fab","","color","warn",3,"click"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,NewPhotoListComponent_div_0_Template,6,2,"div",0),2&rf&&core.Q6J("ngForOf",ctx.filesData)},"NewPhotoListComponent_Template"),dependencies:[common.sg,fesm2020_button.nh,icon.Hw],styles:["[_nghost-%COMP%], app-new-photo-list[_nghost-%COMP%]{display:grid;grid-template-columns:1fr 1fr;border-radius:8px;overflow:hidden;gap:8px}@media (min-width: 500px){[_nghost-%COMP%], app-new-photo-list[_nghost-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}}@media (min-width: 800px){[_nghost-%COMP%], app-new-photo-list[_nghost-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}}.photo-container[_ngcontent-%COMP%]{border:2px solid #6200ea}"],data:{animation:[newPhotoAinmationMetadata]},changeDetection:0})}__name(NewPhotoListComponent,"NewPhotoListComponent");const new_photos_component_c0=__name(function(a0){return{itsHeight:a0}},"new_photos_component_c0"),new_photos_component_c1=__name(function(a0,a1){return{value:a0,params:a1}},"new_photos_component_c1");function NewPhotosComponent_div_13_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"div",7,8)(2,"button",9),core.NdJ("click",__name(function(){core.CHM(_r5);const ctx_r4=core.oxw(),_r1=core.MAs(8);return core.KtG(ctx_r4.imagesAccepted.emit(_r1.value))},"NewPhotosComponent_div_13_Template_button_click_2_listener")),core.TgZ(3,"mat-icon"),core._uU(4,"image"),core.qZA(),core._uU(5," Upload "),core.qZA(),core.TgZ(6,"app-new-photo-list",10),core.NdJ("cancel",__name(function($event){core.CHM(_r5),core.oxw();const _r1=core.MAs(8);return core.KtG(_r1.removeFile($event))},"NewPhotosComponent_div_13_Template_app_new_photo_list_cancel_6_listener")),core.qZA()()}if(2&rf){const _r3=core.MAs(1),ctx_r2=core.oxw();core.Q6J("@itemsContainer",core.WLB(4,new_photos_component_c1,ctx_r2.itemsContainerAnimationState,core.VKq(2,new_photos_component_c0,_r3.clientHeight))),core.xp6(6),core.Q6J("filesData",ctx_r2.filesData)}}__name(NewPhotosComponent_div_13_Template,"NewPhotosComponent_div_13_Template");const itemsContainerAnimationMetadata=(0,animations.X$)("itemsContainer",[(0,animations.eR)(":enter",[(0,animations.ru)([(0,animations.oB)({height:0,borderWidth:0}),(0,animations.jt)("300ms ease-out",(0,animations.oB)({height:"*",borderWidth:"*"})),(0,animations.IO)("@*",(0,animations.pV)(),{optional:!0})])]),(0,animations.eR)(":leave",[(0,animations.ru)([(0,animations.IO)("@*",(0,animations.pV)(),{optional:!0}),(0,animations.jt)("300ms ease-out",(0,animations.oB)({height:0,borderWidth:0}))])]),(0,animations.eR)("* <=> *",[(0,animations.ru)([(0,animations.oB)({height:"{{itsHeight}}px"}),(0,animations.jt)("300ms ease-out",(0,animations.oB)({height:"*"})),(0,animations.IO)("@*",(0,animations.pV)(),{optional:!0})])])]);class NewPhotosComponent{constructor(){this._files=null,this._cameraOpen=!1,this.itemsContainerAnimationState=!1,this.filesData=null,this.pictureAccepted=new core.vpe,this.imagesAccepted=new core.vpe,this.filesChange=new core.vpe,this.cameraOpenChange=new core.vpe}set files(value){this._files!==value&&(this._files=value,this.filesChange.emit(value))}get files(){return this._files}get cameraOpen(){return this._cameraOpen}set cameraOpen(value){this._cameraOpen!==value&&(this._cameraOpen=value,this.cameraOpenChange.emit(value))}static#_=this.\u0275fac=__name(function(t){return new(t||NewPhotosComponent)},"NewPhotosComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:NewPhotosComponent,selectors:[["app-new-photos"]],inputs:{files:"files",cameraOpen:"cameraOpen"},outputs:{pictureAccepted:"pictureAccepted",imagesAccepted:"imagesAccepted",filesChange:"filesChange",cameraOpenChange:"cameraOpenChange"},decls:14,vars:2,consts:[[1,"grid","grid-flow-col","auto-cols-fr","mx-auto","my-[16px]","gap-[8px]","w-full","max-w-[620px]"],["shutterSoundEffectUrl","assets/camera_picture_sound_effect.mp3",3,"accept"],["camera",""],["mat-raised-button","","color","primary",1,"w-full",3,"click"],["accept","image/*","readDataUrl","",3,"value","valueChange","fileDataUrls"],["filePicker",""],["class","flex flex-col items-center accent-border",4,"ngIf"],[1,"flex","flex-col","items-center","accent-border"],["itemsContainer",""],["mat-raised-button","","color","accent",1,"w-full","max-w-[340px]","mb-[32px]",3,"click"],[1,"w-full",3,"filesData","cancel"]],template:__name(function(rf,ctx){if(1&rf){const _r7=core.EpF();core.TgZ(0,"div",0)(1,"app-camera-picture-input",1,2),core.NdJ("accept",__name(function($event){return ctx.pictureAccepted.emit($event)},"NewPhotosComponent_Template_app_camera_picture_input_accept_1_listener")),core.TgZ(3,"button",3),core.NdJ("click",__name(function(){core.CHM(_r7);const _r0=core.MAs(2);return core.KtG(_r0.turnOnCamera())},"NewPhotosComponent_Template_button_click_3_listener")),core.TgZ(4,"mat-icon"),core._uU(5,"add_a_photo"),core.qZA(),core._uU(6," Make Picture "),core.qZA()(),core.TgZ(7,"app-multi-file-picker-input",4,5),core.NdJ("valueChange",__name(function($event){return ctx.files=$event},"NewPhotosComponent_Template_app_multi_file_picker_input_valueChange_7_listener"))("fileDataUrls",__name(function($event){return ctx.filesData=$event},"NewPhotosComponent_Template_app_multi_file_picker_input_fileDataUrls_7_listener")),core.TgZ(9,"button",3),core.NdJ("click",__name(function(){core.CHM(_r7);const _r1=core.MAs(8);return core.KtG(_r1.pickFiles())},"NewPhotosComponent_Template_button_click_9_listener")),core.TgZ(10,"mat-icon"),core._uU(11,"image"),core.qZA(),core._uU(12," Add new picture "),core.qZA()()(),core.YNc(13,NewPhotosComponent_div_13_Template,7,7,"div",6)}2&rf&&(core.xp6(7),core.Q6J("value",ctx.files),core.xp6(6),core.Q6J("ngIf",ctx.filesData))},"NewPhotosComponent_Template"),dependencies:[common.O5,fesm2020_button.lW,icon.Hw,MultiFilePickerInputComponent,CameraPictureInputComponent,NewPhotoListComponent],styles:['[_nghost-%COMP%]{display:block}.new-photos__container[_ngcontent-%COMP%]{display:grid}.accent-border[_ngcontent-%COMP%]{padding:16px 8px;margin-bottom:16px;perspective:800px;border:2px solid #ff4081;border-radius:8px}.new-photos__items-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;border:2px solid #ff4081;justify-items:center;border-radius:8px;overflow:hidden;gap:8px;padding:16px 8px;margin-bottom:16px;perspective:800px}@media (min-width: 500px){.new-photos__items-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}}@media (min-width: 800px){.new-photos__items-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}}.new-photos__item[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;align-items:start;max-width:310px}.new-photos__item[_ngcontent-%COMP%]:before{content:"";display:block;padding-bottom:140%}app-new-photo[_ngcontent-%COMP%]{width:100%;max-width:280px}.new-photos__upload-btn[_ngcontent-%COMP%]{grid-column:1/-1;justify-self:center;width:100%;max-width:340px}.new-photos__upload-btn-container[_ngcontent-%COMP%]{grid-column:1/-1}.new-photos__upload-btn-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%}'],data:{animation:[itemsContainerAnimationMetadata]},changeDetection:0})}function PhotosComponent_app_current_photos_3_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"app-current-photos",4),core.NdJ("deleteImage",__name(function($event){core.CHM(_r5);const ctx_r4=core.oxw();return core.KtG(ctx_r4.deleteImage($event))},"PhotosComponent_app_current_photos_3_Template_app_current_photos_deleteImage_0_listener"))("mainImageSelected",__name(function($event){core.CHM(_r5);const ctx_r6=core.oxw();return core.KtG(ctx_r6.selectNewMainImage($event))},"PhotosComponent_app_current_photos_3_Template_app_current_photos_mainImageSelected_0_listener")),core.ALo(1,"async"),core.ALo(2,"async"),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.Q6J("imagesUrls",core.lcZ(1,2,ctx_r0.images$))("mainImageUrl",core.lcZ(2,4,ctx_r0.mainImageUrl$))}}function PhotosComponent_div_4_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",5)(1,"p",6),core._uU(2,"LOADING"),core.qZA(),core._UZ(3,"app-loading-spinner",7),core.qZA())}function PhotosComponent_div_5_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",5)(1,"div",8)(2,"span"),core._uU(3,"Failed to dawnload photos. Please refresh the page or try again later"),core.qZA()()())}function PhotosComponent_div_6_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",5)(1,"div",9)(2,"span"),core._uU(3,"You don't have any photos right now. Please add some pictures to your account."),core.qZA()()())}__name(NewPhotosComponent,"NewPhotosComponent"),__name(PhotosComponent_app_current_photos_3_Template,"PhotosComponent_app_current_photos_3_Template"),__name(PhotosComponent_div_4_Template,"PhotosComponent_div_4_Template"),__name(PhotosComponent_div_5_Template,"PhotosComponent_div_5_Template"),__name(PhotosComponent_div_6_Template,"PhotosComponent_div_6_Template");class PhotosComponent extends page_component.I{constructor(_store,_photoModalService,authStateRef,imageEvents,authEvents,spinnerService){super(),this._store=_store,this._photoModalService=_photoModalService,this.cameraOpen=!1,this.StateStatus=utils.ue,this.animationState=null,this.files=null,(0,others.y)(authStateRef.state.userData),this._currentUserId=authStateRef.state.userData.userId;const spinnerAttacherFn=__name(status=>{status!==utils.XS.awaiting?spinnerService.detach():spinnerService.attach()},"spinnerAttacherFn");this.deleteImageSuccess$=imageEvents.deleting$.pipe((0,operators.bw)(spinnerAttacherFn),(0,operators.hX)(status=>status===utils.XS.resolved),(0,operators.BN)()),this.imageUploaded$=imageEvents.uploadingOne$.pipe((0,operators.bw)(spinnerAttacherFn),(0,operators.hX)(status=>status===utils.XS.resolved),(0,operators.BN)()),this.imagesUploaded$=imageEvents.uploadingMany$.pipe((0,operators.bw)(spinnerAttacherFn),(0,operators.hX)(status=>status===utils.XS.resolved),(0,operators.BN)()),this.imagesStateStatus$=imageEvents.status$,this.patchingMainImageUrl$=authEvents.updateAvatar$.pipe((0,operators.hX)(status=>status===utils.XS.awaiting||status===utils.XS.resolved),(0,operators.bw)(spinnerAttacherFn),(0,operators.UI)(status=>status===utils.XS.awaiting)),this.images$=this._store.pipe((0,ngrx_store.Ys)(appState=>appState.image.URLs),(0,operators.UP)((0,cjs.merge)(this.imageUploaded$.pipe((0,operators.bw)(()=>this.cameraOpen=!1)),this.imagesUploaded$.pipe((0,operators.bw)(()=>this.files=null)),this.deleteImageSuccess$.pipe((0,operators.bw)(()=>this._photoModalService.closePhotoModal()),(0,operators.gw)(400)),this.patchingMainImageUrl$.pipe((0,operators.bw)(()=>this._photoModalService.closePhotoModal()),(0,operators.gw)(400)),imageEvents.status$.pipe((0,operators.hX)(status=>status===utils.ue.complete),(0,operators.Ps)()))),(0,operators.BN)()),this.mainImageUrl$=this._store.pipe((0,ngrx_store.Ys)(({auth})=>{var _a;return null==(_a=auth.userData)?void 0:_a.mainPhotoUrl}))}deleteImage(index){this._store.dispatch((0,image_actions.ao)({index,info:""}))}selectNewMainImage(url){const data={userId:this._currentUserId,fieldName:db_models.o.mainPhotoUrl,newValue:url};this._store.dispatch((0,auth_actions.Nq)({data,info:"Updating user main image from app-photos component."}))}uploadPhotos(data){this._store.dispatch((0,image_actions.eg)({data,info:"Uploading images from app-photos component."}))}uplaodPhoto(data){this._store.dispatch((0,image_actions.Ix)({data,info:"Uploadfing image from app-photos component."}))}static#_=this.\u0275fac=__name(function(t){return new(t||PhotosComponent)(core.Y36(ngrx_store.yh),core.Y36(PhotoModalService),core.Y36(auth_state.Z8),core.Y36(image_effects.S),core.Y36(auth_effects.f),core.Y36(global_loading_spinner_service.j))},"PhotosComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:PhotosComponent,selectors:[["app-photos"]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&core.d8E("@hostElAnimationState",ctx.animationState)},"PhotosComponent_HostBindings"),features:[core.qOj],decls:7,vars:9,consts:[[3,"cameraOpen","files","pictureAccepted","imagesAccepted","cameraOpenChange","filesChange"],[3,"ngSwitch"],[3,"imagesUrls","mainImageUrl","deleteImage","mainImageSelected",4,"ngSwitchCase"],["class","w-full h-[65vh] bg-inherit flex flex-col items-center justify-center",4,"ngSwitchCase"],[3,"imagesUrls","mainImageUrl","deleteImage","mainImageSelected"],[1,"w-full","h-[65vh]","bg-inherit","flex","flex-col","items-center","justify-center"],[1,"photos__loading-text"],[1,"photos__loading-spinner-container","w-1/3","max-w-[200px]"],[1,"rounded-[8px]","p-[16px_8px]","mx-[16px]","text-center","border-[1px_solid_red]","mat-elevation-z6"],[1,"rounded-[8px]","bg-white","flex","p-[16px]","justify-center","items-center","text-center","mat-elevation-z6"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"app-new-photos",0),core.NdJ("pictureAccepted",__name(function($event){return ctx.uplaodPhoto($event)},"PhotosComponent_Template_app_new_photos_pictureAccepted_0_listener"))("imagesAccepted",__name(function($event){return ctx.uploadPhotos($event)},"PhotosComponent_Template_app_new_photos_imagesAccepted_0_listener"))("cameraOpenChange",__name(function($event){return ctx.cameraOpen=$event},"PhotosComponent_Template_app_new_photos_cameraOpenChange_0_listener"))("filesChange",__name(function($event){return ctx.files=$event},"PhotosComponent_Template_app_new_photos_filesChange_0_listener")),core.qZA(),core.ynx(1,1),core.ALo(2,"async"),core.YNc(3,PhotosComponent_app_current_photos_3_Template,3,6,"app-current-photos",2),core.YNc(4,PhotosComponent_div_4_Template,4,0,"div",3),core.YNc(5,PhotosComponent_div_5_Template,4,0,"div",3),core.YNc(6,PhotosComponent_div_6_Template,4,0,"div",3),core.BQk()),2&rf&&(core.Q6J("cameraOpen",ctx.cameraOpen)("files",ctx.files),core.xp6(1),core.Q6J("ngSwitch",core.lcZ(2,7,ctx.imagesStateStatus$)),core.xp6(2),core.Q6J("ngSwitchCase","complete"),core.xp6(1),core.Q6J("ngSwitchCase",ctx.StateStatus.pending),core.xp6(1),core.Q6J("ngSwitchCase",ctx.StateStatus.error),core.xp6(1),core.Q6J("ngSwitchCase",ctx.StateStatus.empty))},"PhotosComponent_Template"),dependencies:[loading_spinner_component.g,common.RF,common.n9,CurrentPhotosComponent,NewPhotosComponent,common.Ov],styles:["[_nghost-%COMP%]{display:block;grid-row:1/span 1;grid-column:1/span 1;width:100%;margin:0 auto;max-width:1200px}.photos__loading-text[_ngcontent-%COMP%]{font-weight:600;text-align:center;margin:16px;animation:_ngcontent-%COMP%_loading-text-animation .4s alternate infinite}@keyframes _ngcontent-%COMP%_loading-text-animation{0%{opacity:0}to{opacity:100%}}"],data:{animation:[(0,animations.X$)("hostElAnimationState",[(0,animations.eR)(":leave",[(0,animations.ru)([(0,animations.IO)("app-photo",(0,animations.jt)("300ms ease-out",(0,animations.oB)({transform:"scale(0)",opacity:0})),{optional:!0}),(0,animations.IO)("app-new-photo",[(0,animations.jt)("400ms ease-in-out",(0,animations.oB)({transform:"rotateY(320deg) scale(0)"}))],{optional:!0}),(0,animations.IO)(".new-photos__upload-btn",[(0,ng_animations.SEG)("300ms","0ms")],{optional:!0}),(0,animations.IO)("app-camera-picture-input",[(0,ng_animations.qUF)("300ms","0ms")],{optional:!0}),(0,animations.IO)("app-multi-file-picker-input",[(0,ng_animations.Gzh)("300ms","0ms")],{optional:!0})])]),(0,animations.eR)(":enter",[(0,animations.ru)([(0,animations.IO)("app-camera-picture-input",[ng_animations.PYX.startState,(0,ng_animations.PYX)("400ms","400ms")],{optional:!0}),(0,animations.IO)("app-multi-file-picker-input",[ng_animations.MeT.startState,(0,ng_animations.MeT)("400ms","400ms")],{optional:!0})])])])]},changeDetection:0})}__name(PhotosComponent,"PhotosComponent");class UserDetailsService{constructor(_formBuilder){this._formBuilder=_formBuilder}getControls(authModel,lateSanitizationNotifier){const controls={firstName:this._formBuilder.control(authModel.firstName,[(0,form_helper.mr)(fesm2020_forms.kI.required,"First Name is required!"),(0,form_helper.mr)(fesm2020_forms.kI.minLength(3),"First Name must contain minimum 3 characters!"),(0,form_helper.aq)("First name must contain alphabetic charactrs!")]),lastName:this._formBuilder.control(authModel.lastName,[(0,form_helper.mr)(fesm2020_forms.kI.required,"Last Name is required!"),(0,form_helper.mr)(fesm2020_forms.kI.minLength(3),"Last Name must contain minimum 3 characters!"),(0,form_helper.aq)("Last name must contain alphabetic charactrs!")]),nickName:this._formBuilder.control(authModel.nickName,[(0,form_helper.mr)(fesm2020_forms.kI.required,"Your nick name is required!"),(0,form_helper.mr)(fesm2020_forms.kI.minLength(3),"Your nick name is to short. Minimum count of characters is 3!"),(0,form_helper.aq)("Your nick name must contain alphabetic charactrs!")]),email:this._formBuilder.control(authModel.email,[(0,form_helper.mr)(fesm2020_forms.kI.required,"E-mail address is required!"),(0,form_helper.mr)(fesm2020_forms.kI.email,"Incorect format of address e-mail!")]),dateOfBirth:this._formBuilder.control(authModel.dateOfBirth,[(0,form_helper.mr)(fesm2020_forms.kI.required,"Your date of birth is required!"),(0,form_helper.zD)("yyyy-MM-dd","Invalid format of data!"),(0,form_helper.KU)(18,"yyyy-MM-dd","You must be at least 18 years old to hava an accout on this webside!")]),aboutMySelf:this._formBuilder.control(authModel.aboutMySelf??""),city:this._formBuilder.control(authModel.city??"",[(0,form_helper.mr)(fesm2020_forms.kI.required,"City is required!"),(0,form_helper.aq)("City must contain alphabetick characters!",!0)]),street:this._formBuilder.control(authModel.street??"",[(0,form_helper.mr)(fesm2020_forms.kI.required,"Street is required!"),(0,form_helper.u$)("Street can contain only alphanumeric or numeric characters, incuding white spaces. No dots allowed!",!0)]),state:this._formBuilder.control(authModel.state??"",[(0,form_helper.mr)(fesm2020_forms.kI.required,"State is required!"),(0,form_helper.aq)("State must contain alphabetick characters!",!0)]),country:this._formBuilder.control(authModel.country??"")},subscription=new cjs.Subscription;return subscription.add((0,form_helper.y1)(controls.firstName)),subscription.add((0,form_helper.y1)(controls.lastName)),subscription.add((0,form_helper.y1)(controls.nickName)),subscription.add((0,form_helper.j1)(controls.email)),subscription.add((0,form_helper.j1)(controls.city,lateSanitizationNotifier)),subscription.add((0,form_helper.j1)(controls.street,lateSanitizationNotifier)),subscription.add((0,form_helper.j1)(controls.state,lateSanitizationNotifier)),subscription.add((0,form_helper.j1)(controls.country,lateSanitizationNotifier)),{controls,dispose:()=>subscription.unsubscribe()}}getBasicFiledNames(){return["firstName","lastName","nickName","email","dateOfBirth","aboutMySelf"]}getBasicLabels(){return["First name","Last name","Nick name","Address e-mail","Date of birth","About my self"]}getAddressInfoFiledNames(){return["city","street","state","country"]}getAddressInfoLabels(){return["City","Street","State","Country"]}update(controls,model){controls.firstName.value!==model.firstName&&controls.firstName.setValue(model.firstName),controls.lastName.value!==model.lastName&&controls.firstName.setValue(model.lastName),controls.nickName.value!==model.nickName&&controls.nickName.setValue(model.nickName),controls.email.value!==model.email&&controls.email.setValue(model.email),controls.dateOfBirth.value!==model.dateOfBirth&&controls.dateOfBirth.setValue(model.dateOfBirth),controls.aboutMySelf.value!==model.aboutMySelf&&controls.aboutMySelf.setValue(model.aboutMySelf??""),controls.city.value!==model.city&&controls.city.setValue(model.city??""),controls.street.value!==model.street&&controls.street.setValue(model.street??""),controls.state.value!==model.state&&controls.state.setValue(model.state??""),controls.country.value!==model.country&&controls.country.setValue(model.country??"")}static#_=this.\u0275fac=__name(function(t){return new(t||UserDetailsService)(core.LFG(fesm2020_forms.j3))},"UserDetailsService_Factory");static#_2=this.\u0275prov=core.Yz7({token:UserDetailsService,factory:UserDetailsService.\u0275fac})}__name(UserDetailsService,"UserDetailsService");var validation_service=__webpack_require__(41346),fesm2020_checkbox=__webpack_require__(97116);class AddressInfoService{constructor(_formBuilder){this._formBuilder=_formBuilder}getFormGroup(sanitizationTrigger){const formGroup=this._formBuilder.group({city:this._formBuilder.control("",[(0,form_helper.mr)(fesm2020_forms.kI.required,"City is required!"),(0,form_helper.aq)("City must contain alphabetick characters!",!0)]),street:this._formBuilder.control("",[(0,form_helper.mr)(fesm2020_forms.kI.required,"Street is required!"),(0,form_helper.u$)("Street can contain only alphanumeric or numeric characters, incuding white spaces. No dots allowed!",!0)]),state:this._formBuilder.control("",[(0,form_helper.mr)(fesm2020_forms.kI.required,"State is required!"),(0,form_helper.aq)("State must contain alphabetick characters!",!0)]),country:this._formBuilder.control("",[(0,form_helper.mr)(fesm2020_forms.kI.required,"Conutry is required!"),(0,form_helper.aq)("Country must contain alphabetick characters!",!0)])}),subscription=new cjs.Subscription;return subscription.add((0,form_helper.j1)(formGroup.controls.city,sanitizationTrigger)),subscription.add((0,form_helper.j1)(formGroup.controls.street,sanitizationTrigger)),subscription.add((0,form_helper.j1)(formGroup.controls.state,sanitizationTrigger)),subscription.add((0,form_helper.j1)(formGroup.controls.country,sanitizationTrigger)),{formGroup,dispose:()=>subscription.unsubscribe()}}static#_=this.\u0275fac=__name(function(t){return new(t||AddressInfoService)(core.LFG(fesm2020_forms.j3))},"AddressInfoService_Factory");static#_2=this.\u0275prov=core.Yz7({token:AddressInfoService,factory:AddressInfoService.\u0275fac})}function AddressInfoFormComponent_mat_error_5_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-error"),core._uU(1),core.qZA()),2&rf){const error_r4=ctx.$implicit;core.xp6(1),core.Oqu(error_r4.message)}}function AddressInfoFormComponent_mat_error_10_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-error"),core._uU(1),core.qZA()),2&rf){const error_r5=ctx.$implicit;core.xp6(1),core.Oqu(error_r5.message)}}function AddressInfoFormComponent_mat_error_15_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-error"),core._uU(1),core.qZA()),2&rf){const error_r6=ctx.$implicit;core.xp6(1),core.Oqu(error_r6.message)}}function AddressInfoFormComponent_mat_error_20_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-error"),core._uU(1),core.qZA()),2&rf){const error_r7=ctx.$implicit;core.xp6(1),core.Oqu(error_r7.message)}}__name(AddressInfoService,"AddressInfoService"),__name(AddressInfoFormComponent_mat_error_5_Template,"AddressInfoFormComponent_mat_error_5_Template"),__name(AddressInfoFormComponent_mat_error_10_Template,"AddressInfoFormComponent_mat_error_10_Template"),__name(AddressInfoFormComponent_mat_error_15_Template,"AddressInfoFormComponent_mat_error_15_Template"),__name(AddressInfoFormComponent_mat_error_20_Template,"AddressInfoFormComponent_mat_error_20_Template");const address_info_form_component_formAnimationMetadata=(0,animations.X$)("form",[(0,animations.eR)(":enter",[(0,animations.ru)([(0,animations.IO)("@*",[(0,animations.pV)()]),(0,animations.IO)("mat-form-field:nth-of-type(odd)",[ng_animations.MeT.startState,(0,animations.EY)(150,(0,ng_animations.MeT)("300ms","0ms"))],{optional:!0}),(0,animations.IO)("mat-form-field:nth-of-type(even)",[ng_animations.PYX.startState,(0,animations.EY)(150,(0,ng_animations.PYX)("300ms","150ms"))],{optional:!0})])]),(0,animations.eR)(":leave",[(0,animations.ru)([(0,animations.IO)("@*",[(0,animations.pV)()]),(0,animations.IO)("mat-form-field:nth-of-type(odd)",[ng_animations.Gzh.startState,(0,animations.EY)(150,(0,ng_animations.Gzh)("300ms","0ms"))],{optional:!0}),(0,animations.IO)("mat-form-field:nth-of-type(even)",[ng_animations.qUF.startState,(0,animations.EY)(150,(0,ng_animations.qUF)("300ms","150ms"))],{optional:!0})])])]),address_info_form_component_btnGroupAnimationMetadata=(0,animations.X$)("btnGroup",[(0,animations.eR)(":enter",(0,ng_animations.AT5)("800ms","150ms")),(0,animations.eR)(":leave",(0,ng_animations.dGT)("800ms","150ms"))]);class AddressInfoFormComponent{constructor(addressInfoService){this._subscrition=new cjs.Subscription,this.addressFormSubmited=new core.vpe;const sampler=new cjs.Subject,{formGroup,dispose}=addressInfoService.getFormGroup(sampler);this.formGroup=formGroup,this._subscrition.add(dispose),this.formSubmitter=new form_helper.dT(this.formGroup),this.formSubmitter.submitSuccess.subscribe(()=>{sampler.next(),this.addressFormSubmited.emit(this.formGroup.getRawValue())})}ngOnDestroy(){this._subscrition.unsubscribe()}static#_=this.\u0275fac=__name(function(t){return new(t||AddressInfoFormComponent)(core.Y36(AddressInfoService))},"AddressInfoFormComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:AddressInfoFormComponent,selectors:[["app-address-info-form"]],outputs:{addressFormSubmited:"addressFormSubmited"},decls:27,vars:10,consts:[[1,"grid","justify-self-center","w-full",3,"formGroup","ngSubmit"],["appearance","fill","color","accent"],["type","text","matInput","","formControlName","city","name","city"],[4,"appFirstKeyOf"],["type","text","matInput","","formControlName","street","name","street"],["type","text","matInput","","formControlName","state","name","state"],["type","text","matInput","","formControlName","country","name","country"],[1,"grid","grid-flow-col","mb-[16px]","gap-[8px]"],["mat-raised-button","","color","primary","type","submit",1,"padding-4",3,"disabled"],["mat-raised-button","","color","warn","type","button",1,"padding-4"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"form",0),core.NdJ("ngSubmit",__name(function(){return ctx.formSubmitter.trySubmit()},"AddressInfoFormComponent_Template_form_ngSubmit_0_listener")),core.TgZ(1,"mat-form-field",1)(2,"mat-label"),core._uU(3,"City"),core.qZA(),core._UZ(4,"input",2),core.YNc(5,AddressInfoFormComponent_mat_error_5_Template,2,1,"mat-error",3),core.qZA(),core.TgZ(6,"mat-form-field",1)(7,"mat-label"),core._uU(8,"Street"),core.qZA(),core._UZ(9,"input",4),core.YNc(10,AddressInfoFormComponent_mat_error_10_Template,2,1,"mat-error",3),core.qZA(),core.TgZ(11,"mat-form-field",1)(12,"mat-label"),core._uU(13,"State"),core.qZA(),core._UZ(14,"input",5),core.YNc(15,AddressInfoFormComponent_mat_error_15_Template,2,1,"mat-error",3),core.qZA(),core.TgZ(16,"mat-form-field",1)(17,"mat-label"),core._uU(18,"Country"),core.qZA(),core._UZ(19,"input",6),core.YNc(20,AddressInfoFormComponent_mat_error_20_Template,2,1,"mat-error",3),core.qZA(),core.TgZ(21,"div",7)(22,"button",8),core.ALo(23,"async"),core._uU(24,"Save"),core.qZA(),core.TgZ(25,"button",9),core._uU(26,"Cancel"),core.qZA()()()),2&rf&&(core.Q6J("formGroup",ctx.formGroup)("@form",void 0),core.xp6(5),core.Q6J("appFirstKeyOf",ctx.formGroup.controls.city.errors),core.xp6(5),core.Q6J("appFirstKeyOf",ctx.formGroup.controls.street.errors),core.xp6(5),core.Q6J("appFirstKeyOf",ctx.formGroup.controls.state.errors),core.xp6(5),core.Q6J("appFirstKeyOf",ctx.formGroup.controls.country.errors),core.xp6(1),core.Q6J("@btnGroup",void 0),core.xp6(1),core.Q6J("disabled",core.lcZ(23,8,ctx.formSubmitter.submitDisabled$)))},"AddressInfoFormComponent_Template"),dependencies:[first_key_of_directive.E,fesm2020_button.lW,form_field.KE,form_field.hX,form_field.TO,input.Nt,fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.sg,fesm2020_forms.u,common.Ov],data:{animation:[address_info_form_component_formAnimationMetadata,address_info_form_component_btnGroupAnimationMetadata]},changeDetection:0})}__name(AddressInfoFormComponent,"AddressInfoFormComponent");var date_picker_input_directive=__webpack_require__(30305),text_field=__webpack_require__(41459);class FocusDirective{constructor(hostRef,platformId){this.hostRef=hostRef,this.platformId=platformId}set focus(value){!(0,common.NF)(this.platformId)||!value||this.hostRef.nativeElement.focus()}static#_=this.\u0275fac=__name(function(t){return new(t||FocusDirective)(core.Y36(core.SBq),core.Y36(core.Lbi))},"FocusDirective_Factory");static#_2=this.\u0275dir=core.lG2({type:FocusDirective,selectors:[["","appFocus",""]],inputs:{focus:["appFocus","focus"]}})}__name(FocusDirective,"FocusDirective");const user_detail_component_c0=["name","","isDate","","multiline","","label","","control",""];function UserDetailComponent_div_11_Template(rf,ctx){1&rf&&core._UZ(0,"div",16)}function UserDetailComponent_div_12_Template(rf,ctx){1&rf&&core._UZ(0,"div",17)}function UserDetailComponent_div_13_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",18)(1,"div",19)(2,"mat-icon",20),core._uU(3,"refresh"),core.qZA(),core._uU(4," Checking availability "),core.qZA()())}function UserDetailComponent_mat_form_field_16_mat_error_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-error"),core._uU(1),core.qZA()),2&rf){const error_r11=ctx.$implicit;core.xp6(1),core.Oqu(error_r11)}}function UserDetailComponent_mat_form_field_16_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-form-field",21),core._UZ(1,"input",22),core.YNc(2,UserDetailComponent_mat_form_field_16_mat_error_2_Template,2,1,"mat-error",23),core.qZA()),2&rf){const ctx_r6=core.oxw();core.xp6(1),core.Q6J("name",ctx_r6.name)("formControlName",ctx_r6.name)("appFocus",ctx_r6.focus),core.xp6(1),core.Q6J("appFirstKeyOf",ctx_r6.form.controls[ctx_r6.name].errors)}}function UserDetailComponent_mat_form_field_17_mat_error_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-error"),core._uU(1),core.qZA()),2&rf){const error_r13=ctx.$implicit;core.xp6(1),core.Oqu(error_r13)}}function UserDetailComponent_mat_form_field_17_Template(rf,ctx){if(1&rf){const _r15=core.EpF();core.TgZ(0,"mat-form-field",21)(1,"input",24),core.NdJ("dateSelected",__name(function($event){core.CHM(_r15);const ctx_r14=core.oxw();return core.KtG(ctx_r14.form.controls[ctx_r14.name].setValue($event))},"UserDetailComponent_mat_form_field_17_Template_input_dateSelected_1_listener")),core.qZA(),core.YNc(2,UserDetailComponent_mat_form_field_17_mat_error_2_Template,2,1,"mat-error",23),core.qZA()}if(2&rf){const ctx_r7=core.oxw();core.xp6(1),core.Q6J("name",ctx_r7.name)("formControlName",ctx_r7.name)("appFocus",ctx_r7.focus),core.xp6(1),core.Q6J("appFirstKeyOf",ctx_r7.form.controls[ctx_r7.name].errors)}}function UserDetailComponent_mat_form_field_18_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-form-field",21),core._UZ(1,"textarea",25),core.qZA()),2&rf){const ctx_r8=core.oxw();core.xp6(1),core.Q6J("name",ctx_r8.name)("formControlName",ctx_r8.name)("appFocus",ctx_r8.focus)("cdkAutosizeMinRows",10)}}function UserDetailComponent_div_27_Template(rf,ctx){1&rf&&core._UZ(0,"div",26)}__name(UserDetailComponent_div_11_Template,"UserDetailComponent_div_11_Template"),__name(UserDetailComponent_div_12_Template,"UserDetailComponent_div_12_Template"),__name(UserDetailComponent_div_13_Template,"UserDetailComponent_div_13_Template"),__name(UserDetailComponent_mat_form_field_16_mat_error_2_Template,"UserDetailComponent_mat_form_field_16_mat_error_2_Template"),__name(UserDetailComponent_mat_form_field_16_Template,"UserDetailComponent_mat_form_field_16_Template"),__name(UserDetailComponent_mat_form_field_17_mat_error_2_Template,"UserDetailComponent_mat_form_field_17_mat_error_2_Template"),__name(UserDetailComponent_mat_form_field_17_Template,"UserDetailComponent_mat_form_field_17_Template"),__name(UserDetailComponent_mat_form_field_18_Template,"UserDetailComponent_mat_form_field_18_Template"),__name(UserDetailComponent_div_27_Template,"UserDetailComponent_div_27_Template");const user_detail_component_c1=__name(function(a0,a1){return{onEditOffHeight:a0,onEditOnHeight:a1}},"user_detail_component_c1"),_c2=__name(function(a0,a1){return{value:a0,params:a1}},"_c2"),calendarContainerAnimationMetadata=(0,animations.X$)("calendarContainer",[(0,animations.eR)(":enter",[(0,animations.ru)([(0,animations.IO)(".calendar-backdrop",[(0,animations.oB)({opacity:0}),(0,animations.jt)("300ms ease-out",(0,animations.oB)({opacity:1}))]),(0,animations.IO)(".calendar-card",[(0,animations.oB)({opacity:0,transform:"scale(0.9)"}),(0,animations.jt)("300ms ease-out",(0,animations.oB)({opacity:1,transform:"scale(1)"}))])])]),(0,animations.eR)(":leave",[(0,animations.ru)([(0,animations.IO)(".calendar-backdrop",[(0,animations.oB)({opacity:1}),(0,animations.jt)("300ms ease-out",(0,animations.oB)({opacity:0}))]),(0,animations.IO)(".calendar-card",[(0,animations.oB)({opacity:1,transform:"scale(1)"}),(0,animations.jt)("300ms ease-out",(0,animations.oB)({opacity:0,transform:"scale(0.9)"}))])])])]),userDetailAnimationMetadata=(0,animations.X$)("userDetail",[(0,animations.eR)("false => true",[(0,animations.ru)([(0,animations.IO)("@*",(0,animations.pV)()),(0,animations.oB)({height:"{{onEditOffHeight}}px"}),(0,animations.jt)("300ms ease-out",(0,animations.oB)({height:"{{onEditOnHeight}}px"}))])]),(0,animations.eR)("true => false",[(0,animations.ru)([(0,animations.oB)({height:"{{onEditOnHeight}}px"}),(0,animations.jt)("300ms ease-out",(0,animations.oB)({height:"{{onEditOffHeight}}px"})),(0,animations.IO)("@*",(0,animations.pV)())])])]),labelAnimationMetadata=(0,animations.X$)("label",[(0,animations.SB)("false",(0,animations.oB)({opacity:1,visibility:"visible"})),(0,animations.SB)("true",(0,animations.oB)({opacity:0,visibility:"hidden"})),(0,animations.eR)("false <=> true",(0,animations.jt)("300ms ease-out"))]),editFormAnimationMetadata=(0,animations.X$)("editForm",[(0,animations.SB)("false",(0,animations.oB)({opacity:0,visibility:"hidden"})),(0,animations.SB)("true",(0,animations.oB)({opacity:1,visibility:"visible"})),(0,animations.eR)("false <=> true",(0,animations.jt)("300ms ease-out"))]);class UserDetailComponent{constructor(formBuilder,changeDetectorRef){this._destroy$=new cjs.Subject,this.edit=!1,this.focus=!1,this.calendarOpened=!1,this.avatarPending=!1,this._pending=!1,this.name=null,this.label=null,this.multiline=null,this.isDate=null,this.control=null,this.detailSubmit=new core.vpe,this.detailCancel=new core.vpe,this.form=formBuilder.group({}),UserDetailComponent._onEdit.pipe((0,operators.Rs)(this._destroy$)).subscribe(name=>{this.name!=name&&this.edit&&(this.edit=!1,changeDetectorRef.markForCheck())}),this.formSubmitter=new form_helper.dT(this.form),this.formSubmitter.submitSuccess.subscribe(()=>{this.detailSubmit.emit(this.name)})}static#_=this._onEdit=new cjs.Subject;get pending(){return this._pending}set pending(value){this._pending=value,!value&&this.edit&&(this.edit=!1)}ngOnChanges(changes){changes.control&&(this.control&&this.form.removeControl(this.name),this.form.addControl(this.name,this.control))}ngOnDestroy(){this.formSubmitter.dispose(),this._destroy$.next(),this._destroy$.complete()}onAnimationDone(){this.focus=this.edit}onEditButtonClick(){UserDetailComponent._onEdit.next(this.name),this.edit=!0}onCancel(){var _a,_b;this.edit=!1,this.detailCancel.emit(this.name),null==(_a=this.control)||_a.markAsUntouched(),null==(_b=this.control)||_b.markAsPristine()}static#_2=this.\u0275fac=__name(function(t){return new(t||UserDetailComponent)(core.Y36(fesm2020_forms.j3),core.Y36(core.sBO))},"UserDetailComponent_Factory");static#_3=this.\u0275cmp=core.Xpm({type:UserDetailComponent,selectors:[["app-user-detail","name","","isDate","","multiline","","label","","control",""]],inputs:{pending:"pending",name:"name",label:"label",multiline:"multiline",isDate:"isDate",control:"control"},outputs:{detailSubmit:"detailSubmit",detailCancel:"detailCancel"},features:[core.TTD],attrs:user_detail_component_c0,decls:28,vars:33,consts:[[1,"user-detalis__container","relative","overflow-hidden","mat-elevation-z4"],["container",""],[1,"absolute","grid","w-[90%]","mx-auto","grid-cols-[1fr_auto]","grid-rows-[auto_1fr]","grid-flow-col","top-[16px]","left-[5%]"],["detailLabel",""],[1,"self-center","text-[16px]","row-[1/2]"],["mat-raised-button","","color","primary",1,"min-w-[0_!important]","p-[0_!importat]","w-[50px_!important]","row-[1/2]",3,"click"],["class","absolute bg-[rgba(0,0,0,.15)] z-10 w-full h-full",4,"ngIf"],["class","state-pending-indicator absolute w-[50%] h-full z-10",4,"ngIf"],["class","control-pending-presenter absolute w-full h-full text-green-300 bg-[rgba(0,0,0,0.15)] z-10 ",4,"ngIf"],[1,"grid","absolute","w-[90%]","m-[0_auto_8px_auto]","top-[16px]","left-[5%]",3,"formGroup","ngSubmit"],["editForm",""],["appearance","outline",4,"ngIf"],[1,"grid","grid-flow-col","justify-end","gap-[8px]"],["mat-raised-button","","color","primary","type","submit",1,"min-w-[0_!important]","p-[0_!importat]","w-[50px_!important]",3,"disabled"],["mat-raised-button","","type","button","color","warn","type","button",1,"min-w-[0_!important]","p-[0_!importat]","w-[50px_!important]",3,"disabled","click"],["class","mask absolute bottom-0 left-0 w-full h-[40%]",4,"ngIf"],[1,"absolute","bg-[rgba(0,0,0,.15)]","z-10","w-full","h-full"],[1,"state-pending-indicator","absolute","w-[50%]","h-full","z-10"],[1,"control-pending-presenter","absolute","w-full","h-full","text-green-300","bg-[rgba(0,0,0,0.15)]","z-10"],[1,"row-center"],[1,"control-pending-indicator"],["appearance","outline"],["type","text","matInput","",3,"name","formControlName","appFocus"],[4,"appFirstKeyOf"],["type","text","matInput","","datepicker","yyyy-MM-dd","readonly","",3,"name","formControlName","appFocus","dateSelected"],["matInput","","cdkTextareaAutosize","",3,"name","formControlName","appFocus","cdkAutosizeMinRows"],[1,"mask","absolute","bottom-0","left-0","w-full","h-[40%]"]],template:__name(function(rf,ctx){if(1&rf){const _r16=core.EpF();core.TgZ(0,"div",0,1),core.NdJ("@userDetail.done",__name(function(){core.CHM(_r16);const _r0=core.MAs(1),_r5=core.MAs(15),_r1=core.MAs(3);return core.KtG(ctx.edit?_r0.style.height=_r5.clientHeight+32+"px":_r0.style.height=_r1.clientHeight+32+"px")},"UserDetailComponent_Template_div_animation_userDetail_done_0_listener")),core.TgZ(2,"div",2,3)(4,"span",4),core._uU(5),core.TgZ(6,"span"),core._uU(7),core.qZA()(),core.TgZ(8,"button",5),core.NdJ("click",__name(function(){return ctx.onEditButtonClick()},"UserDetailComponent_Template_button_click_8_listener")),core.TgZ(9,"mat-icon"),core._uU(10,"upgrade"),core.qZA()()(),core.YNc(11,UserDetailComponent_div_11_Template,1,0,"div",6),core.YNc(12,UserDetailComponent_div_12_Template,1,0,"div",7),core.YNc(13,UserDetailComponent_div_13_Template,5,0,"div",8),core.TgZ(14,"form",9,10),core.NdJ("@editForm.done",__name(function(){return ctx.onAnimationDone()},"UserDetailComponent_Template_form_animation_editForm_done_14_listener"))("ngSubmit",__name(function(){return ctx.formSubmitter.trySubmit()},"UserDetailComponent_Template_form_ngSubmit_14_listener")),core.YNc(16,UserDetailComponent_mat_form_field_16_Template,3,4,"mat-form-field",11),core.YNc(17,UserDetailComponent_mat_form_field_17_Template,3,4,"mat-form-field",11),core.YNc(18,UserDetailComponent_mat_form_field_18_Template,2,4,"mat-form-field",11),core.TgZ(19,"div",12)(20,"button",13),core.ALo(21,"async"),core.TgZ(22,"mat-icon"),core._uU(23,"upgrade"),core.qZA()(),core.TgZ(24,"button",14),core.NdJ("click",__name(function(){return ctx.onCancel()},"UserDetailComponent_Template_button_click_24_listener")),core.TgZ(25,"mat-icon"),core._uU(26,"cancel"),core.qZA()()()(),core.YNc(27,UserDetailComponent_div_27_Template,1,0,"div",15),core.qZA()}if(2&rf){const _r1=core.MAs(3),_r5=core.MAs(15);core.Udp("max-height","aboutMySelf"===ctx.name?"268px":""),core.ekj("border-2",ctx.form.controls[ctx.name].pending&&ctx.edit)("border-green-300",ctx.form.controls[ctx.name].pending&&ctx.edit),core.Q6J("@userDetail",core.WLB(30,_c2,ctx.edit,core.WLB(27,user_detail_component_c1,_r1.clientHeight+32,_r5.clientHeight+32))),core.xp6(2),core.Udp("visibility",ctx.edit?"hidden":""),core.Q6J("@label",ctx.edit),core.xp6(3),core.hij("",ctx.label,": "),core.xp6(2),core.Oqu(ctx.control.value),core.xp6(4),core.Q6J("ngIf",ctx.pending),core.xp6(1),core.Q6J("ngIf",ctx.pending),core.xp6(1),core.Q6J("ngIf",ctx.form.controls[ctx.name].pending&&ctx.edit),core.xp6(1),core.Udp("visibility",ctx.edit?"":"hidden"),core.Q6J("formGroup",ctx.form)("@editForm",ctx.edit),core.xp6(2),core.Q6J("ngIf",!ctx.multiline&&!ctx.isDate),core.xp6(1),core.Q6J("ngIf",ctx.isDate),core.xp6(1),core.Q6J("ngIf",ctx.multiline&&!ctx.isDate),core.xp6(2),core.Q6J("disabled",core.lcZ(21,25,ctx.formSubmitter.submitDisabled$)||ctx.pending),core.xp6(4),core.Q6J("disabled",ctx.pending),core.xp6(3),core.Q6J("ngIf","aboutMySelf"===ctx.name)}},"UserDetailComponent_Template"),dependencies:[first_key_of_directive.E,date_picker_input_directive.a,common.O5,fesm2020_button.lW,icon.Hw,form_field.KE,form_field.TO,input.Nt,text_field.IC,fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.sg,fesm2020_forms.u,FocusDirective,common.Ov],styles:["[_nghost-%COMP%]{display:block;overflow:hidden}.state-pending-indicator[_ngcontent-%COMP%]{background-image:linear-gradient(to right,transparent,#6200ea,transparent);animation:_ngcontent-%COMP%_pending-indicator-animation 1s alternate infinite}.user-detalis__container[_ngcontent-%COMP%]{background-color:#ffa6c4}mat-icon[_ngcontent-%COMP%]{margin:0!important}.control-pending-presenter[_ngcontent-%COMP%]{text-shadow:2px 2px rgba(0,0,0,.15)}.control-pending-indicator[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_access-availability-animation 1s linear infinite}.mask[_ngcontent-%COMP%]{background-image:linear-gradient(to bottom,transparent,#ffa6c4 80%)}@keyframes _ngcontent-%COMP%_access-availability-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pending-indicator-animation{0%{left:-50%}to{left:100%}}"],data:{animation:[calendarContainerAnimationMetadata,userDetailAnimationMetadata,labelAnimationMetadata,editFormAnimationMetadata]},changeDetection:0})}__name(UserDetailComponent,"UserDetailComponent");const auth_user_field_list_component_c0=["fieldNames","","controls","","labels","","pendingFieldName",""];function AuthUserFieldListComponent_app_user_detail_0_Template(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"app-user-detail",1),core.NdJ("detailSubmit",__name(function(){const fieldName_r1=core.CHM(_r4).$implicit,ctx_r3=core.oxw();return core.KtG(ctx_r3.detailSubmit.emit(fieldName_r1))},"AuthUserFieldListComponent_app_user_detail_0_Template_app_user_detail_detailSubmit_0_listener"))("detailCancel",__name(function(){core.CHM(_r4);const ctx_r5=core.oxw();return core.KtG(ctx_r5.detailCancel.emit())},"AuthUserFieldListComponent_app_user_detail_0_Template_app_user_detail_detailCancel_0_listener")),core.qZA()}if(2&rf){const fieldName_r1=ctx.$implicit,i_r2=ctx.index,ctx_r0=core.oxw();core.Q6J("name",fieldName_r1)("label",ctx_r0.labels[i_r2])("control",ctx_r0.controls[fieldName_r1])("multiline","aboutMySelf"===fieldName_r1)("isDate","dateOfBirth"===fieldName_r1)("pending",ctx_r0.pendingFieldName===fieldName_r1)}}__name(AuthUserFieldListComponent_app_user_detail_0_Template,"AuthUserFieldListComponent_app_user_detail_0_Template");class AuthUserFieldListComponent{constructor(){this.pendingFieldName=null,this.detailSubmit=new core.vpe,this.detailCancel=new core.vpe}static#_=this.\u0275fac=__name(function(t){return new(t||AuthUserFieldListComponent)},"AuthUserFieldListComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:AuthUserFieldListComponent,selectors:[["app-auth-user-field-list","fieldNames","","controls","","labels","","pendingFieldName",""]],inputs:{fieldNames:"fieldNames",controls:"controls",labels:"labels",pendingFieldName:"pendingFieldName"},outputs:{detailSubmit:"detailSubmit",detailCancel:"detailCancel"},attrs:auth_user_field_list_component_c0,decls:1,vars:1,consts:[["class","justify-self-center my-[16px] w-full max-w-[430px] mat-elevation-z3",3,"name","label","control","multiline","isDate","pending","detailSubmit","detailCancel",4,"ngFor","ngForOf"],[1,"justify-self-center","my-[16px]","w-full","max-w-[430px]","mat-elevation-z3",3,"name","label","control","multiline","isDate","pending","detailSubmit","detailCancel"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,AuthUserFieldListComponent_app_user_detail_0_Template,1,6,"app-user-detail",0),2&rf&&core.Q6J("ngForOf",ctx.fieldNames)},"AuthUserFieldListComponent_Template"),dependencies:[common.sg,UserDetailComponent],styles:["[_nghost-%COMP%]{display:grid}app-auth-user-field-list[_nghost-%COMP%]{display:grid}"],changeDetection:0})}__name(AuthUserFieldListComponent,"AuthUserFieldListComponent");const file_picker_input_component_c0=["fileInput"],file_picker_input_component_c1=["*"];class FilePickerInputComponent{constructor(changeDetectorRef,renderer){this.changeDetectorRef=changeDetectorRef,this.renderer=renderer,this._readDataUrl=!1,this._fileDataUrl=null,this._loading=!1,this._value=null,this._fileInput=null,this.fileDataUrl=new core.vpe,this.fileDeleted=new core.vpe,this.loadFileDataUrlFailed=new core.vpe,this.valueChange=new core.vpe}set readDataUrl(value){this._fileDataUrl!==value&&(this._readDataUrl=(0,coerction_and_types.ll)(value),!value&&this._fileDataUrl&&(this._fileDataUrl=null,this.fileDataUrl.observed&&Promise.resolve().then(()=>{this.fileDataUrl.emit(null),this.changeDetectorRef.markForCheck()})))}get readDataUrl(){return this._readDataUrl}set value(file){this._value!==file&&(file?this._setValue(this.value):file||!this.fileDataUrl.observed&&!this.fileDeleted.observed?this._setValue(null):Promise.resolve().then(()=>{this._setValue(null),this.changeDetectorRef.markForCheck()}))}get value(){return this._value}get loading(){return this._loading}ngAfterViewInit(){this.renderer.listen(this._fileInput.nativeElement,"input",()=>{const files=this._fileInput.nativeElement.files;null!=files&&files.length>0&&(this._setValue(files.item(0)),this._fileInput.nativeElement.value="")})}writeValue(obj){this._setValue(obj,!1)}registerOnChange(fn){this._onChange=fn}registerOnTouched(fn){this._onTouched=fn}removeFile(){this._setValue(null)}pickFile(){if(!this._fileInput)throw new Error("<app-file-picker-input>: Attempting to pick up file before view initialized! ");this._fileInput.nativeElement.click(),this._onTouched&&this._onTouched()}_setValue(newValue,riseOnChange=!0){if(this._value===newValue)return;let dataUrlChange=!1;this._value=newValue,this._value?this._readDataUrl&&this._readFileAsDataUrl(this._value):(dataUrlChange=this._readDataUrl&&null!=this._fileDataUrl,this._fileDataUrl=null),this.valueChange.emit(this._value),riseOnChange&&this._onChange&&this._onChange(this._value),dataUrlChange&&this.fileDataUrl.emit(this._fileDataUrl),null===this._value&&this.fileDeleted.emit(),this.changeDetectorRef.markForCheck()}_readFileAsDataUrl(file){const fileReader=new FileReader;this._loading=!0,fileReader.onload=event=>{this._loading=!1;const result=event.target&&event.target.result;result instanceof ArrayBuffer?this._fileDataUrl=btoa(new Uint8Array(result).reduce((data,byte)=>data+String.fromCharCode(byte),"")):this._fileDataUrl=result,this.fileDataUrl.emit(this._fileDataUrl),this.changeDetectorRef.markForCheck()},fileReader.onabort=()=>{this._loading=!1,this.changeDetectorRef.markForCheck()},fileReader.onerror=()=>{this._loading=!1,this.loadFileDataUrlFailed.emit(),this.changeDetectorRef.markForCheck()},fileReader.readAsDataURL(file)}static#_=this.\u0275fac=__name(function(t){return new(t||FilePickerInputComponent)(core.Y36(core.sBO),core.Y36(core.Qsj))},"FilePickerInputComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:FilePickerInputComponent,selectors:[["app-file-picker-input"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(file_picker_input_component_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._fileInput=_t.first)}},"FilePickerInputComponent_Query"),inputs:{name:"name",accept:"accept",readDataUrl:"readDataUrl",value:"value"},outputs:{fileDataUrl:"fileDataUrl",fileDeleted:"fileDeleted",loadFileDataUrlFailed:"loadFileDataUrlFailed",valueChange:"valueChange"},features:[core._Bn([{provide:fesm2020_forms.JU,useExisting:(0,core.Gpc)(()=>FilePickerInputComponent),multi:!0}])],ngContentSelectors:file_picker_input_component_c1,decls:3,vars:2,consts:[["type","file",2,"display","none",3,"name","accept"],["fileInput",""]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core._UZ(0,"input",0,1),core.Hsn(2)),2&rf&&core.Q6J("name",ctx.name)("accept",ctx.accept)},"FilePickerInputComponent_Template"),changeDetection:0})}__name(FilePickerInputComponent,"FilePickerInputComponent");var main_image_url_pipe=__webpack_require__(88396);function AvatarFieldComponent_div_12_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",10),core._UZ(1,"app-loading-spinner",11),core.qZA())}function AvatarFieldComponent_div_13_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",12)(1,"span",13)(2,"mat-icon"),core._uU(3,"warning"),core.qZA(),core._uU(4," Failed to upload image!"),core.qZA()())}__name(AvatarFieldComponent_div_12_Template,"AvatarFieldComponent_div_12_Template"),__name(AvatarFieldComponent_div_13_Template,"AvatarFieldComponent_div_13_Template");class AvatarFieldComponent{constructor(){this._file=null,this.fileData=null,this.fileData$=new cjs.Subject,this.imageUrl=null,this.avatarPending=null,this.uploadAvatarFailed=null,this.fileChange=new core.vpe,this.avatarSubmit=new core.vpe}get file(){return this._file}set file(value){this._file!==value&&(this._file=value,this.fileChange.emit(value))}static#_=this.\u0275fac=__name(function(t){return new(t||AvatarFieldComponent)},"AvatarFieldComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:AvatarFieldComponent,selectors:[["app-avatar-field"]],inputs:{file:"file",imageUrl:"imageUrl",avatarPending:"avatarPending",uploadAvatarFailed:"uploadAvatarFailed"},outputs:{fileChange:"fileChange",avatarSubmit:"avatarSubmit"},decls:14,vars:11,consts:[[1,"overflow-hidden","relative","rounded-[12px]","shadow-[3px_3px_6px_2px_rgba(0,_0,_0,_1)]","before:content-['']","before:block","before:float-left","before:pb-[100%]"],["alt","avatar_picture",1,"absolute","w-full","h-full","top-0","left-0","object-cover",3,"src"],["ngFrom","",3,"ngSubmit"],["name","avatar","readDataUrl","","accept","image/jpg, image/png, image/gif, image/bmp, image/jpeg",1,"grid","grid-flow-col","gap-[8px]","mt-[16px]",3,"value","valueChange","fileDataUrl"],["filePicker",""],["mat-raised-button","","color","accent","type","button",1,"avatar-btn",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"avatar-btn"],["mat-raised-button","","color","accent","type","button",1,"avatar-btn",3,"disabled","click"],["class","flex absolute items-center justify-center w-full h-full top-0 left-0 bg-[rgba(0,0,0,.32)]",4,"ngIf"],["class","flex absolute items-center justify-center w-full h-full top-0 left-0 color-warn bg-[rgba(0,0,0,.32)]",4,"ngIf"],[1,"flex","absolute","items-center","justify-center","w-full","h-full","top-0","left-0","bg-[rgba(0,0,0,.32)]"],[1,"w-[100px]","h-[100px]"],[1,"flex","absolute","items-center","justify-center","w-full","h-full","top-0","left-0","color-warn","bg-[rgba(0,0,0,.32)]"],[1,"text-[20px]","font-semibold"]],template:__name(function(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"div",0),core._UZ(1,"img",1),core.ALo(2,"mainImageUrl"),core.qZA(),core.TgZ(3,"form",2),core.NdJ("ngSubmit",__name(function(){core.CHM(_r3);const _r0=core.MAs(5);return core.KtG(_r0.value&&ctx.avatarSubmit.emit(_r0.value))},"AvatarFieldComponent_Template_form_ngSubmit_3_listener")),core.TgZ(4,"app-file-picker-input",3,4),core.NdJ("valueChange",__name(function($event){return ctx.file=$event},"AvatarFieldComponent_Template_app_file_picker_input_valueChange_4_listener"))("fileDataUrl",__name(function($event){return ctx.fileData=$event},"AvatarFieldComponent_Template_app_file_picker_input_fileDataUrl_4_listener")),core.TgZ(6,"button",5),core.NdJ("click",__name(function(){core.CHM(_r3);const _r0=core.MAs(5);return core.KtG(_r0.pickFile())},"AvatarFieldComponent_Template_button_click_6_listener")),core._uU(7,"Add picture"),core.qZA(),core.TgZ(8,"button",6),core._uU(9,"Save"),core.qZA(),core.TgZ(10,"button",7),core.NdJ("click",__name(function(){core.CHM(_r3);const _r0=core.MAs(5);return core.KtG(_r0.removeFile())},"AvatarFieldComponent_Template_button_click_10_listener")),core._uU(11,"Remove"),core.qZA()()(),core.YNc(12,AvatarFieldComponent_div_12_Template,2,0,"div",8),core.YNc(13,AvatarFieldComponent_div_13_Template,5,0,"div",9)}if(2&rf){const _r0=core.MAs(5);let tmp_0_0;core.xp6(1),core.Q6J("src",core.lcZ(2,9,null!==(tmp_0_0=ctx.fileData)&&void 0!==tmp_0_0?tmp_0_0:ctx.imageUrl),core.LSH),core.xp6(3),core.Q6J("value",ctx.file),core.xp6(2),core.Udp("display",ctx.fileData?"none":""),core.xp6(2),core.Udp("display",ctx.fileData?"":"none"),core.xp6(2),core.Q6J("disabled",!ctx.fileData),core.xp6(2),core.Q6J("ngIf",ctx.avatarPending||_r0.loading),core.xp6(1),core.Q6J("ngIf",ctx.uploadAvatarFailed)}},"AvatarFieldComponent_Template"),dependencies:[loading_spinner_component.g,common.O5,fesm2020_button.lW,icon.Hw,fesm2020_forms._Y,fesm2020_forms.JL,fesm2020_forms.F,FilePickerInputComponent,main_image_url_pipe.C],styles:["[_nghost-%COMP%]{position:relative;padding:16px;box-shadow:3px 3px 6px 2px #000;border-radius:16px;overflow:hidden;background-image:linear-gradient(to bottom right,#9a51ff,#370084)}app-avatar-field[_nghost-%COMP%]{position:relative;padding:16px;box-shadow:3px 3px 6px 2px #000;border-radius:16px;overflow:hidden}button[mat-raised-button].avatar-btn[_ngcontent-%COMP%]{box-shadow:3px 3px 6px 2px #000!important}"],changeDetection:0})}__name(AvatarFieldComponent,"AvatarFieldComponent");var media_pipe=__webpack_require__(99020),assert_pipe=__webpack_require__(76002),equels_pipe=__webpack_require__(28410),to_string_pipe=__webpack_require__(12890);function AuthUserDetailsComponent_ng_template_7_app_address_info_form_5_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"app-address-info-form",7),core.NdJ("addressFormSubmited",__name(function($event){core.CHM(_r5);const ctx_r4=core.oxw(2);return core.KtG(ctx_r4.onAddressFormSubmited($event))},"AuthUserDetailsComponent_ng_template_7_app_address_info_form_5_Template_app_address_info_form_addressFormSubmited_0_listener")),core.qZA()}}function AuthUserDetailsComponent_ng_template_7_Template(rf,ctx){if(1&rf){const _r7=core.EpF();core.TgZ(0,"div",4)(1,"mat-checkbox",5),core.NdJ("change",__name(function($event){core.CHM(_r7);const ctx_r6=core.oxw();return core.KtG(ctx_r6.addAddressInfomation$.next($event.checked))},"AuthUserDetailsComponent_ng_template_7_Template_mat_checkbox_change_1_listener")),core.ALo(2,"toString"),core.ALo(3,"async"),core._uU(4,"Add address information"),core.qZA()(),core.YNc(5,AuthUserDetailsComponent_ng_template_7_app_address_info_form_5_Template,1,0,"app-address-info-form",6),core.ALo(6,"async")}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("@checkbox",void 0)("value",core.lcZ(2,3,core.lcZ(3,5,ctx_r0.addAddressInfomation$))),core.xp6(4),core.Q6J("ngIf",core.lcZ(6,7,ctx_r0.addAddressInfomation$))}}__name(AuthUserDetailsComponent_ng_template_7_app_address_info_form_5_Template,"AuthUserDetailsComponent_ng_template_7_app_address_info_form_5_Template"),__name(AuthUserDetailsComponent_ng_template_7_Template,"AuthUserDetailsComponent_ng_template_7_Template");const auth_user_details_component_c0=__name(function(){return{800:"enter_to_big_view"}},"auth_user_details_component_c0");function AuthUserDetailsComponent_ng_template_11_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.TgZ(0,"app-auth-user-field-list",8),core.NdJ("detailSubmit",__name(function($event){core.CHM(_r9);const ctx_r8=core.oxw();return core.KtG(ctx_r8.onDetailSubmit($event))},"AuthUserDetailsComponent_ng_template_11_Template_app_auth_user_field_list_detailSubmit_0_listener"))("detailCancel",__name(function(){core.CHM(_r9);const ctx_r10=core.oxw();return core.KtG(ctx_r10.onDetailCancel())},"AuthUserDetailsComponent_ng_template_11_Template_app_auth_user_field_list_detailCancel_0_listener")),core.ALo(1,"async"),core.ALo(2,"media"),core.qZA()}if(2&rf){const ctx_r2=core.oxw();core.Q6J("fieldNames",ctx_r2.addressFieldNames)("labels",ctx_r2.labels)("controls",ctx_r2.controls)("pendingFieldName",core.lcZ(1,5,ctx_r2.pendingFieldName$))("@authAddressInfo",core.xi3(2,7,"enter_to_small_view",core.DdM(10,auth_user_details_component_c0)))}}__name(AuthUserDetailsComponent_ng_template_11_Template,"AuthUserDetailsComponent_ng_template_11_Template");const detailsAnimationMetadata=(0,animations.X$)("authUser",[(0,animations.eR)("void => enter_to_small_view",[(0,animations.ru)([(0,animations.IO)("@*",[(0,animations.pV)()]),(0,animations.IO)("app-user-detail:nth-of-type(even)",[ng_animations.PYX.startState,(0,animations.EY)(300,[(0,ng_animations.PYX)("300ms","300ms")])],{optional:!0}),(0,animations.IO)("app-user-detail:nth-of-type(odd)",[ng_animations.MeT.startState,(0,animations.EY)(300,[(0,ng_animations.MeT)("300ms","150ms")])],{optional:!0})])]),(0,animations.eR)("enter_to_small_view => void",[(0,animations.ru)([(0,animations.IO)("@*",[(0,animations.pV)()]),(0,animations.IO)("app-user-detail:nth-of-type(even)",[(0,animations.EY)(300,[(0,ng_animations.Gzh)("300ms","300ms")])],{optional:!0}),(0,animations.IO)("app-user-detail:nth-of-type(odd)",[(0,animations.EY)(300,[(0,ng_animations.qUF)("300ms","150ms")])],{optional:!0})])]),(0,animations.eR)("void => enter_to_big_view",[(0,animations.IO)("app-user-detail",[ng_animations.MeT.startState,(0,animations.EY)(150,[(0,ng_animations.MeT)("300ms","600ms")])])]),(0,animations.eR)("enter_to_big_view => void",[(0,animations.IO)("app-user-detail",[(0,ng_animations.Gzh)("600ms","0ms")])])]),authAdressInfoAnimationMetadata=(0,animations.X$)("authAddressInfo",[(0,animations.eR)("void => enter_to_small_view",[(0,animations.ru)([(0,animations.IO)("@*",[(0,animations.pV)()]),(0,animations.IO)("app-user-detail:nth-of-type(even)",[ng_animations.PYX.startState,(0,animations.EY)(300,[(0,ng_animations.PYX)("300ms","1200ms")])],{optional:!0}),(0,animations.IO)("app-user-detail:nth-of-type(odd)",[ng_animations.MeT.startState,(0,animations.EY)(300,[(0,ng_animations.MeT)("300ms","1050ms")])],{optional:!0})])]),(0,animations.eR)("enter_to_small_view => void",[(0,animations.ru)([(0,animations.IO)("@*",[(0,animations.pV)()]),(0,animations.IO)("app-user-detail:nth-of-type(even)",[(0,animations.EY)(300,[(0,ng_animations.Gzh)("300ms","1200ms")])],{optional:!0}),(0,animations.IO)("app-user-detail:nth-of-type(odd)",[(0,animations.EY)(300,[(0,ng_animations.qUF)("300ms","1050ms")])],{optional:!0})])]),(0,animations.eR)("void => enter_to_big_view",[(0,animations.IO)("app-user-detail",[ng_animations.MeT.startState,(0,animations.EY)(150,[(0,ng_animations.PYX)("300ms","1350ms")])])]),(0,animations.eR)("enter_to_big_view => void",[(0,animations.IO)("app-user-detail",[(0,ng_animations.Gzh)("600ms","0ms")])])]),avataAnimationMetadata=(0,animations.X$)("avatar",[(0,animations.eR)(":enter",[ng_animations.g97.startState,(0,ng_animations.g97)("600ms","500ms")]),(0,animations.eR)("enter_to_small_view => void",[(0,ng_animations.nAS)("600ms","0ms")]),(0,animations.eR)("enter_to_big_view => void",[(0,ng_animations.qUF)("600ms","0ms")])]),checkboxAnimationMetadata=(0,animations.X$)("checkbox",[(0,animations.eR)(":enter",[ng_animations.BX9.startState,(0,ng_animations.BX9)("300ms","150ms")]),(0,animations.eR)(":leave",[(0,ng_animations.SEG)("300ms","0ms")])]);class AuthUserDetailsComponent extends page_component.I{constructor(_store,_authStateRef,_detailsService,asyncValidationService,authStateEvents){super(),this._store=_store,this._authStateRef=_authStateRef,this._detailsService=_detailsService,this._sanitizationSampler=new cjs.Subject,this._subscription=new cjs.Subscription,this._destroy$=new cjs.Subject,this.file=null,this.fileData=null,this.pendingFieldName$=new cjs.BehaviorSubject(null),this.addAddressInfomation$=new cjs.BehaviorSubject(!1),(0,others.y)(this._authStateRef.state.userData),this.addressFieldNames=this._detailsService.getAddressInfoFiledNames(),this.fieldNames=this._detailsService.getBasicFiledNames(),this.labels=this._detailsService.getBasicLabels(),this.addressLabels=this._detailsService.getAddressInfoLabels(),this.avatarPending$=authStateEvents.postingAvatar$.pipe((0,operators.bw)(status=>{status===utils.XS.resolved&&(this.file=null)}),(0,operators.UI)(status=>status===utils.XS.awaiting)),this.uploadAvatarFailed$=authStateEvents.postingAvatar$.pipe((0,operators.UI)(status=>status===utils.XS.rejected)),this.hasAddressInfo$=_store.pipe((0,ngrx_store.Ys)(({auth})=>{var _a;return(null==(_a=auth.userData)?void 0:_a.hasAddressInfo)??!1})),this._subscription.add(authStateEvents.updatingUser$.pipe((0,operators.hX)(status=>status===utils.XS.resolved),(0,operators.UI)(()=>null)).subscribe(this.pendingFieldName$)),this._subscription.add(authStateEvents.addingAddressInfo$.pipe((0,operators.UI)(status=>status===utils.XS.resolved)).subscribe(this.addAddressInfomation$));const{controls,dispose}=this._detailsService.getControls(this._authStateRef.state.userData,this._sanitizationSampler);this.controls=controls,this._subscription.add(dispose),this.controls.email.addAsyncValidators(asyncValidationService.hasEmail()),this._currentUserId=this._authStateRef.state.userData.userId,this._subscription.add(()=>{this._destroy$.next(),this._destroy$.complete(),this._sanitizationSampler.complete()})}get imageUrl(){var _a;return null==(_a=this._authStateRef.state.userData)?void 0:_a.mainPhotoUrl}ngOnDestroy(){this._subscription.unsubscribe()}onAvatarFormSubmit(file){null!=file&&this._store.dispatch((0,auth_actions.fU)({file,info:"Posting avatar from auth-user-details component."}))}onAddressFormSubmited(addressInfoModel){this._store.dispatch((0,auth_actions.nk)({data:addressInfoModel,info:"Adding address info from auth-user-details component."}))}onDetailCancel(){(0,others.y)(this._authStateRef.state.userData),this._detailsService.update(this.controls,this._authStateRef.state.userData)}onDetailSubmit(name){this._sanitizationSampler.next();const value=this.controls[name].value;if((0,others.y)(this._authStateRef.state.userData),value===this._authStateRef.state.userData[name])return;this.pendingFieldName$.next(name);const data={userId:this._currentUserId,fieldName:name,newValue:value};this._store.dispatch((0,auth_actions.Nq)({data,info:"Updating user from auth-user-details component."}))}static#_=this.\u0275fac=__name(function(t){return new(t||AuthUserDetailsComponent)(core.Y36(ngrx_store.yh),core.Y36(auth_state.Z8),core.Y36(UserDetailsService),core.Y36(validation_service.D),core.Y36(auth_effects.f))},"AuthUserDetailsComponent_Factory");static#_2=this.\u0275cmp=core.Xpm({type:AuthUserDetailsComponent,selectors:[["app-auth-user-details"]],features:[core.qOj],decls:13,vars:33,consts:[[1,"w-[85%]","max-w-[320px]","min800:col-[1/2]","min800:self-start","min800:justify-self-center","min800:m-[0_16px_0_0]",3,"file","imageUrl","avatarPending","uploadAvatarFailed","fileChange","avatarSubmit"],[1,"justify-self-stretch","min800:col-[2/3]","max-[799px]:mt-[24px]","min800:row-[1/4]","min800:self-start","min800:mr-[16px]",3,"fieldNames","labels","controls","pendingFieldName","detailSubmit","detailCancel"],[3,"ngIf","ngIfElse"],["addressInfoTemplate",""],[1,"m-[16px]","min800:col-[1/2]","min800:self-start","min800:m-[16px_16px_16px_16px]","min800:translate-x-[-16px]"],[3,"value","change"],["class","w-full max-w-[400px] min800:col-[1/2] min800:self-start min800:justify-self-center px-[16px]",3,"addressFormSubmited",4,"ngIf"],[1,"w-full","max-w-[400px]","min800:col-[1/2]","min800:self-start","min800:justify-self-center","px-[16px]",3,"addressFormSubmited"],[1,"justify-self-stretch","min800:m-[28px_12px_0_0]","min800:col-[1/2]","min800:self-start",3,"fieldNames","labels","controls","pendingFieldName","detailSubmit","detailCancel"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"app-avatar-field",0),core.NdJ("fileChange",__name(function($event){return ctx.file=$event},"AuthUserDetailsComponent_Template_app_avatar_field_fileChange_0_listener"))("avatarSubmit",__name(function($event){return ctx.onAvatarFormSubmit($event)},"AuthUserDetailsComponent_Template_app_avatar_field_avatarSubmit_0_listener")),core.ALo(1,"async"),core.ALo(2,"async"),core.ALo(3,"media"),core.qZA(),core.TgZ(4,"app-auth-user-field-list",1),core.NdJ("detailSubmit",__name(function($event){return ctx.onDetailSubmit($event)},"AuthUserDetailsComponent_Template_app_auth_user_field_list_detailSubmit_4_listener"))("detailCancel",__name(function(){return ctx.onDetailCancel()},"AuthUserDetailsComponent_Template_app_auth_user_field_list_detailCancel_4_listener")),core.ALo(5,"async"),core.ALo(6,"media"),core.qZA(),core.YNc(7,AuthUserDetailsComponent_ng_template_7_Template,7,9,"ng-template",2),core.ALo(8,"equels"),core.ALo(9,"assert"),core.ALo(10,"async"),core.YNc(11,AuthUserDetailsComponent_ng_template_11_Template,3,11,"ng-template",null,3,core.W1O)),2&rf){const _r1=core.MAs(12);core.Q6J("file",ctx.file)("imageUrl",ctx.imageUrl)("avatarPending",core.lcZ(1,12,ctx.avatarPending$))("uploadAvatarFailed",core.lcZ(2,14,ctx.uploadAvatarFailed$))("@avatar",core.xi3(3,16,"enter_to_small_view",core.DdM(31,auth_user_details_component_c0))),core.xp6(4),core.Q6J("fieldNames",ctx.fieldNames)("labels",ctx.labels)("controls",ctx.controls)("pendingFieldName",core.lcZ(5,19,ctx.pendingFieldName$))("@authUser",core.xi3(6,21,"enter_to_small_view",core.DdM(32,auth_user_details_component_c0))),core.xp6(3),core.Q6J("ngIf",core.xi3(8,24,core.lcZ(9,27,core.lcZ(10,29,ctx.hasAddressInfo$)),!1))("ngIfElse",_r1)}},"AuthUserDetailsComponent_Template"),dependencies:[common.O5,fesm2020_checkbox.oG,AddressInfoFormComponent,AuthUserFieldListComponent,AvatarFieldComponent,media_pipe.o,assert_pipe.K,equels_pipe.E,to_string_pipe.z,common.Ov],styles:["[_nghost-%COMP%]{display:grid;padding:16px 0;justify-items:center;align-items:center;grid-auto-flow:row dense;width:100%;max-width:1100px;margin-left:auto;margin-right:auto}@media (min-width: 800px){[_nghost-%COMP%]{grid-template-columns:1fr 1fr;grid-template-rows:auto auto 1fr}}"],data:{animation:[detailsAnimationMetadata,avataAnimationMetadata,checkboxAnimationMetadata,authAdressInfoAnimationMetadata]},changeDetection:0})}__name(AuthUserDetailsComponent,"AuthUserDetailsComponent");var shared_module=__webpack_require__(26922);const routers=[{path:"",component:AuthUserComponent,canActivate:[auth_guard.a],canActivateChild:[auth_guard.a],children:[{path:"details",component:AuthUserDetailsComponent},{path:"newpassword",component:NewPasswordComponent},{path:"photos",component:PhotosComponent}]}];class AccountModule{static#_=this.\u0275fac=__name(function(t){return new(t||AccountModule)},"AccountModule_Factory");static#_2=this.\u0275mod=core.oAB({type:AccountModule});static#_3=this.\u0275inj=core.cJS({providers:[AddressInfoService,UserDetailsService,PhotoModalService],imports:[fesm2020_router.Bz.forChild(routers),shared_module.m]})}__name(AccountModule,"AccountModule")}};